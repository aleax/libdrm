commit d51e1bb56ca2f7858cdeac6f61a7b747c1e15b1e
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Nov 9 08:55:58 2006 +1100

    libdrm: add drmOpenOnce + drmCloseOnce to libdrm

commit 79038751ffe47ed1ce82766e027d98fd2f0e2c6a
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Nov 8 15:08:09 2006 +1100

    libdrm: add support for server side functionality in libdrm
    
    This adds APIs to allow the X server to use libdrm from the system
    rather than its own in-built copy.

commit 584acab6d6103552711bd6b5596ee4ccad305bc2
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Nov 7 09:36:40 2006 -0800

    Add drm_u64_t typedef on non-linux to fix libdrm build.

commit 7b6cd95bb6c41653aed78952da0a461bd4791413
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Oct 31 10:01:53 2006 +0000

    Fix bug #8839 - a comment

commit 4b04c0cc45f7a89c757ce442e4f2742b9d3aa293
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Oct 30 11:18:44 2006 +0100

    Bugzilla Bug #8819
    Build fixes for powerpc.
    Reported by Katerina Barone-Adesi

commit 56563c22d658b6dcb7926fd41513618cd46c31a6
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sun Oct 29 15:39:11 2006 +0100

    Minor bugfix, indentation and removal of unnused variables.

commit decacb2e6415029fe87a3680c8f967483ba05281
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Oct 27 13:08:31 2006 +0200

    Reserve the new IOCTLs also for *bsd.
    Bump libdrm version number to 2.2.0

commit f6d5fecdd20b9fd9e8744d8f43fa276b73a1da78
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Oct 27 11:28:37 2006 +0200

    Last minute changes to support multi-page size buffer offset alignments.
    This will come in very handy for tiled buffers on intel hardware.
    Also add some padding to interface structures to allow future binary backwards
    compatible changes.

commit e09544a2d3f44e96d01ed2bdcb4a4eb8eec26225
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Oct 26 21:20:34 2006 +0200

    New mm function names. Update header.

commit 47dbfc4e4a3e8ce2ec468bc3874f74f7e2b13476
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Oct 26 21:17:43 2006 +0200

    Add improved alignment functionality to the core memory manager.
    This makes an allocated block actually align itself and returns any
    wasted space to the manager.
    
    Also add some functions to grow and shrink the managed area.
    This will be used in the future to manage the buffer object swap cache.

commit b4fba1679b6156e3ca6f053b44cae0b003febe7f
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Oct 26 21:14:23 2006 +0200

    Add a one-page hole in the file offset space between buffers.

commit 7ea059ae076c50f2012dee2ccbb8d41745705383
Merge: 9ed4656... a8909a0...
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sat Oct 21 14:20:28 2006 +0200

    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm

commit 9ed4656799043f24f4d64615ebb8128bedc99799
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sat Oct 21 14:17:51 2006 +0200

    The CPU cache must be flushed _before_ we start modifying the kernel map ptes,
    otherwise data will be missing, which becomes apparent when the kernel evicts
    batch buffers which are likely to be written into in the evicted state,
    and then rebound to the AGP aperture.
    This means we cannot rely on the AGP module to flush the
    cache for us.

commit a8909a0ebcc21ad6b92b93ffe87878ece4b56506
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Fri Oct 20 17:05:07 2006 +0200

    Bug #1746: Set dev_priv_size for the MGA driver.

commit 9321592149c031694c459bb05e7a31d1197fe5cb
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Oct 20 15:07:21 2006 +0200

    We apparently need this global cache flush anyway.

commit 3624e43282b0c6aad32829f116fd8f7bce66fbb6
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Oct 20 15:06:31 2006 +0200

    Bug #8707, 2.6.19-rc compatibility for memory manager code.

commit d70347bfc07bb5e34e36684b95560df37d669db4
Merge: 5de4665... 561e23a...
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Oct 19 17:07:26 2006 +0200

    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm

commit 5de4665747c441b2a8e82b020cc386f2d974499d
Merge: e22b04f... e8ba62d...
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Oct 19 17:00:03 2006 +0200

    Importing fixes from drm-ttm-0-2-branch

commit e8ba62db722eb0b915377269d7e1c3a039928669
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Oct 19 16:58:00 2006 +0200

    Make sure delayed delete list is empty on lastclose.
    Fix some refcounting errors.
    Fix some error messages.

commit e22b04f807b9869c8c89b6316214517f5da13322
Merge: 11aaa35... e172945...
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Oct 18 17:33:19 2006 +0200

    Merging drm-ttm-0-2-branch
    
    Conflicts:
    
    	linux-core/drmP.h
    	linux-core/drm_drv.c
    	linux-core/drm_irq.c
    	linux-core/drm_stub.c
    	shared-core/drm.h
    	shared-core/i915_drv.h
    	shared-core/i915_irq.c

commit 11aaa358a0f56afb64df44c737ec331d90118537
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Oct 18 17:18:23 2006 +0200

    Remove stray softlink.

commit e172945d668f1de1243ac2ae91ab77f3b2bda40a
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Oct 18 16:54:17 2006 +0200

    Avoid driver-specific AGP user-populated types, since we don't know what AGP
    driver we're on.
    Avoid global cache flushes before inserting pages.
    In general, they are never mapped, and not accessed through the kernel map, so
    a cache flush should not be necessary. The exception is pages that are bound
    cached. We might need a cache flush for those.

commit 25fe4a80490bba709099f0401535d2f96ac7729c
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 17 20:04:41 2006 +0200

    Remove some debugging messages.

commit c34faf224b959bf61e4c3eb29c66a12edbd31841
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 17 20:03:26 2006 +0200

    Remove max number of locked pages check and call, since
    that is now handled by the memory accounting.

commit 89b944179856fadf8667587eff142129c2c6b826
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 17 19:57:06 2006 +0200

    Lindent.

commit f22f89e6b3c970a29197d3a53c170fb7d0340cbe
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 17 19:52:34 2006 +0200

    Add vma list memory usage to memory accounting.
    Use byte unit for /proc printout of memory usage for small sizes to be
    able to detect memory allocation bugs more easily.

commit d515936ea7f98f6aaa9217699796beadef9d664b
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 17 19:40:57 2006 +0200

    Add memory usage accounting to avoid DOS problems.

commit 5443dbe35f182b9286a96d24d29037d5cb625e3d
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 17 16:00:25 2006 +0200

    Implement mm_lock and mm_unlock functions.
    The mm_lock function is used when leaving vt. It evicts _all_ buffers.
    Buffers with the DRM_BO_NO_MOVE attribute set will be guaranteed to
    get the same offset when / if they are rebound.

commit db5c671e86c3db8c99ce5a4954632248e6f849aa
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 17 11:28:48 2006 +0200

    Remove the memory manager parameter from the put_block function, as this
    makes the client code a lot cleaner. Prepare buffer manager for lock and
    unlock calls.

commit 5881ce1b91034fbdf81dda37a23215cfc1310cdf
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 17 11:05:37 2006 +0200

    Extend generality for more memory types.
    Fix up init and destruction code.

commit 561e23a7c2f06b382613d3e2ae8d23104d0949aa
Author: Michael Karcher <freedesktop-bugzilla@mkarcher.dialup.fu-berlin.de>
Date:   Mon Oct 16 22:06:58 2006 -0400

    dev->agp_buffer_map is not initialized for AGP DMA on savages
    bug 8662

commit 5b2a60f550090a41c13483ceaaa1a84d3a9257f8
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Oct 16 14:22:27 2006 +0200

    Change Intel AGP memory type numbers.

commit 1bab514c0a1a535c19d53e3d39e3b351db3ab7a4
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 14 23:38:20 2006 +1000

    remove config.h from build no longer exists kbuild does it

commit 540c64c378daafaad1c3f63faf5af81f39388665
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Oct 12 16:10:47 2006 +0200

    Bugfixes.

commit 10150df02b7062b9975661ccd82b475cd23c8839
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Oct 12 12:09:16 2006 +0200

    Simplify the AGP backend interface somewhat.
    
    Fix buffer bound caching policy changing, Allow
    on-the-fly changing of caching policy on bound buffers if the hardware
    supports it.
    
    Allow drivers to use driver-specific AGP memory types for TTM AGP pages.
    Will make AGP drivers much easier to migrate.

commit 30703893674b3da5b862dee2acd6efca13424398
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Oct 11 22:21:01 2006 +0200

    Compatibility code for 2.6.15-2.6.18. It is ugly but a little comfort is that
    it will go away in the mainstream kernel.
    Some bugfixes, mainly in error paths.

commit f2db76e2f206d2017f710eaddc4b33add4498898
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Oct 11 13:40:35 2006 +0200

    Big update:
    Adapt for new functions in the 2.6.19 kernel.
    Remove the ability to have multiple regions in one TTM.
       This simplifies a lot of code.
    Remove the ability to access TTMs from user space.
       We don't need it anymore without ttm regions.
    Don't change caching policy for evicted buffers. Instead change it only
       when the buffer is accessed by the CPU (on the first page fault).
       This tremendously speeds up eviction rates.
    Current code is safe for kernels <= 2.6.14.
    Should also be OK with 2.6.19 and above.

commit c58574c60505a699e19e1ed59e1b441be2594e53
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 10 10:37:26 2006 +0200

    Use a nopage-based approach to fault in pfns.

commit a9f57a2b9c5897cbf568bf75342204b780566de0
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue Oct 10 02:24:19 2006 +0200

    only allow specific type-3 packets to pass the verifier instead of all for r100/r200 as others might be unsafe (r300 already does this), and add checking for these we need but aren't safe. Check the RADEON_CP_INDX_BUFFER packet on both r200 and r300 as it isn't safe neither.

commit cee659afb56e7ac443402ac791144f391721061e
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Oct 3 12:08:07 2006 +0200

    Get rid of all ugly PTE hacks.

commit c9e3aa961eb90265ec024ff57013786e4d47d0e7
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Oct 2 06:13:38 2006 +0300

    Bug 6242: [mach64] Use private DMA buffers, part #4.
    
    mach64_state.c: convert the DRM_MACH64_BLIT ioctl to submit a pointer to
    user-space memory rather than a DMA buffer index, similar to DRM_MACH64_VERTEX.
    
    This change allows the DDX to map the DMA buffers read-only and eliminate a
    security problem where a client can alter the contents of the DMA buffer after
    submission to the DRM.
    
    This change also affects the DRI/DRM interface. Performace-wise, it basically
    affects PCI mode where I get a ~12% speedup for some Mesa demos I tested.
    This is mainly due to eliminating an ioctl for allocating the DMA buffer.
    
    mach64_dma.c: move the responsibility for allocating memory for the DMA ring
    in PCI mode to the DDX.
    
    This change affects the DDX/DRM interface and unifies a couple of PCI/AGP code
    paths for ring memory in the DRM.
    
    Bump the mach64 DRM version major and date.

commit f3deef730d52c94ce21ada7e4ceb63aa28a8601b
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Oct 2 05:46:42 2006 +0300

    Bug 6242: [mach64] Use private DMA buffers, part #3.
    
    Add DRM_PCI_BUFFER_RO flag for mapping PCI DMA buffer read-only. An additional
    flag is needed, since PCI DMA buffers do not have an associated map.

commit 25760c30d4aedb370423d0bb03c014cab47b5d4f
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Aug 28 05:44:37 2006 +0300

    Bug 6242: [mach64] Use private DMA buffers, part #2.
    
    Factor out from mach64_dma_dispatch_vertex() the code to reclaim an unsed
    buffer, in preperation for using it in mach64_dma_dispatch_blit() also.

commit eea150e776657faca7d5b76aca75a33dc74fbc9d
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Jul 16 02:15:02 2006 +0300

    Bug 6242: [mach64] Use private DMA buffers, part #1.
    
    Factor out from mach64_freelist_get() the code to reclaim a completed buffer,
    this is to improve readability for me.

commit d1b31a228b72b8dd8e588f0a0cc8eeabc3845f70
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Jul 16 01:02:06 2006 +0300

    Bug 6209: [mach64] AGP DMA buffers not mapped correctly.
    
    Map the DMA buffers from the same linear address as the vertex bufs. If
    dev->agp_buffer_token is not set, mach64 drm maps the DMA buffers from
    linear address 0x0.

commit 16be6ba63a41f03e98a741464d3b51eefb277373
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Mon Oct 2 15:33:19 2006 +0200

    Fix type of second argument to spin_lock_irqsave().
    (cherry picked from f6238cf6244b32bd84e3d2819963d7f5473867c8 commit)

commit f6238cf6244b32bd84e3d2819963d7f5473867c8
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Mon Oct 2 15:33:19 2006 +0200

    Fix type of second argument to spin_lock_irqsave().

commit eacedf41a65f135722e7bee6f1a66a803619237f
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Oct 2 15:06:35 2006 +0200

    Make the user_token 44-bit for TTMs, and have them occupy a unique file space
    starting at 0x00100000000. This will hopefully allow us to use
    unmap_mapping_range(). Note that user-space will need
    64-bit file offset support.

commit a31046b8734f12ed22127ef5f6ca4fc33df72ec1
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Oct 2 14:03:15 2006 +0200

    Add a buffer object manager for TTM maps.

commit d85b99435f0ea7a17b3b7be31b53c00632c07177
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Oct 2 13:49:43 2006 +0200

    Allow for 44 bit user-tokens (or drm_file offsets)

commit 418b81c65c55601d4e414b351db5b8d76db8a109
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Oct 2 13:37:54 2006 +0200

    Add a comment to previos commit.

commit c6be27401fbc12ec72bac13d07e3cc93bd63732a
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Oct 2 13:34:30 2006 +0200

    Trap and be verbose about a deadlock that occurs with AIGLX and drivers that
    use drm_reclaim_buffers_locked().

commit 58a23d193f7d25d23c76a58c192c814a415a843b
Author: Felix KÃ¼hling <fxkuehl@gmx.de>
Date:   Mon Oct 2 10:50:40 2006 +0200

    drm_rmdraw: Declare id and idx as signed so testing for < 0 works as intended.
    (cherry picked from d58389968124191a546a14b42ef84edc224be23d commit)

commit 3a16e615cabfed18b1891a732e7243ef41dc0ad0
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Mon Oct 2 11:04:42 2006 +0200

    Make locked tasklet handling more robust.
    
    Initialize the spinlock unconditionally when struct drm_device is filled in,
    and return early in drm_locked_tasklet() if the driver doesn't support IRQs.

commit d58389968124191a546a14b42ef84edc224be23d
Author: Felix KÃ¼hling <fxkuehl@gmx.de>
Date:   Mon Oct 2 10:50:40 2006 +0200

    drm_rmdraw: Declare id and idx as signed so testing for < 0 works as intended.

commit 8e908eaf50d5331ee875fefbf793dbe07d99786a
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 29 14:21:51 2006 +0200

    Bump driver date.

commit 17a640419a447083470880f1266e14063cd5acd0
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 29 10:27:29 2006 +0200

    i915: Only schedule vblank tasklet if there are scheduled swaps pending.
    
    This fixes issues on X server startup with versions of xf86-video-intel that
    enable the IRQ before they have a context ID.
    (cherry picked from 7af93dd9849442270ec89cb4bbeef5bfd4f9e424 commit)

commit 48367fdfe677adada52ad61d850e2980e1070632
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Thu Sep 28 19:13:59 2006 +0200

    i915: Only initialize IRQ fields in postinstall, not the PIPE_SET ioctl.
    
    Some other minor changes in preparation for actually disabling user interrupts.

commit 3620a3ec85033d3d1d1a44ec32492fb2ef20fd8a
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Thu Sep 28 19:05:58 2006 +0200

    i915: Bump minor again to differentiate from vsync changes.

commit 390184df92915d232cab90469937de875ee65b91
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Sep 27 18:22:10 2006 +0200

    i915: Avoid mis-counting vblank interrupts when they're only enabled for pipe A.
    
    It looks like 'after a while', I915REG_INT_IDENTITY_R for some reason always has
    VSYNC_PIPEB_FLAG set in the interrupt handler, even though pipe B is disabled.
    So we only increase dev->vbl_received if the corresponding bit is also set in
    dev->vblank_pipe.
    (cherry picked from 881ba569929ceafd42e3c86228b0172099083d1d commit)

commit c0bff9f9cd08066df7f3bccd77d4d4dd4edb4163
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Mon Sep 18 12:15:38 2006 +0200

    i915: Bump minor for swap scheduling ioctl and secondary vblank support.
    
    (cherry picked from 2627131e5d0c8cd5e3f0db06451c2e7ae7569b1b commit)

commit 0a7d9edcfb427724f0cad5ff6d0a4493d266b4e8
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Sep 13 08:59:35 2006 +0200

    i915_vblank_swap: Add support for DRM_VBLANK_NEXTONMISS.
    
    (cherry picked from 0356fe260dcf80f6d2d20e3384f2a1f4ee7f5b30 commit)

commit c47ebd970783873164578126fa5481a166cd837e
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 1 11:48:07 2006 +0200

    Only return EBUSY after we've established we need to schedule a new swap.
    
    (cherry picked from 50a0284a61d4415c0ebdb02decee76ef3115007a commit)

commit cef0f243251103be81c914d5b83ee3401c2a9c34
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 1 11:35:31 2006 +0200

    Core vsync: Don't clobber target sequence number when scheduling signal.
    
    It looks like this would have caused signals to always get sent on the next
    vertical blank, regardless of the sequence number.
    (cherry picked from cf6b2c5299e9be3542d4deddfd05d5811f11d2ef commit)

commit ed82172378666d35ca60e6094fdecb59511a135f
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 1 11:27:14 2006 +0200

    Core vsync: Add flag DRM_VBLANK_NEXTONMISS.
    
    When this flag is set and the target sequence is missed, wait for the next
    vertical blank instead of returning immediately.
    (cherry picked from 89e323e4900af84cc33219ad24eb0b435a039d23 commit)

commit c4c47a7eacf8e8cb96b2fb63164e28f0db7353ad
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 1 11:24:38 2006 +0200

    Fix 'sequence has passed' condition in i915_vblank_swap().
    
    (cherry picked from 7f09f957d9a61ac107f8fd29128d7899a3e8a228 commit)

commit f9aa4f5973d6098b95e92f606dc1967c627897db
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Thu Aug 31 18:33:04 2006 +0200

    Add SAREA fileds for determining which pipe to sync window buffer swaps to.
    
    (cherry picked from c2bdb76814755c9ac6e66a8815f23af0fe4f3a91 commit)

commit 316e73676861c0e019d52ec7bf7b7b1451eaed97
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Thu Aug 31 18:32:08 2006 +0200

    Add definition of DRM_VBLANK_SECONDARY.
    
    (cherry picked from 84b38b63f05e04ade8b1ddfb770047fd86de0d64 commit)

commit 4a3d270862f6dbc52ca3e16ba66fdb24667b2aa2
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Thu Aug 31 18:30:55 2006 +0200

    Make handling of dev_priv->vblank_pipe more robust.
    
    Initialize it to default value if it hasn't been set by the X server yet.
    
    In i915_vblank_pipe_set(), only update dev_priv->vblank_pipe and call
    i915_enable_interrupt() if the argument passed from userspace is valid to avoid
    corrupting dev_priv->vblank_pipe on invalid arguments.
    (cherry picked from 87c57cba1a70221fc570b253bf3b24682ef6b894 commit)

commit 1f3493f65ba0959e401191c648f57501216eeb0a
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 30 19:33:28 2006 +0200

    DRM_I915_VBLANK_SWAP ioctl: Take drm_vblank_seq_type_t instead of pipe number.
    
    Handle relative as well as absolute target sequence numbers.
    
    Return error if target sequence has already passed, so userspace can deal with
    this situation as it sees fit.
    
    On success, return the sequence number of the vertical blank when the buffer
    swap is expected to take place.
    
    Also add DRM_IOCTL_I915_VBLANK_SWAP definition for userspace code that may want
    to use ioctl() instead of drmCommandWriteRead().
    (cherry picked from d5a0f107511e128658e2d5e15bd7e6215c507f29 commit)

commit 00531cecad3cf9a1ec230f7f33535d153b9d9bd0
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 30 19:24:04 2006 +0200

    Change first valid DRM drawable ID to be 1 instead of 0.
    
    This makes it easier for userspace to know when it needs to allocate an ID.
    
    Also free drawable information memory when it's no longer needed.
    (cherry picked from df7551ef7334d728ec0371423661bb403d3e270a commit)

commit 7d487602a31dd886037417db088b6e643ed86918
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Mon Aug 28 18:19:58 2006 +0200

    Add copyright notice.
    
    (cherry picked from d04751facea36cb888c7510b126658fdbc4277d5 commit)

commit da75d59cd65764c6076ab9b96ad8195ed71ed80b
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 25 19:01:05 2006 +0200

    i915: Add ioctl for scheduling buffer swaps at vertical blanks.
    
    This uses the core facility to schedule a driver callback that will be called
    ASAP after the given vertical blank interrupt with the HW lock held.
    (cherry picked from 257771fa290b62d4d2ad896843cf3a207978d0bb commit)

commit d7389a9758944ab0d241d3c1108adfeeec9eee76
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 25 18:55:55 2006 +0200

    Locking and memory management fixes.
    
    (cherry picked from 23d2833aaa37a33b9ddcf06cc796f59befc0d360 commit)

commit ca3a1b5ec4a417785238fb7c0cb4c3570dbcb31a
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 25 18:55:06 2006 +0200

    Drop tasklet locked driver callback when uninstalling IRQ.
    
    (cherry picked from b9f3009160d8bd1a26a77d6f1616f1679c7b969d commit)

commit f93e4822694b066427f70c23216b78f92edb1bff
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 23 19:00:26 2006 +0200

    Export drm_get_drawable_info symbol from core.
    
    (cherry picked from 43f8675534c7e95efbc92eaf2c8cc43aef95f125 commit)

commit 67e88e5628d02cd94561e31fd68e02b6bde66e6f
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 23 16:05:47 2006 +0200

    Hook up DRM_IOCTL_UPDATE_DRAW ioctl.
    
    (cherry picked from 98a89504589427a76c3f5cfa2266962a1a212672 commit)

commit baa26c5faa3d5903569d1c94ad93b843d6979ba5
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 23 16:04:41 2006 +0200

    Only reallocate cliprect memory if the number of cliprects changes.
    
    Also improve diagnostic output.
    (cherry picked from af48be1096221d551319c67a9e782b50ef58fefd commit)

commit 9810ec2737de6aa81e764225f580e4ea39de437a
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Tue Aug 22 16:40:07 2006 +0200

    Add support for tracking drawable information to core
    
    Actually make the existing ioctls for adding and removing drawables do
    something useful, and add another ioctl for the X server to update drawable
    information. The only kind of drawable information tracked so far is cliprects.
    (cherry picked from 29598e5253ff5c085ccf63580fd24b84db848424 commit)

commit a7b8c8d523d7f726b8fb74cb37f807d2316cf5dd
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 16 15:47:22 2006 +0200

    Add support for interrupt triggered driver callback with lock held to DRM core.
    
    (cherry picked from d817cc1f30060fcc4a85a05b2de8a2a1687421b5 commit)

commit 596d7e998403f565a796c431dbbcaf9e0c49908b
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 11 18:06:46 2006 +0200

    Add support for secondary vertical blank interrupt to i915 driver.
    
    When the vertical blank interrupt is enabled for both pipes, pipe A is
    considered primary and pipe B secondary. When it's only enabled for one pipe,
    it's always considered primary for backwards compatibility.
    (cherry picked from 0c7d7f43610f705e8536a949cf2407efaa5ec217 commit)

commit 2735f9e2908b786586d18f6384371b991bdce430
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 11 17:57:59 2006 +0200

    Add support for secondary vertical blank interrupt to DRM core.
    
    (cherry picked from ab351505f36a6c66405ea7604378268848340a42 commit)

commit ae96e264198323916ee58e293468c9b924feca75
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 29 11:46:45 2006 +0200

    Add a new buffer flag.
    Fix up some comments.

commit 3802f9adbf9a7e3d5c356f74b0c1ee966476fb97
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 29 11:15:59 2006 +0200

    Fix buffer manager takedown error.
    Prepare for the possibility to evict all buffers from vram / agp.
    This will be used by the X server when, for example, switching vts.

commit 7af93dd9849442270ec89cb4bbeef5bfd4f9e424
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 29 10:27:29 2006 +0200

    i915: Only schedule vblank tasklet if there are scheduled swaps pending.
    
    This fixes issues on X server startup with versions of xf86-video-intel that
    enable the IRQ before they have a context ID.

commit 881ba569929ceafd42e3c86228b0172099083d1d
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Sep 27 18:22:10 2006 +0200

    i915: Avoid mis-counting vblank interrupts when they're only enabled for pipe A.
    
    It looks like 'after a while', I915REG_INT_IDENTITY_R for some reason always has
    VSYNC_PIPEB_FLAG set in the interrupt handler, even though pipe B is disabled.
    So we only increase dev->vbl_received if the corresponding bit is also set in
    dev->vblank_pipe.

commit 2627131e5d0c8cd5e3f0db06451c2e7ae7569b1b
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Mon Sep 18 12:15:38 2006 +0200

    i915: Bump minor for swap scheduling ioctl and secondary vblank support.

commit 0356fe260dcf80f6d2d20e3384f2a1f4ee7f5b30
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Sep 13 08:59:35 2006 +0200

    i915_vblank_swap: Add support for DRM_VBLANK_NEXTONMISS.

commit 50a0284a61d4415c0ebdb02decee76ef3115007a
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 1 11:48:07 2006 +0200

    Only return EBUSY after we've established we need to schedule a new swap.

commit cf6b2c5299e9be3542d4deddfd05d5811f11d2ef
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 1 11:35:31 2006 +0200

    Core vsync: Don't clobber target sequence number when scheduling signal.
    
    It looks like this would have caused signals to always get sent on the next
    vertical blank, regardless of the sequence number.

commit 89e323e4900af84cc33219ad24eb0b435a039d23
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 1 11:27:14 2006 +0200

    Core vsync: Add flag DRM_VBLANK_NEXTONMISS.
    
    When this flag is set and the target sequence is missed, wait for the next
    vertical blank instead of returning immediately.

commit 7f09f957d9a61ac107f8fd29128d7899a3e8a228
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 1 11:24:38 2006 +0200

    Fix 'sequence has passed' condition in i915_vblank_swap().

commit c2bdb76814755c9ac6e66a8815f23af0fe4f3a91
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Thu Aug 31 18:33:04 2006 +0200

    Add SAREA fileds for determining which pipe to sync window buffer swaps to.

commit 84b38b63f05e04ade8b1ddfb770047fd86de0d64
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Thu Aug 31 18:32:08 2006 +0200

    Add definition of DRM_VBLANK_SECONDARY.

commit 87c57cba1a70221fc570b253bf3b24682ef6b894
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Thu Aug 31 18:30:55 2006 +0200

    Make handling of dev_priv->vblank_pipe more robust.
    
    Initialize it to default value if it hasn't been set by the X server yet.
    
    In i915_vblank_pipe_set(), only update dev_priv->vblank_pipe and call
    i915_enable_interrupt() if the argument passed from userspace is valid to avoid
    corrupting dev_priv->vblank_pipe on invalid arguments.

commit d5a0f107511e128658e2d5e15bd7e6215c507f29
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 30 19:33:28 2006 +0200

    DRM_I915_VBLANK_SWAP ioctl: Take drm_vblank_seq_type_t instead of pipe number.
    
    Handle relative as well as absolute target sequence numbers.
    
    Return error if target sequence has already passed, so userspace can deal with
    this situation as it sees fit.
    
    On success, return the sequence number of the vertical blank when the buffer
    swap is expected to take place.
    
    Also add DRM_IOCTL_I915_VBLANK_SWAP definition for userspace code that may want
    to use ioctl() instead of drmCommandWriteRead().

commit df7551ef7334d728ec0371423661bb403d3e270a
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 30 19:24:04 2006 +0200

    Change first valid DRM drawable ID to be 1 instead of 0.
    
    This makes it easier for userspace to know when it needs to allocate an ID.
    
    Also free drawable information memory when it's no longer needed.

commit d04751facea36cb888c7510b126658fdbc4277d5
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Mon Aug 28 18:19:58 2006 +0200

    Add copyright notice.

commit 257771fa290b62d4d2ad896843cf3a207978d0bb
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 25 19:01:05 2006 +0200

    i915: Add ioctl for scheduling buffer swaps at vertical blanks.
    
    This uses the core facility to schedule a driver callback that will be called
    ASAP after the given vertical blank interrupt with the HW lock held.

commit 23d2833aaa37a33b9ddcf06cc796f59befc0d360
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 25 18:55:55 2006 +0200

    Locking and memory management fixes.

commit b9f3009160d8bd1a26a77d6f1616f1679c7b969d
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 25 18:55:06 2006 +0200

    Drop tasklet locked driver callback when uninstalling IRQ.

commit 43f8675534c7e95efbc92eaf2c8cc43aef95f125
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 23 19:00:26 2006 +0200

    Export drm_get_drawable_info symbol from core.

commit 98a89504589427a76c3f5cfa2266962a1a212672
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 23 16:05:47 2006 +0200

    Hook up DRM_IOCTL_UPDATE_DRAW ioctl.

commit af48be1096221d551319c67a9e782b50ef58fefd
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 23 16:04:41 2006 +0200

    Only reallocate cliprect memory if the number of cliprects changes.
    
    Also improve diagnostic output.

commit 29598e5253ff5c085ccf63580fd24b84db848424
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Tue Aug 22 16:40:07 2006 +0200

    Add support for tracking drawable information to core
    
    Actually make the existing ioctls for adding and removing drawables do
    something useful, and add another ioctl for the X server to update drawable
    information. The only kind of drawable information tracked so far is cliprects.

commit d817cc1f30060fcc4a85a05b2de8a2a1687421b5
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Aug 16 15:47:22 2006 +0200

    Add support for interrupt triggered driver callback with lock held to DRM core.

commit 0c7d7f43610f705e8536a949cf2407efaa5ec217
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 11 18:06:46 2006 +0200

    Add support for secondary vertical blank interrupt to i915 driver.
    
    When the vertical blank interrupt is enabled for both pipes, pipe A is
    considered primary and pipe B secondary. When it's only enabled for one pipe,
    it's always considered primary for backwards compatibility.

commit ab351505f36a6c66405ea7604378268848340a42
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Aug 11 17:57:59 2006 +0200

    Add support for secondary vertical blank interrupt to DRM core.

commit b15bc8a0bad43c68dd1bbff27e7a7bd54e9e6938
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Sep 28 12:19:54 2006 +0200

    Libdrm version bump and naming.

commit c52fafa6288b4e6ecfce27151969749113a41f0b
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Sep 28 11:33:03 2006 +0200

    Don't enable fence / buffer objects on non-linux systems.
    Bump driver minor and date.

commit 1c6f0ea43c47603c2265248ce8a91698c8982f3c
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Sep 27 19:11:27 2006 +0200

    Activate error message that was never hit since it was masked
    by drm_lock_transfer.
    Ifdef out drm_lock_transfer. I see no use for it currently. Should be removed.

commit f2c03ecae627df77db25391fe85fcd8a2a4bdc0c
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Sep 27 19:07:55 2006 +0200

    Fix racy buffer object destruction.

commit c97149b45be9d0e9385d4c6721aa70dad68a1aa1
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Sep 27 09:31:39 2006 +0200

    Fix tt fixed size that slipped through in previous commit.

commit 235f6fc650e9974211843b9196a903963dae0211
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Sep 27 09:27:31 2006 +0200

    Adapt to architecture-specific hooks for gatt pages.

commit bd8ca12b7baff778d5bb7b4ad1d38d16b60a4d5a
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 26 16:00:22 2006 +0200

    Silence valgrind.

commit 26528627a6cea7f92a949e89e5db6e17ef9560c2
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 26 14:40:11 2006 +0200

    Remove the call to drm_lock_transfer, since it is not used anymore.
    Fix up drm_lock_free to retain the last locking context information.

commit 711f077b7423c1a436d703885c6d18a2ad2940aa
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 26 14:36:53 2006 +0200

    Allow for a driver to overload the ttm backend object methods.

commit 273eb7833d69db2d72430d5c96c21cebd05c206e
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Sep 25 11:51:08 2006 +0200

    Add /proc filesystem buffer / fence object accounting.
    Check for NULL pointer in the i915 flush handler.
    Remove i915_sync_flush declaration.

commit a02155a0d92d3933d42a3655db261446bfe72b44
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 22 09:25:36 2006 +0200

    Fix proc formatting broken by last commit.
    GPU lockup error reporting.

commit 62f6ea225615392098dedee47d4ccdd69e126a43
Author: Felix Kuhling <fxkuehl@gmx.de>
Date:   Fri Sep 22 03:46:54 2006 +1000

    bug 5942: add stubs for drm_mtrr_add/del for non-MTRR configured linux

commit 255f3e6f76dfd267a14765dd1293229184298d89
Author: Anish Mistry <mistry.7@osu.edu>
Date:   Fri Sep 22 03:43:34 2006 +1000

    bug 7092 : add pci ids for mach64 in Dell poweredge 4200

commit 1f71b8d7a456fe3ec4bfc2fed70b7420cdd0d55a
Author: Roland Scheidegger <zak@ZakTower.(none)>
Date:   Wed Sep 20 19:44:57 2006 +0200

    do a TCL state flush before accessing VAP_CNTL to prevent lockups on r200 when enabling/disabling vertex programs

commit fa511a3ff5150d932fd963594d1ef67a94bb8b1f
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Sep 20 16:31:15 2006 +0200

    Allow for 64-bit map handles of ttms and buffer objects.

commit aac918e7c72a46a1b0f2329380e2d6b4196d04e4
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Sep 18 21:50:00 2006 +0200

    Fence handler fix

commit ca1b15d645c74e20f638f5a09981bcf02f58caee
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Sep 18 20:43:31 2006 +0200

    Alternative implementation of page table zeroing using zap page_range.
    (Disabled for now)
    Fix bo_wait_idle bug.
    Remove stray debug message.

commit c4fad4c96168a3dfabaa8a7e97758fefd014c8a7
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Sep 18 16:02:33 2006 +0200

    More verbose error reporting in some cases.
    Add a buffer object waitIdle user-space function.
    Fix some names and minor glitches.

commit ef98a8e20dad8ae7e38f397d63c13bd24105ce53
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 21:22:12 2006 +1000

    drm: put domain number back to 0, domain support is seriously fubar..

commit 6ba9127753eff7615ba553fbc567aec98ecf8104
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Fri Sep 15 16:37:47 2006 +0200

    Use register writes instead of BITBLT_MULTI packets for buffer swap blits.
    
    This takes up two more ring buffer entries per rectangle blitted but makes sure
    the blit is performed top to bottom, reducing the likelyhood of tearing.

commit f613022ceef1814cb734bb3375f01962fd3bcf10
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 15 16:47:09 2006 +0200

    Allow a "native type" to be associated with a fence sequence.
    In the intel case, we can associate a flush with a sequence.

commit 49fbeb339c232804866cd548d6023fe559597353
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 15 11:18:35 2006 +0200

    Some bugfixes.
    Change the fence object interface somewhat to allow some more flexibility.
    Make list IOCTLS really restartable.
    Try to avoid busy-waits in the kernel using immediate return to user-space with an -EAGAIN.

commit 7223b4e264a64df2df70715d8777f2ccaa883d5e
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Sep 14 16:42:00 2006 +0200

    Simplify ttm alloc and free.

commit 682c6ed0293771b093452597540118f47fda1adf
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Sep 14 12:17:38 2006 +0200

    Remove the use of reserved pages, and use locked pages instead.
    Update compatibility for latest linux versions.

commit 9adc9584a7e0b61b16a943720bef31a71faeaef4
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 12 17:39:44 2006 +0200

    Fix some debug messages.

commit 861b26578cd5e497fb506ad5952fa62bd03ea201
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 12 16:28:34 2006 +0200

    Use lazy fence wait when possible even for RW fences. Saves some CPU.
    Lindent.

commit 191e284709ee792a32124e96e43d5876406b93dc
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 12 12:01:00 2006 +0200

    More bugfixes.
    Disable the i915 IRQ turnoff for now since it seems to be causing problems.

commit 3cc64a943a7240c73c92ab103ba0502b9ec07fee
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Tue Sep 12 06:13:14 2006 +1000

    drm: use radeon specific names for radeon flags

commit 99acb7936660843090ea8a9f22d2d50d9433e0de
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 8 17:24:38 2006 +0200

    Various bugfixes.

commit dddacd7a3a4bd0c453b346cee70d1d36a401e539
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Sep 6 23:26:50 2006 -0700

    Use the DRM_INIT_WAITQUEUE argument (needed on Linux) to avoid a warning.

commit 55057660f035a03078910d678e5fd9b0cb0b795a
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Sep 6 23:25:14 2006 -0700

    Put the PCI device/vendor id in the drm_device_t.
    
    This helps us unbreak FreeBSD DRM from the 965 changes.

commit d5726761858b1ff0fd6e6ee92ec1648fbb958a53
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Sep 6 23:08:29 2006 -0700

    Add a typedef for u64.

commit e3f54ecdd9d266607afd7d8b62960b2154b63e9d
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 5 19:36:45 2006 +0200

    Multithreaded application note.

commit 604215396847a7964fd7d68aa89d4f778b3bf22b
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 5 18:00:25 2006 +0200

    Fence all unfenced buffers function.

commit 034fc31292edaa25779a938ab3e92ef34697eaf9
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 5 14:23:18 2006 +0200

    i915: Only turn on user IRQs when they are needed.

commit 8c613a8363963330fbf701186f654007d6208bba
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Sep 5 11:00:52 2006 +0200

    Fix memory cache initialization.

commit f88c32fd4cb93fe8b9dfa543a26d74733d0cd8ef
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Sep 4 22:05:21 2006 +0200

    Libdrm function headers. Some renaming.

commit 550f51b4bf9920718aab2c611b15de3020537f92
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Sep 4 21:50:12 2006 +0200

    Buffer object wait IOCTL operation.
    Remove option to wait for fence / buffers and block signals.

commit a6b8e3eaf49044e135a0b9288192525f301458d5
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Sep 4 16:57:20 2006 +0200

    Make memory caches global so that they can be used with
    multiple heads.

commit a96b61fdc4fc3df50c91ca489f45f12cdad74f69
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 1 18:11:34 2006 +0200

    Lindent drm_bo.c

commit 405b5d9ca8cc9f6c5c7bb764c684bf74ba7660c6
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 1 18:11:05 2006 +0200

    Flag bit pattern bugfixes. Remove some error messages.

commit ef8e618cf30ab7dcbe8c7211e0c2508c5520a669
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 1 16:38:06 2006 +0200

    Export buffer info on map and validate ioctls.
    Add an info ioctl operation.

commit 11f51a9a877d1231551e8c6482a6f70daf380cdd
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 1 15:41:55 2006 +0200

    Bugfixes,
    Memory allocation optimizations.
    Buffer manager takedown.

commit 4edb95d6e0a00a9a8885603cab2c99e3c6daa705
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Sep 1 11:23:21 2006 +0200

    Various bugfixes.

commit 44f6d08988a77a640bea40d09cb61eec7566a5ce
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Aug 31 21:42:29 2006 +0200

    Validation and fencing.

commit 03c137c5f8d44c374406efe19c01105fcf34d583
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Aug 31 15:36:40 2006 +0200

    Remove the buffer manager mutex. Use dev->struct_mutex instead.
    Add a function to free buffers on hold for destruction if their
      fence object has expired.
    Add a timer to periodically call that function when there are
      buffers pending deletion.

commit ec8c79b79de6544cc09b5a2c85213a5f30e0d906
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Thu Aug 31 14:10:13 2006 +0200

    More mapping synchronization.
    libdrm validate and fencing functions.

commit ed9de124cc88cee398b7013de6b822bfaa3f397e
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 30 21:31:38 2006 +0200

    Lindenting drm_bo.c and drm_ttm.c

commit 914a77a15aae07cc305cc5da5ad6c7a639cbc121
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 30 21:30:47 2006 +0200

    Buffer object binding.
    Some code reordering.

commit 611662ab287c279a95ae33442325626e0191e2c5
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 30 20:23:40 2006 +0200

    Buffer eviction.
    Reworked map refcounting so that any process waiting on buffer object unmap
    will allow in other processes to unmap the buffer object.

commit d39055174b5a487f0d848e1af4c3459fb4261bf1
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 30 17:40:07 2006 +0200

    Remove the buffer object hint field and use it only
    as an argument.
    Validate stub.

commit ff95ea5536d70f9bc8eac12f2c97dae71fb97066
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 30 15:11:50 2006 +0200

    Add missing map flags.

commit 14a835be616183e733a2d6a7dcc697b8a6f46caf
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 30 15:08:40 2006 +0200

    Buffer object mapping and mapping synchronization for multiple clients.

commit e47a4fda2ef7aada45b7799ad20e8012102dc12e
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 30 13:04:08 2006 +0200

    Memory manager init and takedown.

commit 033bda07e9a4eab5058fb919b375deb57b08b5be
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 30 09:57:35 2006 +0200

    Buffer object reply fill in.
    Lindent of drm_bo.c drm_ttm.c

commit de144ba23c1245cf021a63cc739c7c9903568272
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 29 21:57:37 2006 +0200

    Part of buffer object libdrm interface.

commit 23f01c9fe8e6170459fe46ad5fc9757bbe967d96
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 29 18:40:08 2006 +0200

    Checkpoint commit. Buffer object flags and IOCTL argument list.

commit 0dedfc2cd03f50b435476e56637b333d345fddbd
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 29 14:52:02 2006 +0200

    Checkpoint ttm addition to buffer objects.

commit 279e8d26c6cf7347aa9cb6d50d025a41dff9a5be
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 29 10:45:34 2006 +0200

    64-bit IOCTL integer (Michel Dänzer & Brian Paul)

commit 205740647060bc3bdec2b4402a666eb1015932ff
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 28 17:51:53 2006 +0200

    Buffer object creation.

commit 0d67356de4e0c9e0d068ea9c16cf33df4fd13776
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 28 16:36:37 2006 +0200

    Proper TTM dereferencing
    Initial buffer object creation.

commit 05536a64785223ee8c57556300a14ba9c89837ae
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 28 13:51:39 2006 +0200

    Buffer object idle and mapping synchronization.

commit 480ea65ee4b02fa21d1ddf3bea09ac23085618cc
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 28 10:58:21 2006 +0200

    Checkpoint buffer object IOCTL stub.

commit e181f594a4a75790ce1d2a8e907f9fcc5e88b419
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 28 09:49:09 2006 +0200

    Add a 64-bit drm unsigned type for 64-bit clean IOCTLS.
    Conversion functions in drmP.h and xf86drm.c.

commit 4ddabd15620e6e4638a6a37a3a2b5bced626fcf9
Merge: 886d3b3... 9b984b3...
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 28 09:28:10 2006 +0200

    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into drm-ttm-0-2-branch
    
    Conflicts:
    
    	linux-core/drmP.h

commit 9b984b34e99f694e10251e15bc2ec1bc844dcca4
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 19 17:59:18 2006 +1000

    drm: lots of small cleanups and whitespace issues fixed up
    
    remove a mach64 warning, align a lot of things from linux kernel

commit 60ddaaf2e07b57997bcbaef0576005b52130bd24
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 19 16:56:03 2006 +1000

    add static function, and remove bad attributions

commit 3586ecd060d9468eba73c203c5e9de965fe904fb
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 19 16:55:30 2006 +1000

    fix const pointer warnings with file_operations

commit 205c573e449b38d759273f6a51eb8c1131585ece
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 19 16:55:00 2006 +1000

    remove local copies of pci domain/bus/slot/num

commit b4feb2c04efdcf31d094b03ea32327a06d9dcdd2
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 19 16:43:16 2006 +1000

    remove some DRM_ARRAY_SIZE from linux core code

commit 3a91e1a5fbfbca4654cca0ef41dc016fd8be80dd
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 19 16:36:26 2006 +1000

    fixup some of the comments in drm_context.c

commit 27c72b67eceec7517c34d2ca456c7474a353d6e6
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 19 16:31:34 2006 +1000

    drm: i810_dma.c: fix pointer arithmetic for 64-bit target
    
    First warning result from open-coded PTR_ERR,
    the rest is caused by code like this:
    
    *(u32 *) ((u32) buf_priv->kernel_virtual + used)
    
    I've also fixed a missing PTR_ERR in i830_dma.c
    
    From: Denis Vlasenko <vda.linux@googlemail.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 886d3b3061cdf53f5a353cbaac843f63104d2658
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sun Aug 27 22:01:33 2006 +0200

    Bugfixes.

commit 928bdc6c1c9cd1e60f0b070533768aaca56c84d8
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sun Aug 27 21:21:06 2006 +0200

    Initialize i915 saved flush flags.

commit b4b7b997605f88f3ffdcb0cc7cd1271e0cb24073
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sun Aug 27 21:16:13 2006 +0200

    Remove the ioctl multiplexing, and instead allow for generic
    drm ioctls 0x80 - 0xFF.

commit ac26b51503dfedf422d6ae49518adcf41dff1af3
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sun Aug 27 19:45:38 2006 +0200

    Have TTM create and reference ioctl call return the actual TTM size.

commit 4fa58aa15242333a635cb590762c6e6312945745
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sun Aug 27 19:07:38 2006 +0200

    Add TTM map handle on reference.

commit 65e7274008446d2059b7fd7cd6d7b1d6b04da0ce
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Sun Aug 27 19:03:20 2006 +0200

    ttm create / destroy / ref / unref ioctl.

commit b99e332236ca5fcc11e8d7c89566bbf3bcf959ee
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Sat Aug 26 12:21:11 2006 +0200

    Bug #7595: Avoid u32 overflows in radeon_check_and_fixup_offset().
    
    The overflows could cause valid offsets to get rejected under some
    circumstances, e.g. when the framebuffer resides at the very end of the card's
    address space.

commit c488e25ceb421c6f84f110d786d9814ac4dba1b2
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Aug 25 20:03:39 2006 +0200

    More ioctl stubs.
    Buffer object locking order documentation.

commit 35c8ce6c2945ff09dc52dbc2a7382798ba64c1da
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Aug 25 19:03:42 2006 +0200

    ttm and buffer objects ioctl stubs.

commit 1d3cf107d20cb11ad07667622785ef8341ab9c2a
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Aug 25 18:14:22 2006 +0200

    Module protection map access is moving into mainline kernels.
    Update drm_compat accordingly.
    (Reported by Dave Airlie)

commit 4c03030b12bae28dad50d69bd271de632c43ff13
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Fri Aug 25 18:05:35 2006 +0200

    Checkpoint commit
    Buffer object code.

commit ea5709997329a6c425261dcc454cf7dd97a81167
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 23 13:49:13 2006 +0200

    Fix previous commit: Only fall back to hashed handles
    when there is a duplicate handle error. Not for other errors.

commit 8fa43d4b2ff4137bab743bfaf6282aa327f16830
Merge: e201511... 459b234...
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 23 13:31:45 2006 +0200

    Merge branch 'master' of git+ssh://git.freedesktop.org/git/mesa/drm into drm-ttm-0-2-branch

commit 459b234d79daaa8a003da9ea48775a5587d5ba2a
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 23 11:31:10 2006 +0200

    Allow multiple addMaps with the same 32-bit map offset.
    (Reported by Dave Airlie)

commit 8dfe917cb26bbeddda0e1b52060d8dce188468f3
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 23 11:21:33 2006 +0200

    Fix hashtab implementation leaking illegal error codes to user space.
    (Reported by Dave Airlie)

commit e201511a0fbeb177a9ecd7f77d177fc88c1616fb
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 22 11:57:08 2006 +0200

    More ttm cleanups.

commit ca4e34e532e818921f7b2d36fc6886874b7f7924
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 22 11:19:53 2006 +0200

    ttm code cleanup.
    Fix the sleep-in-page-table-spinlock bug discovered by Dave Airlie

commit a6535c8db4614376ce8ecb7d889b92db066a96cc
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 22 10:44:09 2006 +0200

    Add a fence object class field for future use (For example VSYNC fence objects)

commit 7058d06317e17253d874bf4df7b09d0d52a5fd74
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 22 10:24:48 2006 +0200

    Initial i915 buffer object driver

commit b81ca5e031b2fbd9c5c401057c72f5857f7f5a3a
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 22 10:09:57 2006 +0200

    AGP backends for TTM.

commit 700bf80ca9fadf2c1404c220addebd92d9ad799d
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Tue Aug 22 09:47:33 2006 +0200

    Bring in stripped TTM functionality.

commit 8d5b7c77f9b31aa9bcf81536d39769f4f3feeb63
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 21 21:37:43 2006 +0200

    Allow longer sequence lifetimes.

commit e089de33e8efd87b30d59c571b9ab9aa302b23e1
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 21 21:36:00 2006 +0200

    i915 fence object driver implementing 2 fence object types:
    0x00 EXE fence. Signals when command stream interpreter has reached the point
    where the fence was emitted.
    0x01 FLUSH fence. Signals when command stream interpreter has reached the point
    where the fence was emitted, and all previous drawing operations have been
    completed and flushed.
    Implements busy wait (for fastest response time / high CPU) and
    lazy wait (User interrupt or timer driven).

commit 6571f74a4906ae4f5f92916d64cc2cce3c8e0043
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 21 21:12:29 2006 +0200

    Remove some accidently included TTM code.

commit 657bacc3953e8e51a0a15bd872e9818c9dbcbc10
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 21 21:04:36 2006 +0200

    Add missing fence type define.
    Add drm_fence.o to Makefile

commit 166da9355d95affe427a6cff3525df60e80a99df
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 21 21:02:08 2006 +0200

    User / Kernel space fence objects (device-independent part).

commit 1c787f0d396c309131d5f34939598d657ee2459f
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 21 20:38:57 2006 +0200

    Backwards compatibility code for ttms.

commit 42c2cfcf7d5730a2961d425228e042f533b312fa
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 21 20:30:19 2006 +0200

    Generic DRM support base-class support for user-space objects, like
    fence objects and buffer objects:
    Refcounting,
    Inter-process sharing,
    Synchronization
    Destruction.

commit 11f9e404fb66927146de30227fa05c5485aa1726
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 21 17:02:44 2006 +0200

    Avoid using vmalloc for small hash tables.

commit 0316f93d51abc52b816e936e0ece304ac47799c3
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Wed Aug 16 16:36:56 2006 +0200

    Remove hash tables on DRM exit.

commit 4daa024918d461ab8d173631fa5187dc50253b67
Author: Thomas Hellstrom <thomas-at-tungstengraphics-dot-com>
Date:   Mon Aug 14 17:11:14 2006 +0200

    Avoid kernel oops in some error paths calling drm_lastclose().

commit 0d60cd0036c6bc5383cdc1dad719950afd68cbbf
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 14 11:52:34 2006 +1000

    remove all TRUE instances as well

commit 18a48a9267826a3c81e87a5fa9bba79ea0cd295c
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 14 11:49:52 2006 +1000

    remove all TRUE/FALSE no need for this in the drm, use 0 or 1

commit 7a46d4139982cc82559ccf9a1bc09a52bdf12223
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Aug 10 14:38:50 2006 +1000

    i965 code and Linux coding style < 0
    
    smack my whitespace up.

commit 5340a7022766f3437fcaf9d8d4d83944befc2fa2
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Aug 10 14:32:18 2006 +1000

    cleanup some whitespace issue and move compat code to compat header

commit df7378d7fa9d048aea6911a3fe4973050003401b
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Aug 10 14:31:56 2006 +1000

    clean up script to create an lk drm directory

commit 28069ff10f288d06eb15ce0425def3625157187f
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Aug 10 14:31:22 2006 +1000

    drm: ati_pcigart cleanup
    
    use NULL instead of 0, cleanup some whitespace

commit 48cb9aceed782a4e9c557f30429e65f845dd777d
Author: Alan Hourihane <alanh@tungstengraphics.com>
Date:   Tue Aug 8 15:05:54 2006 -0700

    Add support for Intel i965G chipsets.
    
    This is a patch prepared by Guangdeng Liao based off of Tungsten Graphics's
    final code drop.

commit e524028630013bb0f436bcdca0396289745843cf
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 7 21:34:40 2006 +1000

    drm: whitespace cleanup in new files

commit 4b3ea90bc4ceeae440c64e0af8b59cf77ea7b622
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 7 21:00:13 2006 +1000

    drm: remove extra whitespace from drm_mm.c

commit 248d1a32a2462904bcaf040320b490570b4b0be6
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 7 20:56:38 2006 +1000

    drm: fixup whitespace and style for Linux kernel import

commit 35066b51efeb0d2ae9b4ba7fba066f80f798539d
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Jul 26 18:21:32 2006 +0200

    Revert "Make sure busmastering gets disabled on module unload."
    
    This reverts af7b89d7246efbed7d05c38fcaa6a13c4b89db90 commit. It causes an oops
    on X server shutdown here, and for the reporter of bug #7629 as well.

commit 645453ce11f819c4e9dd9be95ce9d621dc7d466b
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Jul 26 18:14:20 2006 +0200

    Bug #7629: Fix for CHIP_IS_AGP getting 'restored' with non-AGP cards
    
    Commit 2a47f6bfecea5dabcbf79d5e1aaf271f50070b89 caused the CHIP_IS_AGP flag to
    get 'restored' with PCI(e) cards. I can't think of a way to fix this without
    introducing a (otherwise redundant) CHIP_IS_PCI flag.

commit 09c901e4bdf2bd18110f963ef3759f6759f15317
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jul 24 11:09:41 2006 +1000

    remove incorrect exit marking on cleanup pci as this is called from other paths

commit 5cfbd5dbab4fe9668771377cb22da04c6103459e
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jul 24 10:51:27 2006 +1000

    switch drm to use Linux mutexes instead of semaphore.
    
    I hope the fallback compat code works if not shout at me.

commit 6677e2a10b820a5ccfd375cc627b8e41453a71da
Author: Adam Jackson <ajax@theobromine.nwnk.net>
Date:   Wed Jul 19 16:19:25 2006 -0400

    Delete the pre-core DRM code with extreme prejudice.

commit af7b89d7246efbed7d05c38fcaa6a13c4b89db90
Author: Adam Jackson <ajax@theobromine.nwnk.net>
Date:   Wed Jul 19 15:35:31 2006 -0400

    Make sure busmastering gets disabled on module unload.

commit d5e0f8bdaf8769642950b8219f0e80f6b523817d
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Jul 19 19:18:32 2006 +0200

    Use RADEON_RB3D_DSTCACHE_CTLSTAT instead of RADEON_RB2D_DSTCACHE_CTLSTAT.
    
    The latter seems to be a read-only mirror of the former.

commit 2a47f6bfecea5dabcbf79d5e1aaf271f50070b89
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Jul 19 19:16:26 2006 +0200

    Make sure CHIP_IS_AGP flag is set when not overriding to PCI mode.
    
    This allows using AGP after overriding to PCI mode in a previous session
    without reloading the DRM.

commit c91748e702af1c59d88a4b6c2afb20a781dc6660
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Jul 19 19:13:00 2006 +0200

    When writeback isn't used, actually disable it in the hardware.
    
    Not doing this might waste bus bandwidth or even cause memory corruption or
    system crashes on systems that check bus transfers. No such incident has been
    reported though.

commit e337eadcec9c1e2cf885167c076ab2407bd6c090
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Jul 19 19:07:06 2006 +0200

    Implement RADEON_PARAM_SCRATCH_OFFSET getparam.
    
    When this succeeds, userspace can read the scratch register contents from the
    mapped writeback page directly.

commit 7dea64677b62418b14d34c41399cdb8bf8b817cd
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Jul 19 19:01:33 2006 +0200

    Some debug output when the getparam ioctl is called with an unknown parameter.

commit b9243ce3d5ed6bd70851a132871387d4d2e886bc
Author: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date:   Wed Jul 19 18:31:43 2006 +0200

    .cvsignore -> .gitignore
    
    Sort the merged file, remove the redundant explicit .ko lines and add
    some generated symlinks.

commit 126673d62afad6da84e833daa644a352d88a5e37
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Tue Jul 11 14:37:37 2006 +0000

    Keep hashed user tokens, with the following changes:
    32-bit physical device addresses are mapped directly to user-tokens. No
        duplicate maps are allowed, and the addresses are assumed to be outside
        of the range 0x10000000 through 0x30000000. The user-token is identical
        to the 32-bit physical start-address of the map.
    64-bit physical device addressed are mapped to user-tokens in the range
    0x10000000 to 0x30000000 with page-size increments. The user_token should
        not be interpreted as an address.
    Other map types, like upcoming TTM maps are mapped to user-tokens in the
        range
    0x10000000 to 0x30000000 with page-size increments. The user_token should
        not be interpreted as an address.
    This keeps compatibility with buggy drivers, while still implementing a
        hashed map lookup. The SiS and via device driver major bumps are
        reverted.

commit a392349691ec2aa3f83d8a9fc4a485e4dbef4bbe
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Jul 10 13:00:21 2006 +0000

    Change drm Map handles to be arbitrary 32-bit hash tokens in the range
        0x10000000 to 0x90000000 in PAGE_SIZE increments.
    Implement hashed map lookups.
    This potentially breaks both 2D and 3D drivers. If so, the corresponding
    2D and 3D driver should be fixed, and it's corresponding drm device driver
        should have its major bumped as soon as possible.
    Bump sis and via drm device driver majors.
    The SiS and Unichrome 3D drivers are fixed in Mesa CVS HEAD and
        mesa_6_4_branch.

commit c21a7b763ad31c3473ba2c9a1a01bb729bc13bb5
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Wed Jul 5 15:52:35 2006 +0000

    SiS 315 Awareness.

commit 264f60ded4921e00f83198fa48e82037f26e818c
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Wed Jul 5 14:39:22 2006 +0000

    Add missing semaphore release.

commit 56b073385213d187535fbbd24adaf9ebeb7c752f
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Jun 27 21:04:50 2006 +0000

    Disable building static libraries. Bump to 2.0.2 for header updates.

commit aafedbf7c57903949e74fc7123a1f1fc1e94ea47
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Jun 23 16:29:39 2006 +0000

    Fix compilation problem on 2.6.9 kernels (bug #6211)

commit da143d0606e321e48037d39e0c82355a4695328a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 22 21:34:44 2006 +0000

    Remove spurious debug messages from i915 vblank config paths

commit f8891ef802e3417c4ecda08d597e081485d75060
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 21 00:15:10 2006 +0000

    i915: Save vblank pipe configuration to restore on resume

commit 83f256e60e44d83304df44cead6617212fe437b4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 19 20:15:53 2006 +0000

    Add i915 ioctls to configure pipes for vblank interrupt.
    i915 vblanks can be generated from either pipe a or b, however a disabled
        pipe generates no interrupts. This change allows the X server to select
        which pipe generates vblank interrupts.

commit 58b63ee5ccc1427a6835ef5112fe556faa9e1be3
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Jun 19 09:12:50 2006 +0000

    Fix buffer cleanup on close. Move memory manager reset from final_context
        to lastclose.

commit 96f272884d6caf7940c9bc3c95dcac75b0a8cd3f
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Jun 19 09:01:31 2006 +0000

    via: Bump version number and date.

commit 0203edaa21451c2840d3c4116fb0bdbec82cb0fe
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Fri Jun 16 15:20:20 2006 +0000

    via: Return the requested size instead of the correct size of the allocated
        regions. The 2D driver and XvMC lib has problems when the returned size
        is not the same as the allocated size.

commit ca1a77683d523dc1d2268531b19ea23b3e1ae4f0
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Thu Jun 15 18:37:05 2006 +0000

    via:
    -Remove out of memory error message.
    -Move sman cleanup from final_context to lastclose.
    -Add the P4VM800PRO (?) PCI ID.

commit 6c7faf5814547169dec2b865abf1f63b83aaeb05
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Tue Jun 6 17:52:03 2006 +0000

    s/list_entry/drm_hash_entry/ for "drm_hash_item"s.

commit 1a9e5bae109b476f9ee34975242c8938aaac4146
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Tue Jun 6 17:46:17 2006 +0000

    Fix drm_remove_magic potential memory leak / corruption. Move drm
        authentication token hashing to new generic hash table implementation.

commit 6bacb180cef00573fc41a1e79bdd5b89d6f1c1f5
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Tue Jun 6 14:19:00 2006 +0000

    Merge in the drm-sman-branch

commit 838b03f7aad579bcb593c06e44ade02a0583d3ce
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Sun May 28 16:20:29 2006 +0000

    file via_mm.c was initially added on branch drm-sman-branch.

commit 7fbfb53c00c3acd5965badf1e62e8a4bb836ee22
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Sun May 28 16:20:29 2006 +0000

    file drm_sman.h was initially added on branch drm-sman-branch.

commit 09872c9ab3bb597c37a83edd3bf365db46e6d507
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Sun May 28 16:20:29 2006 +0000

    file sis_mm.c was initially added on branch drm-sman-branch.

commit 36160c80604a4c10c70877afb5be98210096636e
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Sun May 28 16:20:29 2006 +0000

    file drm_sman.c was initially added on branch drm-sman-branch.

commit 31a80d39e52097a599e77b3e52bac70da8315308
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Fri May 26 19:33:02 2006 +0000

    file drm_hashtab.h was initially added on branch drm-ttm-branch.

commit f4e6e4499c1b7a26de2bbf36568f75315faec212
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed May 24 18:36:24 2006 +0000

    Add support for r200 vertex programs (R200_EMIT_VAP_PVS_CNTL, and new
        packet type for making it possible to address whole tcl vector space
        and have a larger count)

commit 9e0320a0ad926202f1598698ad9bc728949ba0e7
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Sat May 20 09:20:05 2006 +0000

    add forgotten register define for previous commit

commit e1b627c17e31bb659fe8aeffeaa2e301d5e2a88c
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Sat May 20 09:08:18 2006 +0000

    Do a tcl state flush before accessing tcl vector space. This fixes some
        more problems with flickering (bug #6637). drm may not be appropriate
        place for this, since doing that flush there might both be overkill and
        insufficient in some cases. However, it's hard to figure out when that
        flush is needed, so this has to suffice. There does not seem to be a
        performance penalty associated with it.

commit 79e596917290807f11ba6f529abc30b7c6336e52
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri May 19 04:11:22 2006 +0000

    rip out unneeded back compat code

commit b1a64b8136b3dafb843d9b677becfdb5f2ac1eb8
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu May 18 07:32:37 2006 +0000

    add consts to radeon microcode.
    From: tilman

commit bdd381a7cea814d12d3207a67503cc1a5e353bed
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 17 06:07:57 2006 +0000

    Set entry->virtual for sg maps, fixing ATI PCI/PCIE GART support.
    PR: kern/97056 Submitted by: Stanislav Sedov <ssedov@mbsd.msk.ru>

commit dcfcf1a84d400f9c1ade36a233f0a18131115921
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 17 05:44:39 2006 +0000

    Add the bits for vblank support on FreeBSD, which most importantly avoids
        chasing a NULL pointer at the first 3d app invocation.

commit 7ea4a88fa30d9608b09dc0052b20e54301db547a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 17 05:41:48 2006 +0000

    Add the workaround that's in the kernel to suppress GCC's warning about
        refusal to inline functions that (in some cases, at least) aren't that
        large.

commit d365f031292d0f50755a3049c410443b1075fff5
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Apr 23 09:05:05 2006 +0000

    fixup GFP_COMP for older kernels and get_page/put_page for newer

commit 30a5787d3671fba89d14efb638695c2dd61adf03
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Apr 23 08:07:57 2006 +0000

    Fix from Benh for ppc r300 scratch

commit 4a49e6c3668dd281f70a13fb382fac93452758e2
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Thu Apr 20 14:26:59 2006 +0000

    check for __FreeBSD_kernel__ (bug 3810)

commit 1327222f9b5521c2d98f7550eb335b68e2af3aea
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 18 06:12:22 2006 +0000

    Err, use "ifndef" rather than "if !", to avoid compiler warning.

commit 2abd1f270bccfdda6e87021000ba88e07f54c181
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 18 06:08:17 2006 +0000

    Reorder the DRM_*_AGP enum to match linux's numbers (oops). Fixes i915
        attachment. Make our mga_drv.c use them, while I'm here.
    Submitted by: Jonathan Fosburgh <jonathan@fosburgh.org>

commit 40b70e324430e36f10d6229793acf66d9104aff7
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 18 05:57:28 2006 +0000

    Use __LP64__ instead of checking the linux-specific BITS_PER_LONG.

commit 63c4d0257616c799d4f0bb84be3f17dbaf867495
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Apr 9 20:10:32 2006 +0000

    Revert a change that accidentally went in with whitespace changes from
        Linux, which broke on FreeBSD. DRM_COPY_*_IOCTL checks for the size
        parameter matching the ioctl's command size there, since the copin/out
        happened earlier.

commit 6cb366b5a83996fc7f4ceb6b4af1a89473407866
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 8 09:45:43 2006 +0000

    Compile fixes for FreeBSD.

commit 299aad03c2148bb3e9efdb29b89e70b712a2e055
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Apr 5 08:34:24 2006 +0000

    coverity bugfix from the kernel

commit 4f53bf35454422db7cdd8db52b95016a9ec0dd2e
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Apr 5 01:23:57 2006 +0000

    remove stupid init and exit flags..

commit ac5bd25208d2f636edb45b71de11decdde781862
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Apr 3 08:06:51 2006 +0000

    make add context non master...

commit 985738f203f06aa630feaf4ef15b794ea50d3ee9
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Mar 25 07:16:14 2006 +0000

    radeon fix up the PCI ids for new memory map like the kernel one.. not
        perfect but should be very safe... align some other kernel bits i810
        align with kernel

commit 9c92b55953836589184f72f5a0c509f72af94786
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Mar 20 21:40:54 2006 +0000

    Bump driver date to reflect airlied's last fix.

commit 6bb92ab086c7e21fe90b835f20e6ba493e988cf6
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Mar 19 07:53:46 2006 +0000

    fix issue in mga from kernel

commit 8c8f937b3de12185e3c0041726a9f6fd5f3d21ff
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Mar 19 07:52:53 2006 +0000

    make some functions static in via driver

commit 38376c7fa66234107ab6d69b828eb4ca8a3ad0ea
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Fri Mar 17 01:35:34 2006 +0000

    Add missing pci ids for new radeons (most but not all are pcie, r420,
        rv380, rv410), with the exception of the rs400 igps. Hopefully they no
        longer lock up with new ddx, but no guarantees... (bug #5413)

commit 14d1219442c679c754fcc4e27460610ae219951a
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Mar 15 01:02:54 2006 +0000

    Avoid walking off the end of the hash table. (Coverity report #465)

commit ea40d3dd41cb3c562caf404fead9fdaa0b97565c
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Mar 8 23:01:32 2006 +0000

    Fix bug I reintroduced

commit ef835973b2f26410f9c9d3abed3b3f4828a716c1
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Mar 8 06:03:45 2006 +0000

    fix some use before NULL check

commit 4436ab86d8c0e1177bbec276c605d133e7c82ff0
Author: Aapo Tahkola <aet@rasterburn.org>
Date:   Tue Mar 7 01:08:35 2006 +0000

    ia64 support for r300_scratch. (not tested)

commit b3fdf9bb7acd023060e0dba07d3b439c3b64faef
Author: Aapo Tahkola <aet@rasterburn.org>
Date:   Mon Mar 6 20:08:50 2006 +0000

    Add general-purpose packet for manipulating scratch registers (r300)

commit 02f76f41b12e1465db4e4a48c0b81977a8bd3d8d
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Wed Mar 1 22:22:25 2006 +0000

    file xf86mm.c was initially added on branch drm-ttm-branch.

commit 0f13b3e1b1765b150ffe42b759355687b040210e
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Wed Mar 1 22:22:25 2006 +0000

    file xf86mm.h was initially added on branch drm-ttm-branch.

commit 06e8bd2a0d668487f4124cde16629610f8f557ff
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Sat Feb 25 09:51:15 2006 +0000

    Add all radeon pci ids known by ddx, but only r350/rv350 and below (new
        chips may be problematic). Leave the existing entries for new chips in
        though. Remove ids not known by ddx (secondary ids, non-existant,...).
        Correct some entries (name/family). Make the radeon family enum look
        more alike the ddx/dri versions. See #5413

commit 9c0634bbadca0216749a336e587fd51b12307637
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 21 11:10:05 2006 +0000

    set dma pages reserved

commit abd3904bf0c5bcbf2f2ec117a3d2216dd5f830ef
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 21 10:28:47 2006 +0000

    use coherent memory for PCI allocations with COMP flag

commit 22e41ef08338ae6dd59acbe6d4d8e50d83672816
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Feb 20 23:09:00 2006 +0000

    Formatting cleanup, dead code removal. Remove N() namespacing macro,
        useless. Remove SIGIO handling functions as they're server-only and
        properly belong in libdri.

commit 0a211db23c0d7e22946aa25f22e9aeab6783b617
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Feb 19 12:08:14 2006 +0000

    experimental PCI DMA fixes use proper Linux interfaces

commit 4c1c05ad96bd174d82ab94da7a0645bc448442f6
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Feb 19 12:06:27 2006 +0000

    missed a piece of benh patch

commit a25667894a8b8cab1dc8a48994cd9a61ecaba152
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 05:43:19 2006 +0000

    make some functions static from the kernel

commit d75fa645ed03ee0e2ffddc629b050626ddde5776
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 05:30:03 2006 +0000

    fix brace placement

commit b2523e7aa103d7d0451ae460d4ab5c7556eebf8e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 04:18:45 2006 +0000

    always enable and set master on pci device

commit eb5666b089ac0defe9a8ae3d218c9d4a098f683b
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 04:13:36 2006 +0000

    clear i915 interrupts sources on server exit

commit 7c18b2565ed3fc1952356967a1e057d86df6484a
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 03:21:29 2006 +0000

    add proper checking for bitblt multi

commit 9fad101da95bfd37987b797020f71fe306c6f876
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 03:04:30 2006 +0000

    add benh's memory management patch

commit 08fafc424a6266fa5e3d6ba755dea22e384e9683
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 03:01:38 2006 +0000

    fix build wrong function call

commit 4791dc885619b1a6460c1fcf48f648945feea4d3
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 02:53:36 2006 +0000

    major realigment of DRM CVS with kernel code, makes integration much easier

commit 585f34c3e533cafd687beba161d6d0379b52bb47
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 02:38:07 2006 +0000

    fix card unload

commit ff9ecc09f98a345078554bac2992f96adde9038f
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 18 02:34:53 2006 +0000

    Fixup test for memory at end of memory space

commit 659e9a091d3ea61d291d6e2f0fbfb20e685dbcbf
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Feb 17 17:25:41 2006 +0000

    via: Change via_drm.h versioning scheme after lenghty discussion on
        unichrome-users.

commit 75bf1c268fc56352631ddb10f8bedb5c9b2c8105
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Feb 17 16:54:37 2006 +0000

    file i915_ttm.c was initially added on branch drm-ttm-branch.

commit 292d4a5b28af80f24f0db0e85c93f8067ed47b26
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Feb 9 23:14:16 2006 +0000

    Update the hardware breadcrumb in the sarea on irq reception so that
        clients can avoid an ioctl waiting on fences that have already been
        received. Would be even better if the hardware did the update itself.

commit f99fc2c12d3cb36706700fb70ff5301f956d1cb8
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Feb 1 12:58:38 2006 +0000

    file drm_mm.c was initially added on branch drm-ttm-branch.

commit 07e1126bde7c4a9e9737894748822f98e914922f
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Jan 26 12:14:09 2006 +0000

    add missing name, desc, date, major, minor and patchlevel entries

commit 1f0da9dacaa8a98958f9922729c0cf597a561399
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Jan 24 21:24:53 2006 +0000

    fix an error message typo Unkown -> Unknown

commit f19c9eecd115f5535b62a37a8ab79a2b3f73c5b0
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Jan 24 21:18:41 2006 +0000

    other part of revert

commit 788750fc8cb2647d616aad75b3255d497b356f36
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Jan 24 21:16:54 2006 +0000

    put back some of Dave's code related to vblank support - accidentally
        reverted.

commit 3e8918adc8ba9405e9f496d50a3f4060b31d1dfb
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Jan 24 14:08:05 2006 +0000

    file Makefile.am was initially added on branch drm-ttm-branch.

commit 8a9ecf45fa9be2879c4b0c08c8407a538d1be147
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Jan 24 11:20:05 2006 +0000

    file drm_hashtab.c was initially added on branch drm-ttm-branch.

commit 270cffbe43955033a54dd54695ca1108194e087e
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jan 23 10:05:22 2006 +0000

    Fix CMDBUFFER path, add heap destroy and flesh out sarea for rotation
        (Tungsten Graphics)

commit 9a01593f1aeda40abc5815b70fff9f909702501c
Author: Aapo Tahkola <aet@rasterburn.org>
Date:   Fri Jan 20 21:45:28 2006 +0000

    Add support for texture cache flushes (R300_TX_CNTL)

commit 534bfb3742459af8d9a30579d8f9b6ab18b475d0
Author: Aapo Tahkola <aet@rasterburn.org>
Date:   Fri Jan 20 21:30:07 2006 +0000

    Sync from r300_reg.h from Mesa.

commit e9732865b7c05f2930a0c8b1751aad7929a2f3a7
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Jan 19 14:14:06 2006 +0000

    add Intel i945GM support

commit d394c9fa082407591586856afbaeb0833f5a7534
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Thu Jan 12 19:08:16 2006 +0000

    via: direction bug in get_user_pages call in via_dmablit.c fixed. Bumped
        minor since this causes the via DDX to fail with vlc video player.

commit 2e0c281d1aabdf5b775a2f7de804d2f34a500124
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Jan 6 11:57:40 2006 +0000

    via: Version via_drm.h Alter the drm_via_dmablit_t IOCTL arg.

commit a019c10c303bb1b2741a1da5b582ae45977085a5
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Jan 6 11:52:01 2006 +0000

    via: Last commit really required a bump of minor. Fix.

commit 661004544c004090edfbb8541850303b4780b8b4
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Jan 6 11:19:06 2006 +0000

    via: Combine PCI DMA transfers with stride==width (Idea from Luc
        Verhaegen). A somewhat saner PCI DMA transfer size check. Fix some
        typos. Bump patchlevel.

commit 3f23f9b99db5d62fac6ab0f1e61f32f23ba5021b
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 09:17:41 2006 +0000

    nothing from VIA or S3 in this

commit 2a9dbb2895c4ba78a6e7553fc0fb385f981b3d27
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 05:55:31 2006 +0000

    make max minor more rational

commit 92150972e5472cdf039c875dae4afee6613ee915
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 05:54:10 2006 +0000

    use drm_cards_limit instead of cards_limit

commit 781d96c61fdcc5bafe65053878d351100bf130e1
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 05:52:17 2006 +0000

    use common read/write routines

commit 8fef6fe4f02838447edbf6e99fd16df31a486772
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 05:43:04 2006 +0000

    sparse cleanups

commit bbcba83ef70013ea2e5daad86142d1fdc84939e4
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 05:39:19 2006 +0000

    The radeon DRM wasn't passing sparse checking in the kernel, this fixes it
        by adding a new kernel internal cmd buffer type, that has no userspace
        members, and passes it around.

commit dcbcc60864fbe592a949a1c250e1494e73504724
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 05:38:03 2006 +0000

    align spacing with kernel

commit 1ad5dfc369a4202d51fc471cd0050b299d1fab8b
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 05:22:50 2006 +0000

    whitespace cleanup/aligment with kernel

commit b2be72c44468f67e37e434a1e30b811963274f9c
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 03:44:23 2006 +0000

    some fixes from linux kernel

commit fb91c500bfee9777421be5706e0a3b3e5049d6de
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 03:32:03 2006 +0000

    complete fix for historic attribution

commit 1d86c36655f3c5821e62a24d4a320b5bc0e1be64
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 03:30:57 2006 +0000

    complete fix for attribution

commit 42cd50fa905aea4fcdbab9ce39a54551a9a1baa9
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 2 03:25:49 2006 +0000

    Realign via driver with changes in Linux kernel (mainly whitespace)

commit 26462b9aa47179e724e78f0b3b1c86fd07f61d8d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Dec 31 11:48:12 2005 +0000

    Initialize sv.drm_dd_minor to "don't care" along with dd_major, to appease
        valgrind.

commit 7f2c7f9977d3e62c594d47ca8a5d7fefac2fc4de
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Dec 30 02:17:05 2005 +0000

    Merge patch from jhb to catch up with FreeBSD-current vgapci master device
        changes.

commit 780e90e4a265532cf96c887267b80c691f016996
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Dec 29 00:17:51 2005 +0000

    add radeon card type get param so userspace can avoid walking PCI

commit b14d15ac41c0af5093e37a47124f0995e10c3016
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Dec 28 23:49:59 2005 +0000

    Add vblank support to i915 DRM..

commit 4c988520a851ed42c1dd9e9f7cda2e79f5a23fc7
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Dec 28 22:36:51 2005 +0000

    step back one reported bugs against that patch

commit 274fdf482ba5b33167213f76e6c17943ddf51985
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 16 08:02:17 2005 +0000

    fix radeon memory mapping from Ben Herrenschmidt

commit e7b0176584bc116faadcb59b7086a99e24651eb6
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 16 07:59:13 2005 +0000

    Lindent some via files

commit 2911edaed70b164c5886ee4f71df769c5e02e0c0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Dec 5 10:53:06 2005 +0000

    Remove driver.device_is_agp code duplicated in drm_device_find_capability,
        when it really wanted to live in drm_device_is_agp.

commit 0b4fdc81d15c1ff8acfe6fcdfcdd58a13fb3696e
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 5 01:11:20 2005 +0000

    add texrect support for r300

commit be16e93537d746365a43479de3a997af7969bb84
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 4 01:24:23 2005 +0000

    Fix from SuSE for issue with context creation failure

commit f5a9f27bf6c831f244bc27f82ed49f35d832178e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Dec 2 23:55:21 2005 +0000

    Add RV410 X700PRO PCI ID
    Submitted by: Adam K Kirchhoff <adamk@voicenet.com>

commit 20fcbae5ac86b2d10b23253245f5e88b78d2c76f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Dec 2 23:41:47 2005 +0000

    Finish the last bits necessary to get the i915 DRM port working on FreeBSD
    Submitted by: Alexey Popov <llp@iteranet.com>

commit 422002dc8434061729b1558ac846648041c46ab3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Dec 2 08:47:04 2005 +0000

    FreeBSD PR kern/85479: Restore the enabling of debugging by default by the
        DRM_DEBUG kernel option. It remains controlled by hw.dri.*.debug no
        matter what.

commit 7d735a8c9fde5fe4401067791926bdae16473587
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Nov 30 18:44:54 2005 +0000

    Bump package and DSO numbers to 2.0 to reflect 32/64 ABI change

commit f28dddb5515cb1c16f8c29e025195ea29d9f01d4
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Nov 30 03:51:46 2005 +0000

    Resync from Xorg head: conditional include of xorg-config.h

commit ea08b613bdc496b0e1aa3b723f8462d2c40ed8e5
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Nov 30 02:55:14 2005 +0000

    Resync from Xorg head (Bug #3815, GNU/kFreeBSD hack)

commit b3189730e7b0e574a28bd4947c407457cec4f7c8
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Nov 29 21:10:59 2005 +0000

    Add TODO based on my email from a while ago

commit 6941b375e86542d669366a45553ec536f9d98e48
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Nov 29 20:03:38 2005 +0000

    Remove redundant #ifdef stanza

commit 48198970ce449165fe1c7294108ca3afc775563d
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Nov 29 20:02:34 2005 +0000

    Error checking for drmStrdup (Tilman Sauerbeck)

commit 7ede209ce0cbbc65f79d02e2cc43cfcb3abb6e99
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Nov 29 09:50:47 2005 +0000

    fixup xf86drm.c for new headers

commit 0db80529d540fabd148275f8f9c999615153edbe
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Nov 29 09:46:27 2005 +0000

    Fix from Hugh Dickins for consistent mapping

commit 645e2d411d4cb79db307351169413004d8b5a2ea
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Nov 29 09:19:20 2005 +0000

    fixes from Egbert for 64bit

commit c6344e8df5a6f2010c691bcd8aed0241a3426585
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Nov 28 23:10:41 2005 +0000

    Assert an MIT copyright on sis_drm.h, since one was lacking and I created
        that particular file. Its contents have changed a good bit since the
        original sis code, and the original sis code didn't care much about
        attribution since it routinely disclaims Precision Insight/VA Linux
        from responsibility. Also, adjust formatting around license headers
        (have a comment open immediately before the "Copyright" line, not as a
        runon of any previous comments) for automatic processing into FreeBSD,
        where /*- is used to signal the beginning of license headers for
        automatic compilation of license lists.

commit ec0ef9a78d0205ff771fe05d78d7a67462abbfd2
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Nov 28 22:18:12 2005 +0000

    remove xf86drmCompat.*, unused since about XFree86 4.2.

commit 1835dff04a69509c0ea5fdb94abe0eaa61e7ab5a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Nov 28 21:15:46 2005 +0000

    Fix AGP support guessing: Implement the same bridge checking in the MGA
        driver as Linux uses, and actually use the driver's device_is_agp if
        available (hopefully fixing i915).

commit 0472ac5d117908a4ef612722960411c58e824999
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Mon Nov 28 17:33:01 2005 +0000

    fix mem leak in HashHash() (bug 5171)

commit a5747964ec29ece7cccb981330e073748f2fd447
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Nov 16 10:55:53 2005 +0000

    Fixed long standing 64-bit bug in via memory manager. Bumped via date and
        patchlevel.

commit c8261e3d2486050dcd76fb769f6806982260df96
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Nov 15 11:20:47 2005 +0000

    Loosen via dmablit alignment checks somewhat. Adapt stride check to maximum
        sceen size for EXA.

commit c575b7e19ec83e663af91b431ac8c0a9e16a3a5d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 15 09:22:09 2005 +0000

    Fix compiling and reenable build of i915 driver.

commit 19c5c56779250e5615a88e3581dc3bd89598b9be
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 15 04:37:51 2005 +0000

    Fix Savage DRI without ShadowStatus NO by allowing the shadow area to be
        mapped.

commit b5d71f63cdced53a8b492c3269e966088b8a3b45
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 12:23:18 2005 +0000

    enable i915 32/64 bit ioctls

commit 224ebd2c8d5916bdc782a60542ac04b86320a624
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 10:56:31 2005 +0000

    RV200 < R200

commit eff1b8fbdf7a4251998a75a93069c56f7fc1fd78
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 10:52:23 2005 +0000

    i810 should be fine with i810.. no idea what this crack is ..

commit 97528041dfaa26b95c1ff8c86e66f7071d5eb9f7
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 10:02:10 2005 +0000

    fix up radeon whitespace

commit cc1a4dd856a00a041d9321ca2dd6f996f90cfdd8
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Nov 11 09:36:58 2005 +0000

    Fix breakage from the move of driver ioctl externs to header files.

commit cd4a9ad8e2d7667ea5eff9f1f54c0aca68d40a9e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 09:21:05 2005 +0000

    whitespace align with kernel

commit 3eb577c7c52b560cc3fa9dcf5d5a02b8b3edcef7
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 09:20:34 2005 +0000

    mixing breaks in r128 driver.. fixed in kernel

commit 59924b2f409ac2e6d48c0903f858d208d30097e6
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 09:10:06 2005 +0000

    copy correct Kconfig

commit a204d5acb224eec2a9abcac73fb48f20819ea593
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 09:09:03 2005 +0000

    realign whitespace with kernel

commit cec83bf6d3fc42a83705e72b02dda0a3001ecaca
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 09:07:08 2005 +0000

    remove extra spaces

commit 36356df3cbca8e7e703afadf91046214d7755a07
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 08:59:57 2005 +0000

    A bunch of create_proc_dir_entry() calls creating directories had crept in
        since the last sweep; converted to proc_mkdir().
    From: Al Viro (via kernel)

commit ea07fefcbf6a07048bde6e25af6b891d51bd6f9e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 08:42:36 2005 +0000

    convert to use __set_current_state, align some header includes

commit 33fbf8b7e2a75237d9d8f4faa71d1776f8a6bbc3
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 08:07:11 2005 +0000

    whitespace align closer with kernel

commit 9a91674d453fab1fbddc6225f5aa4f7ff7484f91
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 11 07:45:46 2005 +0000

    cleanup ioctl/max_ioctl to use header file for extern symbols

commit b84daa8f326c1120728bb912cdf6a80524b0a8fa
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Nov 10 10:14:48 2005 +0000

    Fix cpu_to_le32 same as kernel not sure it is correct for ppc

commit fb22dfbfc1cf04bc5f54603a88c244ec018bced6
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Nov 10 10:13:25 2005 +0000

    cleanup / whitespace align with kernel

commit 6481a2e4cda67732ce7c6fe30aa4dc50d3cc7ed0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 8 21:40:03 2005 +0000

    Correct a LOR issue on FreeBSD by allocating temporary space and doing a
        single DRM_COPY_FROM_USER rather than DRM_VERIFYAREA_READ followed by
        tons of DRM_COPY_FROM_USER_UNCHECKED. I don't like the look of the
        temporary space allocation, but I like the simplification in the rest
        of the file. Tested with glxgears, tuxracer, and q3 on a savage4.

commit c7af46cf7d464ff89c64ab864fcd2af51d462812
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 8 21:36:54 2005 +0000

    Correct another LOR issue with resource allocation. This leaves the
        drm_get_resource_* resource allocation a little racy, but they're
        getting called at either X Server startup or driver load, so it's
        serialized anyway.

commit a10d8178e32528e0fd8a7afa24e71a35b1c0582d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 8 20:25:00 2005 +0000

    Initial port of savage to FreeBSD for the AGP and !ShadowStatus case. Adds
        drm_mtrr_{add,del} for handling the MTRR setup. Still has a LOR issue
        with DRM_VERIFYAREA_READ/DRM_COPY_FROM_USER_UNCHECKED in savage_bci.c
        -- this won't work with the fine-grained locking in use, and just doing
        a single copyin to a temporary will probably work fine. Also note that
        the module leaks approximately 4 kb on unload.

commit 2c6308fe54c10075379cb00506d5519e0ced1076
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 8 09:02:02 2005 +0000

    Correct a LOR on FreeBSD by allocating a temporary buffer and doing a
        single COPY_FROM_USER into it, rather than VERIFYAREA followed by many
        COPY_FROM_USER_UNCHECKEDs.

commit 4b2235d2e089a512b26ecd66ae42ea279fbb1df2
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 8 06:11:55 2005 +0000

    Correct a LOR related to the PCI resource allocations by simply moving the
        uninit to unload time rather than lastclose.

commit 71f9b7357cb3d4ea7bb5b396840de3985bc13ad4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 8 05:29:26 2005 +0000

    Fix FreeBSD DRM for latest MGA changes to agp support, which cleans things
        up a good bit, I think. Also, remove the agp_uninit() function which
        has lain around as a noop for years now. The FreeBSD DRM is now all
        compiling, with the exception of via. One known sleeping-with-lock-held
        issue remains.

commit 1a256df4804e4e987f81226a5d8e0573363607ee
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 8 02:38:01 2005 +0000

    Catch FreeBSD up to the pcie gart changes. Required minor modification to
        radeon_cp.c to use a drm_local_map_t-type mapping (drm_core_ioremap
        rather than drm_ioremap), which contains private device mapping
        information on BSD. I also changed the ati_pcigart interface to use
        "void *" for pointers to kva rather than "unsigned long". While PCIGART
        support appears to be broken on FreeBSD currently, I think this is not
        new, and BusType PCI remains working on my r100 in Linux.

commit 145b23b55220bdfc6639d3279ad96310faa650a3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Nov 8 01:12:08 2005 +0000

    Correct a recursion on non-recursive mutex in drm_addmap from radeon's
        firstopen, by making drm_addmap require the drm device lock to be held.
        Also, make matching of kernel maps match linux by requiring shm matches
        to have the contains_lock flag set if the offset doesn't match.

commit 3fce085e13d6559adaed98420c35a1313636cff5
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Nov 7 13:17:41 2005 +0000

    Fix bug #4908 for now. Alternative is highlighted in this bug report as the
        better future direction.

commit 900a7e4c364d86a10dcce535f0533dac7a7a97aa
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Nov 6 06:32:25 2005 +0000

    Re-disable the via driver while it's broken on BSD.

commit 39615ec06e8ca9280b4feefc42e008c9795541bd
Author: Ian Romanick <idr@us.ibm.com>
Date:   Thu Nov 3 00:38:25 2005 +0000

    Converts the remaining drm_agp_foo functions to be a drm_agp_foo and
        drm_agp_foo_ioctl pair. Modifies the MGA DRM to use the drm_agp_foo
        functions instead of the drm_foo_agp functions. The drm_foo_agp
        functions are no longer exported by drm.ko.
    Ensures that dma->seg_count and dma->page_count are properly set in
        drm_addbufs_{agp,sg,fb}. drm_addbufs_pci was already correct.
    Ensures that mga_do_agp_dma_bootstrap correctly sets agp_buffer_token.
    At this point PCI DMA is still broken.
    Xorg bug: #4797 Reviewed by: Dave Airlie, Eric Anholt Signed-off-by: Ian
        Romanick <idr@us.ibm.com>

commit 10ec05793f9b0ca47ce0a07aa445f8799d2ceba1
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Oct 31 17:48:11 2005 +0000

    Bump to 1.0.5 for new via header

commit bcbf5ff797f061e84223556bdcf5f6a045516355
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Oct 23 04:07:50 2005 +0000

    we don't use this stuff anymore .. remove 1k buffer from driver ..

commit b63b771285a91e85c2dc7daf77191c423fb4d2a5
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sat Oct 22 15:12:05 2005 +0000

    via: Sync via_drm.h with 3D driver. Bump via patchlevel and date.

commit 79f30e79ec5b05b2052988e3e6edba8624e3d1c5
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Oct 22 05:50:22 2005 +0000

    Bug #328: Silence read-from-uninitialized warnings in DRM_CAS on Alpha.
        (David Dawes)

commit 00d4957d62607873c2bf0c506fab4ff6c384b414
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Oct 21 08:59:56 2005 +0000

    Don't set MTRR's for intel hardware

commit 6cd0282f6440fac661dd92a6e96e4fd82e4489b4
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Oct 20 22:41:26 2005 +0000

    fix G550 cards

commit 419fc9930b5145e61c5b77c6e8f76c40af62fbc4
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Oct 20 17:55:02 2005 +0000

    Bump to 1.0.4.

commit d74376779f0b421478072fa7657d4f31a5e16c12
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Oct 20 17:53:02 2005 +0000

    Remove the remaining references to Xlib. libdrm is totally independent now.

commit ea83db57e3625d54ee206561803a966d074d8296
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Oct 20 17:51:57 2005 +0000

    via and r300 still need installed reg headers.

commit cf8ce0888acf34afb5705faf1b6cb8d2f2945402
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Thu Oct 20 17:37:32 2005 +0000

    via: PCI DMA bugfixes and DOS due to too many mapped pages checks.

commit b3631ba02cc55e0f4a4212d7075de62689bd1f43
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Oct 20 17:32:31 2005 +0000

    Remove bogus Xlib dependency.

commit 763d726c439537ad3f8b1b668cf55b799a6f36db
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Oct 20 02:35:08 2005 +0000

    dma access also needs some work

commit 727e88c4f4e55be435e47759bb3b1e75fc42d43d
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Oct 20 01:54:38 2005 +0000

    the old init path needs to set WAGP_ENABLE by default

commit 4b3ee6c50ed8b9382d3f253669470a5c82e8f0bc
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri Oct 14 05:01:19 2005 +0000

    Doig a full clean up from mga_do_dma_bootstrap when
        mga_do_agp_dma_bootstrap fails causes problems if
        mga_do_pci_dma_bootstrap succeeds. This commit makes it possible to do
        a "minimal" clean up instead. I'm still trying to figure out what is
        causing the failures in mga_do_agp_dma_bootstrap...
    Signed-off-by: Ian Romanick <idr@us.ibm.com>

commit 1505e316afc68da0167c1d2db1a862ac580c65f1
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri Oct 14 01:25:38 2005 +0000

    Fixed a cut-and-paste bug that could cause an oops in mga_do_cleanup_dma
        when mga_do_init_dma fails. Still trying to determine why
        mga_do_init_dma is failing.
    Signed-off-by: Ian Romanick <idr@us.ibm.com>

commit 725e329cb2aa93812e3e622a6cf2c92c0fffde9d
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Oct 13 21:03:31 2005 +0000

    Better pkgconfig-fu: -ldrm in Libs:

commit 0a24095cd6dff3f4934c87feb34cee4f0350c07d
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Oct 13 11:21:31 2005 +0000

    Add X300 RV370

commit 308b40ea094d89660c25bf1dc16d70f5d3cc66c2
Author: Ian Romanick <idr@us.ibm.com>
Date:   Tue Oct 11 17:34:49 2005 +0000

    The Linux 2.6.9 (and earlier) fops structure does not contain a
        .compat_ioctl field. This change makes the DRM build on those kernels.
    Signed-off-by: Ian Romanick <idr@us.ibm.com>

commit 62a467303408286deef97b288ec286e21dda3761
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Oct 6 23:31:29 2005 +0000

    Skeleton nv drm driver, to enable DMA in EXA. (Lars Knoll, minor updates by
        me)

commit 908ad0ed96c6d1be567bff7332ec38d6b4b8db0a
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Oct 6 23:08:58 2005 +0000

    remove version not used anymore

commit ace8b912fbeaae9195892762a375f0ae1fbf558f
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 30 09:09:03 2005 +0000

    fix header this is now a c file

commit 483dc9bb9298588ccd3521c8f95a8032939fbd08
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 30 07:10:16 2005 +0000

    now I've lindented kernel it might be useful again

commit f42cdc8dcb4ae85c15580dd0bc2a07495d8f049e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 30 06:41:10 2005 +0000

    Add support to turn writeback off via radeon module option

commit 6ff57e2d7cd0b9b513070f72ffd894e8d6f57149
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 30 06:35:09 2005 +0000

    fix pci overriding from userspace

commit 856bdf0f673510c33a23b4c4d4fff91d95eb149e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 30 03:39:02 2005 +0000

    fixup bens fix so it works..

commit 68b4ad3cce6e184549988d48e85985507c8dc5ed
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 30 03:14:18 2005 +0000

    Add Bens fix for radeon maps on ppc

commit 9d24d951f7894aacf589892b5a6848d9961339b1
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sun Sep 25 14:38:07 2005 +0000

    via: fix stray error printout message.

commit 903e5701ffbc613373f3ad3c3b7e14d493ec9dbe
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sun Sep 25 12:54:12 2005 +0000

    Add the via PCI DMA blit code.

commit d4dec1db808095f42b6fd776b2582c6f27bebb9a
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 25 08:54:31 2005 +0000

    hopefully fix server recycling on PCIE

commit c1b7df95be1194efcfd0d9ffd63da1ce27272565
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 25 05:19:06 2005 +0000

    add __ATTR

commit 3a0230ef9c933e07246e65a542681fc9549514f8
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 25 03:09:51 2005 +0000

    use linux kernel macros don't make our own

commit cd16d9685678dbb7e3d1442e62357d0b5bb98008
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 18 09:31:06 2005 +0000

    remove pci_find_class use for alpha

commit f5c81b262020200d4b7970d12b6c202ae0f8faee
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 17 04:16:51 2005 +0000

    compat for pci_pretty_name

commit acb6abcc6d862224f3e91ede82909c099efdfb1f
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 12 06:21:24 2005 +0000

    update autogen from xserver tree

commit 4b2a94db46dc4814e03d14e25ab0aed41e28a375
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Sep 12 05:35:51 2005 +0000

    Fix the spelling of DRM_AUTH so that the bsd core stuff builds again. Next
        up is pcigart.

commit f1276d3b4338bdfd2173bb76e931334da6075784
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 12 04:37:52 2005 +0000

    add some pci express chips

commit ba8f4fb778e88dfa275e35f0d2e01e4ca99e65bd
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 12 04:35:31 2005 +0000

    make PCI Express work on 64-bit machines, thanks to Alex Deucher (agd5f)

commit 3f6fcbc6766e3032bfb0421675169cc2e732e399
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 11 09:58:19 2005 +0000

    back out change as gart is now in framebuffer for PCIE

commit 5565a00916122bb131ce89a2ca8f7f81ddc9387c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 11 08:51:23 2005 +0000

    Add GART in FB support for ati pcigart, and PCIE support for r300

commit 29326c1a8990ffb512a891d8deecf4cd4046915c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 11 07:08:46 2005 +0000

    fix makefile bug

commit 53c8037786a64eede00a8944ccaa42768609b66b
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Fri Sep 9 22:35:49 2005 +0000

    Add support for GL_ATI_fragment_shader, new packets R200_EMIT_PP_AFS_0/1,
        R200_EMIT_PP_TXCTLALL_0-5 (replaces R200_EMIT_PP_TXFILTER_0-5, 2 more
        regs) and R200_EMIT_ATF_TFACTOR (replaces R200_EMIT_TFACTOR_0 (8 consts
        instead of 6)

commit c8b5a9f8cc3f55faf135be70e7ff0f7f062ca408
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Fri Sep 9 12:53:44 2005 +0000

    Add another R300 PCI id. Submitted by: Daniel EstÃ©vez

commit 0d346a07a87ef7bf6b77adda7c776e2ac5849266
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 3 03:27:14 2005 +0000

    convert ioctl flags to use flags instead of separate ints

commit 80ed93c7bf9f8c8d42cbcc26e82020cfcd92fb77
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 3 02:21:22 2005 +0000

    check is the map containing the lock

commit 22ec8ebb17d959486e4a865b17115e609eb688ee
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 26 23:27:19 2005 +0000

    - Don't try to allocate mappings of less than a PAGE_SIZE in MGA DMA code.
    - Comment out the "is this mapping/bufs in allocated AGP" bits in BSD
        because they break mga (which uses AGP allocation that doesn't track
        entries). It's not a security issue when we still have the related
        ioctls marked root-only.
    - Apply some power-of-two alignment restrictions to hopefully avoid some
        panicing in bad cases of drm_pci_alloc() on FreeBSD.
    - Add verbosity to some error handling that I found useful while debugging.

commit c425ad1a34439d019edd589c32a7161d01b4d822
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 26 20:56:11 2005 +0000

    Previously, drm_get_resource_start() and drm_get_resource_len() would
        allocate the resource RF_ACTIVE, pull out the appropriate value, and
        return it. However, allocating large framebuffers RF_ACTIVE would run
        the system out of KVA, and this also left open the possibility of the
        resource getting moved after getting the offset. Instead, when either
        of these are called, allocate the resource if it isn't allocated
        already (non-RF_ACTIVE) and store it in the DRM device, to be cleaned
        up on lastclose.

commit 5105f9ea59179c7129d3bf97734eb37e26ec68b0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 26 19:07:03 2005 +0000

    Fix a lack of parenthesis in macro usage that showed up with INVARIANTS
        turned on, i.e. in a kernel build.

commit 55bea952b326b88f2fa6502321f605f96ee9be66
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 26 00:16:01 2005 +0000

    [1] Fix BSD DRM for the nonroot changes. [2] Don't attempt to acquire the
        DMA lock in a non-DMA driver, as it will be uninitialized.
    Submitted by: [1] jkim (minor changes by me)

commit 9942cad1f6078c24bb69a126795635b2f34d65b5
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Aug 25 23:11:28 2005 +0000

    Add missing .cvsignore files for autotoolery.

commit 7d5130d8fb24538e555689fb8e98f767406e0a2c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Aug 25 02:59:21 2005 +0000

    Include appropriate CFLAGS to find X headers, needed to build libdrm.

commit 5a52e533e1f42072b91544fdbca785ed2c9ad76b
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 23 04:10:50 2005 +0000

    add options for x86_64 and amd will small letters

commit 1163975f090725a0f2cddb313cc23d7e424f766f
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Aug 22 09:52:18 2005 +0000

    remove the README in the linux-2.6 directory

commit 01e4364a8fec6cb2c11de4e5cb7def10b58348ae
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Aug 22 09:50:12 2005 +0000

    remove i915_pm code as it causes too many issues with current software
        suspend, and the DDX driver re-inits the board successfully anyway.

commit 54947504ac70e135a38f303420b7b66eed8c23a3
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 21 11:07:03 2005 +0000

    allocating the PCIE table from GFP_DMA seems to stop it NMI'ing

commit e2dc70593f0d12cecac747c9044c6fb130ad6af8
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 21 03:04:32 2005 +0000

    We don't need to install all the internal headers files only drm.h and
        *_drm.h have user space interfaces

commit 5c4ce6d93c93032dad7f5a60f8b7867980d3f7f5
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 20 07:38:11 2005 +0000

    add x86_64 to the list as well

commit d12768f79ac2dbf9e31a32107f6e5379cb9484e4
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 20 07:33:07 2005 +0000

    remove checks that make ppc64 not work properly... also fix ppc64 check..
        we should be safe doing this..

commit 2e9bd9ac18e17e91bec4e3b777503a53a3faf952
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 20 07:12:45 2005 +0000

    add powerpc64 to the list of archs that this test doesn't make sense on

commit 017174085f162484277b2f798d35d3436a26e005
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Aug 20 03:32:09 2005 +0000

    Fix silly install issue by moving the header install rules for shared-core
        into shared-core/Makefile.am. Bump to 1.0.3.

commit 1abd165f5bd627a6eebf333135d5a1b5a32d7aa3
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Aug 19 20:14:10 2005 +0000

    Add r300_reg.h. Bump to 1.0.2.

commit 8ac2fcb193c79ea8b2bd4d99b595d56f557c15f3
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Aug 17 22:59:00 2005 +0000

    add agp buffer token

commit 7779659390afc5608655e617aa3f2c88b7e071c5
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Aug 17 10:48:38 2005 +0000

    revert reversion of a part of a patch from Jon, that I did last night while
        checking things in in my sleep

commit 279e7c113ced4f2f4dcc14801aa3084698a417bd
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Aug 17 00:14:18 2005 +0000

    commit toggle switch to make Linux drm_handle_t unsigned int

commit 91c9c847299a1f27c92f8663902fcee72a65f9e4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 16 17:20:18 2005 +0000

    Remove the long-stale BSD non-core bits.
    Prodded by: CVS breakage resulting in complaints about this directory.

commit 7af0186f4ccef285c2158770781ebfc3a26ddd66
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 16 12:51:57 2005 +0000

    add Egberts 32/64 bit patch (its in kernel already...)

commit 8c21b783c3e38aa2c2d16e11ec01cf695f8e7f8a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Aug 15 18:07:12 2005 +0000

    Port the VIA DRM to FreeBSD. Original patch by Jake, with some cleanup by
        me to match other drivers and avoid ifdeffing. The linux via_drv.c will
        be moved from shared-core to linux-core soon by repocopy.
    Submitted by: Jake Burkholder <jake@FreeBSD.org> Tested by: unichrome

commit 4f5961eeeee806a2d6e08e159c56262d4f060cba
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sun Aug 14 09:52:09 2005 +0000

    VIA bugvixes by Joris van Rantwijk Initial commit.

commit 4050f5066a706bda74ed93ab858bbc9fc0b1477b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 12 17:18:08 2005 +0000

    Fix build after linux-side checkin of master/root-only split. Still only
        cares about root on the BSD side, but should be secure.

commit cdf49e57329803709fe26cbc103c318bc9292ddb
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Aug 12 14:19:33 2005 +0000

    Reverting the previous via security-fix commit, since the assumption of
        contexts registered with the callers filp was wrong.

commit 4931d785ed0bf9f75200ed530c4061efe2d24a63
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Thu Aug 11 13:05:12 2005 +0000

    Missing symbol export from previous via context check commit.

commit d5e8ab13ff5399531eb1927dcd4535aeeed18c94
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Aug 10 19:46:46 2005 +0000

    Security fix on via: Checking that the specified context belongs to the
        caller on fb / agp memory alloc and free. Otherwise malicious clients
        can register allocations on other clients or free memory used by other
        clients which will lead to severe memory manager inconsistensies.

commit 0d81954b0e4430428eddc00c6097e614e51ba0b1
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Aug 9 01:40:45 2005 +0000

    Make sure savage has 3rd ioctl parameter

commit 3a61e9f96ce50101f05a5ca2cb0e34b2aa001b55
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 7 05:37:25 2005 +0000

    make some functions static in the savage drm driver

commit 1cbe97eea1a7ffcbf19767e83dce09da56c454f6
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 7 05:32:06 2005 +0000

    fix ioctl in r128 drm direction from Egbert Eich.

commit fcdb53867df4937a55e4a771328fa5a9388aee44
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 7 04:38:11 2005 +0000

    remove bus address

commit 99c3f88c69e5a9ac7cddd0bb24e8be3415616656
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 5 13:04:21 2005 +0000

    Fix bug in return to userspace resctx code
    From: Egbert Eich <eich@suse.de>

commit c789ea1521ac9e935f2a1c6c043619d89bae9c16
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 5 03:50:23 2005 +0000

    Rename the driver hooks in the DRM to something a little more
        understandable: preinit -> load postinit -> (removed) presetup ->
        firstopen postsetup -> (removed) open_helper -> open prerelease ->
        preclose free_filp_priv -> postclose pretakedown -> lastclose
        postcleanup -> unload release -> reclaim_buffers_locked version ->
        (removed)
    postinit and version were replaced with generic code in the Linux DRM
        (drivers now set their version numbers and description in the driver
        structure, like on BSD). postsetup wasn't used at all. Fixes the savage
        hooks for initializing and tearing down mappings at the right times.
        Testing involved at least starting X, running glxgears, killing
        glxgears, exiting X, and repeating.
    Tested on: FreeBSD (g200, g400, r200, r128) Linux (r200, savage4)

commit 143622a987745ca2084f7a188e9993ffd5f28fe3
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Aug 4 14:48:43 2005 +0000

    Implement permanent sarea maps

commit 28e123eb3af21b1ea73bdc2176220bb669118e09
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Aug 4 14:39:25 2005 +0000

    Tighten up AGP security. Verify that all uses of AGP are done inside
        buffers that have been allocated from AGP. This includes some new
        capable(CAP_SYS_ADMIN) checks, these functions are also protected by
        the root requirement on the IOCTL macros.

commit bb9502ab01e7258c021f161b3caac8a508979dd8
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Aug 4 13:59:48 2005 +0000

    Mark some radeon init variables deprecated. These used to be passed in but
        the driver already knew their correct value. For example the physical
        address of the framebuffer and registers.

commit ea2c7a895d6456c83ee8489e1db7ae5a800f0abf
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Aug 4 13:15:27 2005 +0000

    Split the control of master vs root priv. Everything is still marked as
        needing root.

commit 3ffd0c188bc35263f0b53345a0a4a261f4ae1b71
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Aug 4 07:46:11 2005 +0000

    Whitespace fixups.

commit b0da5df90a76e4e79c356fdbc90211a8e21f095c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Aug 4 07:42:01 2005 +0000

    Fix the MGA driver on BSD by passing in the proper chipset flags to the
        driver's preinit routine, and by using DRM_COPY_TO_USER_IOCTL when
        copying out to an ioctl's data pointer. Pulled from the latest version
        of my drm-hook-rename.diff and only compile-tested after that.

commit 49bbb6d86178890a03040d618a8c9c76c96d3d3f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Aug 4 07:31:21 2005 +0000

    Add a debugging error message from testing new MGA code on BSD.

commit 40515fc93c479599f32485630b4063422106358f
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Aug 1 20:36:58 2005 +0000

    version bump

commit 8b4691ee13cc30893f694103e8a90c33655e5cf1
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Aug 1 20:31:35 2005 +0000

    Fix the pkgconfig info. (Donnie Berkholz)

commit 1cc1f49825e7fc157f8cfecfb4c5168056f5f738
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Jul 28 01:44:17 2005 +0000

    Fix issues with buffer aging when more than one dma buffer is discarded in
        a cmdbuf, which could lead to hangs.
    Submitted by: Aapo Tahkola

commit 942545721f9bf14941f7e2ed81c79c4f0709749a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jul 27 20:20:30 2005 +0000

    Correct a couple of descriptions of files in comments (were just
        copy'n'pasted).
    Submitted by: jkim

commit fccd351c8f17f69dd4ce986f0a626b42bbcb4ef0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jul 27 20:19:29 2005 +0000

    Link in the savage files from shared-core.
    Submitted by: jkim

commit 096e0349eaa56f1941edddf10ab3915b785d8281
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Jul 27 18:19:11 2005 +0000

    fix driver date and drm minor version for r300 support

commit ab59dd285c4ccdec92adadfcb869fc83edd96e86
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jul 20 21:17:47 2005 +0000

    Add latest r300 support from r300.sf.net CVS. Patch submitted by volodya,
        with BSD fix from jkim and the r300_reg.h license from Nicolai Haehnle.
        Big thanks to everyone involved!

commit 026e12ea937865748d54d3b8a7a3b77ccc4e3efb
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Jul 19 20:59:57 2005 +0000

    Add .cvsignore file.

commit d3d3184fe4b2fa72ed55813bd7eac72659f2375e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 16 03:11:53 2005 +0000

    revert last change due to me bring up too early

commit 9803eb179c8edd8d62b038f550c63a4aa589615e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 16 02:07:14 2005 +0000

    up the version

commit d6d67dbf92d64a4c662dcad52d720883da9d5e19
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 16 02:03:03 2005 +0000

    Egbert noticed this issue, but changing the IOW to IOWR mess up
        compatiblity with userspace..

commit 567113788c030b367a28ea9253fbf34beef2789e
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Jul 15 21:22:51 2005 +0000

    VIA: Fix sparse warnings (Alexey Dobriyan)

commit 5a5478de7ab4ee2eef0308d8b4ce5c53222cd55e
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Jul 13 00:13:12 2005 +0000

    distcheck fixes

commit 7130662aa0c476a56a4a053c6dda19bc3a91060a
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Mon Jul 11 18:27:39 2005 +0000

    IRQ must be assigned and enabled or this will hang

commit 07d23f9c60f9358f064eab7d944f3b28484b51ef
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Jul 10 22:42:42 2005 +0000

    autoconfiscate libdrm

commit 04fea060023a539c6c6766ec184b59f32c97d474
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Jul 3 18:07:03 2005 +0000

    Simplify the sysfs code

commit d41af11ee30413f90064cfffb5687be92a28021c
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Jul 3 17:16:12 2005 +0000

    Add sysfs attribute dri_library_name on Linux. code in share-core/via_drv.c
        is ok to be shared, it will be passive on BSD.

commit e2ba08d28335b43515ccbefcc21052ed0d5a7e47
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Jun 30 16:00:35 2005 +0000

    release can happen before dev->ctxlist is allocated

commit 1b4ce02506afa65494956468afb0eb7f93b74fbc
Author: Ian Romanick <idr@us.ibm.com>
Date:   Wed Jun 29 23:20:30 2005 +0000

    Remove the AGP requirement from Makefile and Kconfig for MGA. Remove the
        AGP requirement from Kconfig for SIS. There never was a requirement in
        Makefile, and Eric Anholt confirms that the Makefile was correct.

commit eeaeefca54b2f8299fbe8f99b5ca71e695430ba7
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Jun 29 13:19:47 2005 +0000

    add remaining calls

commit fc83d76e5a5ce2700d2b95aa177d3eec57dc1bec
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Jun 29 13:13:22 2005 +0000

    add i915_ioc32.c

commit 6496c5d1e74532d8208774653a3a2a477d7fc50c
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Jun 29 13:00:29 2005 +0000

    silence warning

commit 6975571c3b740e3a3813058a856fc6bd8b7fbd14
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jun 29 12:02:18 2005 +0000

    fix some warnings from cross compiler

commit 62b55eb433a211c565367b8ae717666e0acaf8fe
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jun 29 11:56:42 2005 +0000

    make r128/mga compile properly on sparc cross-compiler

commit 2b427bee9bb4de9dba6ab96b68c66d22144669a5
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Jun 29 11:36:37 2005 +0000

    Move to linux specific directory

commit 964c57e71f641da854636c3f9549ef8cc2f5a143
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jun 29 11:22:39 2005 +0000

    add mga and r128 32/64 bits
    This is Egberts code, ported to Pauls framework by me..

commit ae7d8d8a85a4465fe641d28a7f5d8d64146f8d97
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jun 29 03:06:47 2005 +0000

    these don't need reclaim buffers their release functions handle it

commit 2ce5ddec833195bc17c8ed062ce622460ffe0d6a
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jun 29 02:57:18 2005 +0000

    Bug in conversion from old DRM to core DRM....

commit c798a382f1e11a0fd60a78924db0663f8e988a1b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 29 02:54:19 2005 +0000

    Get the BSD DRM compiling again after MGA and mapping changes. Note that
        i915 has been disabled for the moment, rather than working around
        linux-specific code in the shared dir.

commit 5d96c74ff1fe9b2d37e22dbea9882791aae389bf
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Jun 28 20:58:34 2005 +0000

    - Remove drm_initmap and replace its usage with drm_addmap. This reduces
        code duplication, and it also hands you the map pointer so you don't
        need to re-find it.
    - Remove the permanent maps flag. Instead, for register and framebuffer
        maps, we always check whether there's already a map of that type and
        offset around. Move the Radeon map initialization into presetup (first
        open) so it happens again after every takedown.
    - Remove the split cleanup of maps between driver takedown (last close) and
        cleanup (module unload). Instead, always tear down maps on takedown,
        and drivers can recreate them on first open.
    - Make MGA always use addmap, instead of allocating consistent memory in
        the PCI case and then faking up a map for it, which accomplished nearly
        the same thing, in a different order. Note that the maps are exposed to
        the user again: we may want to expose a flag to avoid this, but it's
        not a security concern, and saves us a lot of code.
    - Remove rmmaps in the MGA driver. Since the function is only called during
        takedown anyway, we can let them die a natural death.
    - Make removal of maps happen in one function, which is called by both
        drm_takedown and drm_rmmap_ioctl.
    Reviewed by: idr (previous revision) Tested on: mga (old/new/pci dma),
        radeon, savage

commit 6397722f1990856a9ee268cadd65d78b44b24835
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jun 28 13:02:20 2005 +0000

    add compat code from Paul Mackerras

commit 827806f697855c65a8c9821ad410467c48e25d35
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jun 28 12:52:41 2005 +0000

    Add compat to Makefile

commit 170bf94a367935046d72f7d2a21872bb88543a04
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jun 28 12:50:15 2005 +0000

    Add drm and radeon 32/64-bit compat code from Paul Mackerras

commit b6b270a2607088997a0ec74cb1d618f140a382f7
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Jun 28 08:03:33 2005 +0000

    Given that BenH says using the sysdev approach for DRM is bogus, I'll yank
        the code for it, rather than introducing something that isn't going to
        work 100% of the time.

commit 75ba453365380851d3297a9d553302021af923b2
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Jun 28 07:34:49 2005 +0000

    Comment out the .resume function as without programming their dependent
        registers things tend to lock up in certain situations.
    The BIOS repost will fix things up.

commit e2d76b0642d88c4f47ace52ee5eb3163c4e478d5
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jun 27 15:17:12 2005 +0000

    Reverse the pm_message_t patch for now, it appears that the 2.6.12 release
        didn't have it.

commit 1a6780348c9e61833ca240ce6fb80aaa6e75fb92
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jun 27 12:39:02 2005 +0000

    Check for 2.6.12 suspend/resume changes (pm_message_t)

commit fa24ccccf4beeef41d8de23a345408b7b047ae3f
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jun 27 11:41:40 2005 +0000

    Check dev_priv

commit d6af2016635ced096812030547a930433e9382eb
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jun 27 11:39:44 2005 +0000

    Save state of registers for suspend/resume.

commit afdabdabf588267c8c8d4f1378a8e9824d58d2d0
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Jun 26 13:31:15 2005 +0000

    removed dev->sysdev_registered

commit 9deb276a0680a79540f05c1547a9d703e9c08190
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Jun 24 22:48:16 2005 +0000

    Ref count the sysdev class to support multiple DRM cards

commit 2b845f25c5c3a36ed6e49b9145e38a4738ce2572
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Jun 24 21:50:40 2005 +0000

    Make sysdev class only register when fbdev detected

commit 5b0e93de32e9da390702df13d95ab63274294233
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Jun 24 19:31:06 2005 +0000

    More err path clean up for drm_pm Add mandatory sysdev shutdown function

commit fe42d43a63d95243fa911f88bb01c383d5e6716e
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Jun 24 09:28:50 2005 +0000

    Fix the sysdev approach for power management.
    We need to use the container_of() call to access our device private.

commit cdc50eba6ac666447a93471fb2db25959f9c2775
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Jun 24 08:56:12 2005 +0000

    Fix suspend problem when i915 private hasn't been initialized yet.

commit 7586a655fc7d8e89a4fe37ec7926f4fbc13f358d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Jun 23 05:29:16 2005 +0000

    Fix drm_memory_debug.c to compile, doesn't seem to be working Clean up
        error return path in drm_stub.c

commit 4152605ea174291f469c0c8a6fc433fd90194e71
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Jun 22 05:49:56 2005 +0000

    Get the power management hooks into the right place so that everything gets
        freed correctly.

commit 9fb77e869f530f3c9679dd63db07514e2f45efc7
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Jun 21 02:20:02 2005 +0000

    Change initialization of savage register access to _DRM_READ_ONLY. Flags of
        zero does not mean no privs, instead it grants write access
        _DRM_READ_ONLY only applies to non-root users. Problem is only in CVS,
        initmaps are not in the kernel yet.

commit 298b6fcedbc3a521c2218404a96de0754dbb4f02
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Mon Jun 20 15:40:48 2005 +0000

    Change initialization of radeon register access to _DRM_READ_ONLY. Flags of
        zero does not mean no privs, instead it grants write access
        _DRM_READ_ONLY only applies to non-root users. Problem is only in CVS,
        initmaps are not in the kernel yet.

commit ae2264d3c9a4938b1202c4301587c7214c2c4293
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Jun 19 04:15:58 2005 +0000

    Remove I2C support from radeon driver. Same support is available from
        radeonfb.

commit 71df0eed3476d4430a59ce21ca641ac8eecf54e2
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jun 17 09:09:17 2005 +0000

    fix up drm_alloc_agp to take a dev arg and not pass crappy agpgart around

commit 0569fe7a528e5e0753d9f72807a8f4310c6c9782
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Jun 17 04:47:30 2005 +0000

    Fix 810/830 build

commit 53e950b344d84a98fda4cff6d03b90651a625f18
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Jun 16 19:58:00 2005 +0000

    Force AGP always for Intel chipsets.
    Fixes bug #3552

commit 1567753415d420c626ae145457539bfee1414df8
Author: Ian Romanick <idr@us.ibm.com>
Date:   Wed Jun 15 17:47:33 2005 +0000

    Re-sync (and correct!) shared/mga_drm.h with shared-core/mga_drm.h.

commit 72cfc797b51e59ecf8a2787c6a176838241cc94b
Author: Ian Romanick <idr@us.ibm.com>
Date:   Tue Jun 14 22:34:11 2005 +0000

    Adds support for PCI cards to MGA DRM
    This patch adds serveral new ioctls and a new query to get_param query to
        support PCI MGA cards.
    Two ioctls were added to implement interrupt based waiting. With this
        change, the client-side driver no longer needs to map the primary DMA
        region or the MMIO region. Previously, end-of-frame waiting was done by
        busy waiting in the client-side driver until one of the MMIO registers
        (the current DMA pointer) matched a pointer to the end of primary DMA
        space. By using interrupts, the busy waiting and the extra mappings are
        removed.
    A third ioctl was added to bootstrap DMA. This ioctl, which is used by the
        X-server, moves a *LOT* of code from the X-server into the kernel. This
        allows the kernel to do whatever needs to be done to setup DMA buffers.
        The entire process and the locations of the buffers are hidden from
        user-mode.
    Additionally, a get_param query was added to differentiate between G4x0
        cards and G550 cards. A gap was left in the numbering sequence so that,
        if needed, G450 cards could be distinguished from G400 cards. According
        to Ville SyrjÃ¤lÃ¤, the G4x0 cards and the G550 cards handle
        anisotropic filtering differently. This seems the most compatible way
        to let the client-side driver know which card it's own. Doing this very
        small change now eliminates the need to bump the DRM minor version
        twice.
    http://marc.theaimsgroup.com/?l=dri-devel&m=106625815319773&w=2
    A number of ioctl handlers in linux-core were also modified so that they
        could be called in-kernel. In these cases, the in-kernel callable
        version kept the existing name (e.g., drm_agp_acquire) and the ioctl
        handler added _ioctl to the name (e.g., drm_agp_acquire_ioctl).
    This patch also replaces the drm_agp_do_release function with
        drm_agp_release. drm_agp_release (drm_core_agp_release in the previous
        patch) is very similar to drm_agp_do_release, and I saw no reason to
        have both.
    This commit *breaks the build* on BSD. Eric said that he would make the
        required updates to the BSD side soon.
    Xorg bug: 3259 Reviewed by: Eric Anholt

commit 3585bdf7d81a92c729bb5bcbc7cfca6048d640ce
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 11 10:08:39 2005 +0000

    fix up drm.h for C++ include as this can be included in user programs

commit f4aa8ab715cdb2382609f51dda4d832de417894a
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jun 10 01:21:23 2005 +0000

    add dragonfly #define from Xorg CVS

commit 28759fd872842c41f38edaf77a140a798609dd20
Author: Ian Romanick <idr@us.ibm.com>
Date:   Thu Jun 9 21:24:34 2005 +0000

    Synchronize with the shared-core version.

commit dfc650bd80da28b430b65cd26a1bf418074e2086
Author: Ian Romanick <idr@us.ibm.com>
Date:   Thu Jun 9 21:18:56 2005 +0000

    Completely re-initialize DMA settings
    There were two problems. First, the 'warp' and 'primary' pointers weren't
        cleared, so mga_do_cleanup_dma, which gets called multiple times, would
        try to ioremapfree them multiple times. This resulted in the new error
        messages to syslog. The second problem was the, since the dev_private
        structure isn't reallocated and cleaned out in mga_do_init_dma, when
        the server is reloaded idle-waits would wait for impossible values.
    I have given this patch some more riggorous testing. This includes:
    - Load module, start server, run GL app, stop server, unload module.
    - Load module, start server, run GL app, stop server, unload module, reload
        module, restart server, run GL app.
    - Load module, start server, run GL app, stop server, restart server, run
        GL app, stop server, unload module.
    In all three cases, everything worked as expected. Please let me know if
        there are any further regressions with this patch.
    Xorg bug: 3408 Reported by: Chris Rankin

commit 1252890ff1d62544a250560f0c2985454bf888b5
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Jun 9 13:22:12 2005 +0000

    drm_mem_init should be done at core load, not driver init

commit 9f2f010763170890c69e1d2f9dd1f550db0400b1
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jun 6 11:35:43 2005 +0000

    fix some issues with radeon interrupt handling
    From: Dave Airlie + Benjamin Herrenschmidt

commit 246c617c87a5407f0bb8375e217443fc38aee405
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jun 6 09:18:44 2005 +0000

    Fix copyrights

commit 751765dba5b15f431a12308e09237d895c65e471
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Jun 6 06:45:41 2005 +0000

    Add a few more bits of Tonnerre's NetBSD port (Still need to deal with the
        device attachment).

commit 805a07714f05833a1ed4e4a01f8086fafd46e849
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 4 06:18:11 2005 +0000

    misc cleanup patch from Adrian Bunk

commit 83cb1504498ad2ca327bc8341bc21ed6cdb54756
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 4 06:14:58 2005 +0000

    Remove warnings about code mixed with declerations..

commit 1d678a518ee97fef3a3f9816cddf199ad7e37509
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri Jun 3 22:53:32 2005 +0000

    Minor clean-ups. The drm_mga_fullscreen_t stuff has been dead for a looong
        time. Remove it and an out-dated comment.

commit 8e7c130ef71b6300a99f6404d23e7ff8646066be
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri Jun 3 22:45:21 2005 +0000

    Move the deallocation of dev_private. Since dev_private is allocated when
        the driver is loaded and is always expected to be around, it should
        only be deallocated when the driver is unloaded.
    Xorg bug: #3408 Reported by: Chris Rankin

commit 9cad6fb4e043ba6140d4c61f09ca0cf0ba8d18c0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat May 28 20:36:22 2005 +0000

    Bugzilla #3217: Create a new __drm_pci_free which is used internally in
        linux-core to free pci memory without freeing the structure. Linux-core
        internals often create pci dma handle structures on the stack due to
        the lack of a drm_local_map_t to store them in properly. Fix the
        original drm_pci_free to actually free the dma handle structure instead
        of leaking it.
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>

commit d7756397d695e5573647258f8412e9ecfb2645d4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat May 28 20:25:04 2005 +0000

    Bugzilla #3217: The size field in the new dma handle structure was
        uninitialized, and its use in drm_pci_free later resulted in panics.
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>

commit 54fbf85125ef231f77b333d9e72cbc56b5bc012d
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sat May 28 00:08:53 2005 +0000

    Actually check for drm_fb_loaded before trying to initialize the sysdev
        approach.

commit 45f1db8db9d1280dff51cdfb680bff2754195483
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sat May 28 00:00:08 2005 +0000

    Re-implement the power management.
    There's two choices when fb is or isn't loaded as we treat ourselves as a
        PCI driver in the latter case.
    If we are a PCI driver, then register the suspend/resume functions
        directly. If not, then we register as a sysdev and pick up the
        suspend/resume actions and pump them down into a generic *power
        function.
    It'll be nice when this little mess is sorted out with regard to being a
        real PCI driver ;-/

commit 4a84416c458027462ee6112a5fa442415597f6c2
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri May 27 23:42:11 2005 +0000

    Modify drm_driver::device_is_agp to return a tri-state value to indicate
        that a device absolutely is, absolutely is not, or may or may not be
        AGP. Modify the i915 DRM to use this to force all i9x5 devices to be
        "AGP" (even the PCI-e devices).
    Reported by: Lukas Hejtmanek

commit c9abd2fec509c271339d1ca3addd95df884df80a
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri May 27 07:23:44 2005 +0000

    add radeon registers from VHA code these are the "unknown" registers

commit e1fd79b31e130e9e4bafcab914491973147b7f86
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Mon May 23 20:56:54 2005 +0000

    VIA:
    64-bit fixes. Bumped driver date and patchlevel.

commit 955791f0645d4b61bd20d817c532dda3a40aaddd
Author: Ian Romanick <idr@us.ibm.com>
Date:   Sun May 22 04:36:33 2005 +0000

    Refactor the routines for "calculating" the size of the WARP microcode. The
        two routines (one for G200 and one for G400) were replaced with static
        const variables and a single function that returns the correct size.
        The code to generate an error if the allocated WARP region is too small
        was refactored from mga_warp_install_{g200,g400}_microcode to
        mga_wrap_install_microcode.
    mga_warp_microcode_size is global to the MGA DRM because it will soon be
        used by code in another file.

commit 75cb43ccd73dd2c8c196d209862b8a3ea4e433cb
Author: Ian Romanick <idr@us.ibm.com>
Date:   Sat May 21 02:31:08 2005 +0000

    Forgot to bump the patchlevel and driver date on last commit.

commit a686be5bc8c5d8a260513b680f322e3b790aadf7
Author: Ian Romanick <idr@us.ibm.com>
Date:   Sat May 21 02:27:51 2005 +0000

    Change the MGA initialization and cleanup a bit. The dev_private structure
        is now allocated (and partially filled in) by the new
        mga_driver_preinit function.
    This allows the driver to detect the type of card (i.e., G200 class vs.
        G400 class) on its own. The chipset value passed to mga_dma_init is now
        ignored. This same technique is used by the radeon DRM.
    As a result of this, mga_driver_pretakedown was converted to
        mga_driver_postcleanup. This routine gets called in some other places
        than might be expected, and it sets the dev_private pointer to NULL.
        That little gem took over an hour to track down. :(

commit fced784140c7b347ea9d3091a8bc0c06c1a760f7
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri May 20 00:17:40 2005 +0000

    Refactor common, boilerplate ioctl code from drm_addbufs_* functions into
        drm_addbufs. This makes the code more like the BSD code, and makes the
        drm_addbufs_* functions callable in-kernel.
    Reviewed by: Dave Airlie

commit 4ca48cb4d8341b699ffffc8ccd8d70006733936a
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed May 18 06:35:16 2005 +0000

    Add i945G pci ids to drm
    From: Christopher Allen Wing <wingc@engin.umich.edu> Signed-off-by: Dave
        Airlie <airlied@linux.ie>

commit 6d4b9a830bb5678460621b652e914cbcb16d8c4c
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Tue May 17 02:08:02 2005 +0000

    Savage doesn't require AGP any more. Enable build even without CONFIG_AGP.

commit e051cd19c00ed28997ff6fece0d1d4308b171229
Author: Ian Romanick <idr@us.ibm.com>
Date:   Mon May 16 17:37:10 2005 +0000

    Added device_is_agp callback to drm_driver. This function is called by the
        platform-specific drm_device_is_agp function. Added implementation of
        this function the the Linux-specific portion of the MGA driver to
        detect PCI G450 cards. Added code to the Linux-specific portion of the
        generic DRM layer to not initialize AGP infrastructure if the card is
        not AGP (this matches what already existed in BSD).
    Bumped the driver date and the driver patch-level for MGA.
    This mostly fixes bugzilla #3248. The BSD side still needs an
        implementation of mga_driver_device_is_agp.

commit bd72c6990f22381af61f62bffe70619f726d5923
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun May 15 10:19:21 2005 +0000

    wrap config.h include with defined for KERNEL

commit e0fc400b681cb6b04ba0769c58f279a2aa4326a5
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sun May 8 20:33:04 2005 +0000

    VIA: Fix for oops when AGP ring-buffer initialization is called and there
        is no AGP memory acquired.

commit 6aae7bd5b061c6a8130787ba3ea5aa07c744eda9
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 26 15:27:58 2005 +0000

    Convert NOMAN to the new preferred spelling NO_MAN to quiet warnings.

commit 2fcf66a02fb0f6f31c0d02026c8c7a4d36b45f58
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 26 06:03:39 2005 +0000

    Clean up some const qualifier cast warnings.

commit ec111d70fee0647c4c68a02c723d4a3729c93b56
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 26 05:19:11 2005 +0000

    Convert BSD code to mostly use bus_dma, the dma abstraction for dealing
        with IOMMUs and such. There is one usage of the forbidden vtophys()
        left in drm_scatter.c which will be fixed up soon. This required a KPI
        change for drm_pci_alloc/free() to return/use a drm_dma_handle_t that
        keeps track of os-specific bits, rather than just passing around the
        vaddr/busaddr/size.
    Submitted by: Tonnerre Lombard (partially) Tested on: FreeBSD: Rage128
        AGP/PCI Linux: Savage4 AGP/PCI

commit 31a06d0baca9e378a773ca8bd350860546dd8a79
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 26 05:11:20 2005 +0000

    Use msleep instead of tsleep to drop the DRM device lock and avoid a
        sleep-with- mutex held. This probably ought to be an os-independent
        sleep function ala DRM_USLEEP.

commit be9e67a927ed9583380107b2fb9ddf3bd8a5f128
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Apr 24 19:09:09 2005 +0000

    Fix a panic on startup with non-initmapping drivers by assigning the
        drm_ioremap return value to the map handle again.
    Submitted by: Tor Egge, tegge at freebsd dot org

commit 699d4ad53a62e46344b672365dda0be4001edd99
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Apr 20 18:50:49 2005 +0000

    A fix for a locking bug which is triggered when a client tries to lock with
        flag DMA_QUIESCENT (typically the X server), but gets interrupted by a
        signal. The locking IOCTL should then return an error, but if
        DMA_QUIESCENT succeeds it returns 0, and the client falsely thinks it
        has the lock. In addition The client waits for DMA_QUISCENT and
        possibly DMA_READY without having the lock.

commit 2b8dc25dc549533f1567093fb7dffc06d6f55268
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Apr 20 10:16:52 2005 +0000

    VIA: Interrupt handler bugfixes. Bumped patchlevel to 2.6.2.

commit b0c461c8e374d7e92e5013a03fc6096595a74700
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Apr 19 00:31:16 2005 +0000

    Revert last commit, it affect via things

commit a08343e3e053d5ab27398013781f489cdf7f60de
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Mon Apr 18 08:26:00 2005 +0000

    VIA:
    1) Security fix: Stopped possible MMIO access to PCI DMA area for the
        unichrome Pro.
    2) Fixed an odd cpu usage problem by padding small AGP DMA submissions.
        Bumped patchlevel.

commit 10ddbc8c8c9e540cf4802cab36d0c46f0aa0b6d8
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 16 03:02:52 2005 +0000

    Use /*- to begin license blocks in BSD code to reduce diffs against FreeBSD
        CVS.

commit 926298e8220b43158c433c75ffca74909a33c42b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Apr 13 04:20:08 2005 +0000

    Fix build on FreeBSD-current, thanks to jhb@.

commit a0454aba714ba0314b85faad2801f7b047fa3b02
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Apr 4 04:08:29 2005 +0000

    mirror changes made in main tree.. just happened to be doing this myself

commit cb5f6c22b5a0190c845029a772a2eb2a3faa5d1c
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Mar 29 09:48:12 2005 +0000

    Missing file via_video.c commited.

commit 0a5e02c7b5fbbc7a7cc3654f5820d0dd50381de9
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Mar 29 01:47:38 2005 +0000

    Add skeletal imagine driver (but don't build it yet).

commit 532ccb98b5f2946f574a747b90c39edbe783f888
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Mon Mar 28 21:21:42 2005 +0000

    Via updates:
    New PCI command parser. Moved from via_dma.c to via_verifier.c so functions
        with similar functionality are close to eachother.
    Moved video related functions to via_video.c, which might be extended in
        the future, as new video functionality is added.
    New device-specific generic IRQ IOCTL, similar to the general VBLANK IOCTL,
        but with support for multiple device IRQ sources and functionality.
    Support for Unichrome Pro PM800/CN400 video DMA commands in verifier and
        PCI parser.
    Support for Unichrome Pro PM800/CN400 HQV IRQs in the new generic IRQ
        IOCTL.
    Bumped minor. New version 2.6.0.

commit c6161eff86b250f3113791edcc162dc97322c401
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Mar 27 07:05:28 2005 +0000

    Description: Rather than use custom code in DRM_WAIT_ON() to do exactly
        what wait_event_interruptible_timeout() does, use the function and just
        change the return values appropriately.
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>

commit 385f927692beb395ae3866538b2b0f8f8e436eba
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Mar 27 06:58:12 2005 +0000

    Some ia64 platforms may not support write combining on all type of memory,
        so we need to consult the EFI memory map before we try to set the write
        combine attribute of a page. This patch will try to map a page write
        combined if it's not an AGP page and the EFI memory map says it's ok,
        otherwise it falls back to a regular, uncached mapping. Can someone
        please apply this to the drm tree?
    From: Jesse Barnes

commit 459ef4862978800f3dbff76af134593350cad6aa
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Mar 25 13:44:47 2005 +0000

    Don't know who set the i915GM PCI ID incorrectly but it should be 0x2592

commit 9182891b26f1847664f4a797db12c63ec065df7a
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 25 13:16:38 2005 +0000

    From Xorg CVS realign the i915_drv.h
    From: Tungsten Graphics Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 20dce568dced6cb38a9bab850b45989e86b0f1e6
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 25 13:06:53 2005 +0000

    use linux-core for 2.6 not this stuff..

commit 956a701544d22c7885e53678531448cd04aba5f5
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 25 09:48:34 2005 +0000

    fix up AGP multi-head support for kernel 2.6.12

commit 2ad83874287622875f6979da3cd505d18b697704
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 25 09:47:36 2005 +0000

    verify_area is deprecated, replaced by access_ok. Seems I missed this one
        when I did the big overall conversion.
    Signed-off-by: Jesper Juhl <juhl-lkml@dif.dk>

commit ca04fbc7bad746b5f323a36407b4d99a3a2afd02
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 25 09:05:10 2005 +0000

    fix bug with XFree86 4.3 on core drm
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit c8d2d5d41901ba8072b4f03617c39cbb52f9224b
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 25 09:02:20 2005 +0000

    3dfx DRM depends on PCI
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>

commit df6ef4836ead254487a834e889d4595d915c4818
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 25 09:01:27 2005 +0000

    For 2.6.12 and 2.6.11.x:
    Remove incorrect "drm_"-prefix from parameter description.
    Signed-off-by: Magnus Damm <damm@opensource.se>

commit ab396776fbf2777d31c4253001e882d2faee0c3b
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Mar 18 22:51:43 2005 +0000

    Add support for production version of ATI RN50/ES1000. (ATI Technologies
        Inc.)

commit 34563921dd0b41d4ccf08374227e31d765b40353
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue Mar 15 22:12:30 2005 +0000

    add R200_EMIT_PP_TRI_PERF_CNTL packet to support brilinear filtering on
        r200

commit d2fd9200956a94cfd91a39e76994f326bdfc6ac0
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Mon Mar 14 22:50:21 2005 +0000

    via changes:
    1. Initialize futex locks to zero on device init.
    2. Remove some stray defines from via_drm.h
    3. Prepare via_drm.h for drm client inclusion. The goal is to share a
        common file with common definitions.
    4. Sync shared / shared-core via_drm.h
    5. Bump minor, because of the futex lock initialization.

commit a396617dbc15abafdc172b972a02c04007ad579f
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sun Mar 13 02:16:10 2005 +0000

    Command DMA optimizations:
    - don't waste DMA memory when small command buffers are flushed
    - minimized padding with noops
    - slightly simplified faked DMA flushing

commit 7d3c42b58940b56efa9bfc13a08b5e67797fc771
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Mar 8 23:47:11 2005 +0000

    Fix for bug 2673 from Egbert Eich - memset the version

commit 95fa851769b2a3461fb710f6d035bc5b2bf164e0
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Mon Mar 7 12:19:49 2005 +0000

    Tracked down random lockups related to command DMA that occurred in Quake3
        after ~5min: buffer aging was subtly broken. Part of this may have also
        affected vertex DMA buffer aging and client-side texture heap aging,
        though with less fatal consequences. Bumped minor version and driver
        date.

commit 32b6823a2540da83553f49a1daf89159c425c93e
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Mar 7 09:40:18 2005 +0000

    minor pointer cast typo

commit 15995234b4d6cb848d919b0342b5697fffe80c89
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sun Mar 6 01:41:06 2005 +0000

    Added support for command DMA on Savage4-based hardware. Unfortunately
        command and vertex DMA don't work at the same time. Command DMA
        performance is superior and works with all vertex formats. Bumped minor
        version and driver date.

commit 26f04a16645edb366fce16060f6d5d01f2ff54b3
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 4 03:04:37 2005 +0000

    add some idct type 3 packets for reference

commit bc54ede0a865d55b3cc39db79aae3a8bc12bbcc0
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Wed Feb 23 16:34:30 2005 +0000

    Use wrap counter to extend 16-bit hardware event tags to 32-bit logical
        event counters in the SAVAGE_EVENT_EMIT/WAIT ioctls. This is needed for
        reliable client-side texture heap aging. Slightly simplified DMA buffer
        aging while at it. Bumped minor version and driver date.

commit f3cf4bc5f2bd556689ef197877de596b83dbd3d9
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sun Feb 20 00:05:43 2005 +0000

    Fix VIA K8M800 PCI ID.

commit 56cdeff23181772142a56268e50ceff691c7934d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Feb 19 22:07:07 2005 +0000

    Fix a couple of gcc warnings in DRM_INFOs.

commit baeb76076e79dae0ed78f12e294336deaa3af9e7
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Feb 19 20:00:55 2005 +0000

    Merge r1.26 from FreeBSD: Now that mem(4) is a kernel module, we need to
        depend on it.

commit 49e19c8d001c34f675b8d81ffde8f0792292f6ff
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Feb 18 20:06:10 2005 +0000

    fd.o bug #2576: Add support for ATI RN50/ES1000. (ATI Technologies Inc.)

commit b646515d6124b906f5a0c2cf76f8fda590884ef0
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Feb 18 16:40:54 2005 +0000

    Bug #2567: Fix reversed memset arguments. (David Krause)

commit 80d844d99250e7bc26fbae7ca4a274ad46f7676f
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Feb 15 13:15:08 2005 +0000

    Run depmod after installing new modules

commit 3e8792e7051090b442d29444fa2e5dfe46847c34
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Feb 14 03:28:01 2005 +0000

    Use fuword32 for DRM_GET_USER_UNCHECKED when available. May help on 64-bit
        platforms.
    Submitted by: Jung-uk Kim, jkim at niksun dot com

commit ed082798f481b43d9745aaae15306e94a9acb169
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Feb 14 03:26:52 2005 +0000

    Use the proper API to get PCI vendor/device number for a dev.
    PR: ports/76879 Submitted by: Alex, lesha at intercaf dot ru.

commit 2f7cd38c122b2f7f790e51b78a51cc935c9b2f18
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Feb 14 03:22:58 2005 +0000

    Initialize kbuf to NULL to quiet the compiler about uninit variables
        (wasn't an issue). Don't forget to free kbuf if the copyin fails.

commit 650c0fe391b09479afd787e0b1db0a3e22cc4fcd
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sun Feb 13 23:03:48 2005 +0000

    Fixed Futex release bug. Bumped driver date and patchlevel.

commit 0d2eb2b90c092eaef00c95a9403ed7f0c8f7b3a6
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Feb 13 01:18:25 2005 +0000

    Fix bad copy'n'pastage of copyrights -- don't disclaim anything for VA
        Linux or PI in my copyrights when I should be doing it for myself.

commit ba18d68ff512f672520b0c78aa955ad1f9a9d7d0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Feb 13 01:08:29 2005 +0000

    Add the first bits necessary for a port of savage to FreeBSD. More to
        follow later.

commit 5d5acf28d8225a4a8a440e63abba8136e344b852
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Thu Feb 10 19:29:58 2005 +0000

    add support for texture micro tiling for radeon/r200. Add support for cube
        maps for r100. (Stephane Marchesin's port of the core version).

commit 732cdc5cef25b1ea518fec9c9028d3a9806b690a
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Thu Feb 10 19:22:43 2005 +0000

    add support for texture micro tiling on radeon/r200. Add support for r100
        cube maps (since it also requires a version bump) at the same time.

commit 08790293b13bb4562307309461400dad22c72eaf
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Feb 10 11:02:56 2005 +0000

    Stephane's port of Eric's race fix

commit 2cdfb2cc8527a6a805b159006885268607383448
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue Feb 8 22:46:56 2005 +0000

    fix incorrect PCI id for ATI radeon

commit 81459d6e50a02b87ed95073659536eefa1e09fdf
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Feb 8 04:17:14 2005 +0000

    Close a race which could allow for privilege escalation by users with DRI
        privileges on Radeon hardware. Essentially, a malicious program could
        submit a packet containing an offset (possibly in main memory) to be
        rendered from/to, while a separate thread switched that offset in
        userspace rapidly between a valid value and an invalid one.
        radeon_check_and_fixup_offset() would pull the offset in from user
        space, check it, and spit it back out to user space to be copied in
        later by the emit code. It would sometimes catch the bad value, but
        sometimes the malicious program could modify it after the check and get
        an invalid offset rendered from/to.
    Fix this by allocating a temporary buffer and copying the data in at once.
        While here, make the cliprects stuff not do the VERIFYAREA_READ and
        COPY_FROM_USER_UNCHECKED gymnastics, avoiding a lock order reversal on
        FreeBSD. Performance impact is negligible -- no difference on r200 to
        ~1% improvement on rv200 in quake3 tests (P4 1Ghz, demofour at
        1024x768, n=4 or 5).

commit dc4defe742387dc3081557111b67a1ab99455dbb
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Feb 7 22:55:54 2005 +0000

    Invalid bound check of driver defined ioctls in drm_ioctl
    Bug 2489 Reporter: Aapo Tahkola <aet@rasterburn.org>

commit a36d5b33aaa7731621a288a6a9a02bf86c8c80e4
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Mon Feb 7 21:11:59 2005 +0000

    Cast user data to correct type in radeon_surface_free's copyin.

commit 03ddea5b274a515528ea58db62f7b5f779430c5b
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Feb 7 11:20:43 2005 +0000

    change DRIVER_ to CORE_ makes things look nicer, also change it so the
        driver name is marked on resource allocations

commit 300e0866d68d40af9271a588bd93522e4e7a339c
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Feb 7 10:44:28 2005 +0000

    fix agp detection on linux

commit 5a332a0f61760d8c13a01ba9f9208fafcafc3bb4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Feb 7 03:10:03 2005 +0000

    Restore a debugging message to DRM_DEBUG instead of DRM_ERROR.

commit 2239c55a304416dbf83e7fd545df5c3dde3ff058
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Feb 7 01:14:42 2005 +0000

    Remove some annoying trailing whitespace.

commit 080a547d4d42d42e08a525aca9a62b5ece7616d5
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Feb 5 08:00:14 2005 +0000

    - Implement drm_initmap, and extend it with the resource number to help
        FreeBSD. Add drm_get_resource_{start|len} so linux-specific stuff
        doesn't need to be in shared code.
    - Fix mach64 build by using __DECONST to work around passing a const
        pointer to useracc, which is unfortunately not marked const.
    - Get rid of a lot of maplist code by not having dev->maplist be a pointer,
        and by sticking the link entries directly in drm_local_map_t rather
        than having a separate structure for the linked list.
    - Factor out map uninit and removal into its own routine, rather than
        duplicating in both drm_takedown() and drm_rmmap().
    - Hook up more driver functions, and correct FreeBSD-specific bits of
        radeon_cp.c, making radeon work.
    - Baby steps towards using bus_space as we should.

commit 270ca5f3cee387c10a06a4d58e50c5d0e1cea837
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Thu Feb 3 10:51:22 2005 +0000

    Via driver: Add missing drm_poll function to via driver in core.

commit 7f7bbdcbed4f752bb2063fd1c650121e368797fc
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Feb 3 01:06:10 2005 +0000

    Declare r128_do_cleanup_pageflip static since it's only used here and its
        prototype went away.

commit ed31275144b9d322f7339700a5f5cf1167ee8322
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Feb 3 01:05:34 2005 +0000

    Cast user data to correct type in radeon_surface_free's copyin.

commit caa4212faa659a30d543a15781428bd8b4c2c882
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Feb 1 22:09:46 2005 +0000

    momentary revert. libdrm build may be broken now, but no one uses it yet...

commit 0d6b7fcb79e9bf6f823b5802f8317056015faeec
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 1 11:08:31 2005 +0000

    cleanup patch from Adrian Bunk <bunk@stusta.de>

commit 1dd948f280b52645b320ea0745ec48b8d98c9d9b
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 1 10:43:42 2005 +0000

    make functions static in i915, remove unused functions

commit 62e0a58ecf03fe85de6e671fe2fc7f613ba39b37
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 1 10:33:51 2005 +0000

    update i830 similiar to the kernel, add statics

commit 8d4c731aa1e0936d8187ad77b5c779a79e22566d
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 1 10:18:27 2005 +0000

    make more functions static in i810 and fix pageflip cleanup

commit 4b23b5fc3ebe5660ad8d5eed8057877a9c7592ea
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Jan 30 03:30:45 2005 +0000

    Final pass of libdrm.so work:
    - Add $(DESTDIR) for distributors doing package creation
    - Remove OS-specific include path from build
    - Add /usr/include/drm for driver-kernel API
    - Install all of shared-core/*.h in /usr/include/drm
    - Rename xf86drm.h to libdrm.h since we're not X biased anymore
    - Include backwards compat for xf86drm.h name, with a warning
    - Fix libdrm source to account for drm.h living in /usr/include/drm

commit 41cbbb47afa898cd4bfe5f39fad57199088a5727
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jan 29 23:05:35 2005 +0000

    fix radeon drv

commit cd9ef39c769202f161619ee7a95674371c57cd48
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Thu Jan 27 22:48:47 2005 +0000

    Fixed multiple devices DMA bug. Fixed PCI path FIRE command detection

commit 77045dc51672715115f179c099dfb8d7b4d304d4
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 27 09:13:42 2005 +0000

    fix incorrect PCI id for ATI radeon

commit 43c3223de690b892759901386d8dc936b0dfbad1
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Jan 26 17:48:59 2005 +0000

    (Stephane Marchesin,me) Add radeon framebuffer tiling support to radeon
        drm. Add new ioctls to manage surfaces which cover the tiled areas

commit 408376b2031cf301f1a8e35e89ceefc72f2fdc94
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Jan 26 14:19:24 2005 +0000

    replace magic number with macro constant RADEON_ZBLOCK16

commit 310abb39b24159be9839156b4034426cea6a7449
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 24 08:39:22 2005 +0000

    use libdrm after it was updated

commit 311da0f2124104dfac5fe59bf0ffd7fd88280945
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 24 01:05:07 2005 +0000

    hopefully fix drm_core setversion ioctl... pointed out by Eric on irc

commit 3df805bd4ab492537e3aa0b9ac5ae99491ee38d6
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Jan 22 08:24:36 2005 +0000

    Add drm.h to the install target.

commit 39d5c831a01dbffca268e5938c255e26a860bab1
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Thu Jan 20 23:33:24 2005 +0000

    Removed one bogus Savage3D PCI ID. Corrected another one. Restored
        numerical ordering.

commit 36ec8d82e73215cb49034c5ec540dee170752ee0
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Jan 20 19:05:42 2005 +0000

    Add a Savage3D PCI ID

commit 858e68fbdc4597f6c0dce9dd092a85078d1fb6c6
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Thu Jan 20 12:23:25 2005 +0000

    Corrected some confusion of vb_stride and vtx_size
    Implemented SAVAGE_CMD_DMA_IDX and SAVAGE_CMD_VB_IDX for ELTs support in
        the _savage_render_stage of the 3D driver
    Bumped minor version and driver date

commit 9620a0b8bb2447bc17bf9a5aa9174720bf2ced68
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Jan 19 10:03:33 2005 +0000

    Fix cut & paste problem

commit f5914ad67bd87db8128a47fd74da3573b1306f27
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Jan 19 08:55:53 2005 +0000

    Fix a cut & paste problem

commit d29e2369be1a8643d12ab93997757fe3aafaa655
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Mon Jan 17 21:46:32 2005 +0000

    Some code commenting concerning the FIFO & DMA engine.

commit 7d0cb01cbf620e090230978ccee6cf7a882c832c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Jan 17 20:24:52 2005 +0000

    Add detection of whether the device is AGP by walking the capabilities
        list.

commit c74052cfae9cf3929e692551ce657f8fb55b6f08
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Jan 17 00:02:04 2005 +0000

    Add xf86drm.h to the install target.

commit e5cc0b8f6f561b6eab91ab653cdce38dc160398f
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Jan 16 23:50:58 2005 +0000

    Shared libdrm work:
    - create libdrm.so target
    - build it by default
    - drop xf86drmCompat.c from the build
    - make 'clean' target never fail
    - use pattern rules for .c -> .o for parallelism
    - add 'install' target

commit 37318f167511248315675ac45ba7d4c8fc4efcfc
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 16 07:49:55 2005 +0000

    remove duplicate drm_sysfs.o

commit 0867ce78f6ec31b718f58ce80c56822c40cb68ca
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 16 06:41:34 2005 +0000

    This table is in radeon_drv.h along with the version number so remove it
        from here

commit 354dd17d2505fd3b9754f6ccc960671e1f9363d9
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 16 05:40:12 2005 +0000

    The patch makes drmAddBufs/drmMapBufs can handle buffers in video memory
    The attached patch adds a new buffer type DRM_FB_BUFFER. It works like AGP
        memory but uses video memory.
    From: austinyuan@viatech.com.cn (fd.o bug 1668) Signed-off-by: Dave Airlie
        <airlied@linux.ie>

commit 9514ee39f7e5063383b99de580e7e3115645e886
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sun Jan 16 01:22:09 2005 +0000

    Fixed a bug that prevented the driver from ever emitting triangle strips or
        fans. Bumped patchlevel and driver date.

commit ffc51f1f32c57a99f2a8b02c0a9aa211362ec9b2
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sat Jan 15 16:55:01 2005 +0000

    Setup MTRRs for frame buffer and aperture manually on Savage3D and
        Savage4-based cards. Automatic setup in drm_initmap doesn't work due to
        the weird alignment and size of the aperture.

commit 6c8a3194f40fc673b1055f1f2b70b45209881e7f
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 13 01:26:16 2005 +0000

    due to backways compat crap for IRQ_HANDLED etc.. this wouldn't build on
        2.4

commit d4a8f16eb6a2fe13f2576f224e6c1a8b3ba89719
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Wed Jan 12 16:07:49 2005 +0000

    Use virt_to_page instead of vmalloc_to_page in drm_do_vm_shm_nopage for
        consistent pages allocated with drm_pci_alloc.

commit ee576367632b582e29f2b3d42f2eb9250cfdf219
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Jan 11 10:59:01 2005 +0000

    Import Thomas' changes upto 2.4.3 to shared. Small tweak to install target.

commit 9904319b95794088fe1db34e86ed62bc20f863e7
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Jan 11 10:42:52 2005 +0000

    import Thomas' shared-core via changes up to 2.4.1

commit 17d893f567787914add42c221996c631455cdb25
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Mon Jan 10 22:46:02 2005 +0000

    Only try to find the agp_buffer_map if dma_type is AGP. This is all that's
        needed on the DRM side to support PCI Savages. Bumped patch level and
        driver date.

commit d6af902ff74d4a384c2dd9acb9540d637f588bc6
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sun Jan 9 19:49:21 2005 +0000

    Improved workaround for Savage3D DMA lockup to emit NOPs only before the
        first indexed drawing command of a cmdbuf or if a wait command was
        emitted since the last indexed drawing command.

commit 6e38fd357625ef002cf1f4570296dc66ba2631c6
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Jan 9 17:30:44 2005 +0000

    Adjust 4 level page check for <= 2.6.10

commit e7ba83bd6f3a1ab9981948a64e9a09940d25e281
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sat Jan 8 23:28:27 2005 +0000

    Fixed off-by-one error in savage_bci_wait_fifo_shadow.

commit fb6a4d0a7dfd8e996dca6d45bb820979f231c82c
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Jan 7 11:37:01 2005 +0000

    via updates: moved the verifier state struct to dev_priv. Implemented AGP
        alignment check.

commit ca2b94cfa2f07c4fd1188d85d8d916318e15e7f2
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Jan 7 08:21:29 2005 +0000

    Updated via DRM with check for stray FIRE commands primitive list.

commit fcece3cf34ed5cc7e82d324362a40b3dd5493bbe
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Jan 6 17:51:32 2005 +0000

    Add i915GM support Add resume functionality (must be used with later DDX)
        Bump to 1.2

commit c6c7496ca090dd56599de5bb1398f69762569d5e
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Jan 6 17:09:22 2005 +0000

    Adjust drm-memory for 4 level page tables in 2.6.10 ifdef'd to use 3 levels
        in kernels older than 2.6.10

commit 50a6ffa8789ca12029da1db86ad8c90ce62cd241
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Thu Jan 6 15:53:38 2005 +0000

    via DRM: Updated the verifier to check the vertex lists more thorough. This
        should hopefully stop it from getting out of sync.
    The PCI command parser is still not updated.

commit ae1bc4a6da92ab31c933baa0b3f6c17c9bd16eb5
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Wed Jan 5 23:45:42 2005 +0000

    3D scissor regs are now managed by the DRM to iterate over clip rects
        passed to the cmdbuf ioctl (try xeyes on top of glxgears ;-)
    Tightened the texture state check
    Bumped Savage DRM version to 2.1.0 so that DRI driver can (theoretically)
        depend on the DRM to manage the scissor registers

commit 4818014ab10e5ab27fe7c87f7936a932526612a6
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Jan 5 17:46:34 2005 +0000

    Bumped driver date and minor version.

commit e34b5601912ce4b611d429304d5271fcf6f9f457
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Jan 5 17:44:43 2005 +0000

    VIA update:
    Release video futexes when context is destroyed (This was previously done
        by the X server).
    Added New Unichrome Pro VIDEO DMA commands to the verifier.
    Added Quiescent heavyweight lock mode.

commit 094f02c568fb2096a93b30adf291f82e0b87bbce
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Wed Jan 5 14:34:12 2005 +0000

    Fixed the DMA buffer age test. Should fix occasional "soft" lockups. Bumped
        patch level and driver date.

commit 04842e8bcf0cc1b3553ba380c450ad1f22b8b463
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sat Jan 1 20:22:58 2005 +0000

    Completeley rewritten Savage DRM which can be considered secure (modulo
        implementation errors). Direct hardware (MMIO, BCI) access is no longer
        needed in the Mesa driver. Bumped version to 2.0.0. Corresponding
        changes to the DDX and Mesa drivers are being committed.

commit ed165a25292740d5d3ef7e78dc04a6a3402562aa
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sat Jan 1 20:03:15 2005 +0000

    Added a new DRM map type _DRM_CONSISTENT for consistent PCI memory. It uses
        drm_pci_alloc/free for allocating/freeing the memory. Only implemented
        in the Linux DRM so far.

commit fe4ade81bb7a1242b18b84e012c1a293eea0420b
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jan 1 12:07:51 2005 +0000

    i810/i830 bug with Jon's file operations changes

commit e19fa7ada122a68d6bedf3d678e96545ed41a39f
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Dec 31 11:44:27 2004 +0000

    VIA DRM: verifier: Added verbose palette error reporting, and support for
        stipple palettes together with rudimentary checks for texture palette
        sizes.
    other: Bumped version patchlevel and driver date.

commit 590b23011910e27664c8bc6ebac4b2b150d81519
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Dec 31 11:27:57 2004 +0000

    VIA DRM: Stability enhancements and cleanups in via_dma.c Added explicit
        licence notice in via_dma.c

commit 02c35ec0a28b4fffcfc09ca444f7dc0c0912216d
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Dec 21 17:13:22 2004 +0000

    via DRM: Tightened the security for some functions of the
        DRM_IOCTL_VIA_DMA_INIT IOCTL. Bumped patchlevel and driver date.
    XFree86 bug: 2119

commit 47c178da08c01501890e23219cbac8319992a453
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Dec 20 12:03:02 2004 +0000

    Copy HC_ParaType_Auto change to shared-core. Bump version numbers and
        dates.

commit c4c48a8a5bb27cee0592aebcc032abe7858604c8
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Dec 20 11:57:10 2004 +0000

    Add a very simple install target. I expect there are more correct ways to
        do this.

commit ae0db704b4ada67f9df81e208308c7d92c29396e
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sun Dec 19 19:13:47 2004 +0000

    via changes: Fixed typecasting bug in via_dma.c, and possible short-circuit
        bug in the cmdbuf_size ioctl. Modified ring-buffer jump code AGAIN, due
        to new oddities discovered on the Unichrome Pro with faster processors.
        Bumped patchlevel and driver date.

commit eaaf0a5211883608e2e698cde04bcb0da4c4a4ee
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Dec 17 14:11:05 2004 +0000

    Add the 'Auto' pageflipping command to the verifier. I don't think any
        verification is required for the arguments of this packet from a
        security point of view.

commit ebd3b867deed789bd4b3fe98f88c20a9454f0061
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Dec 16 11:07:20 2004 +0000

    drm_pciids.h should only 'cleaned' when the shared/ directory exists. Which
        the Makefile already knows about, but it was cleaning this file anyway.

commit 3e65f52bda674bec43b807d50b41a537c9e93959
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Dec 15 03:34:09 2004 +0000

    Use SYSCTL_ADD_OID macro instead of calling function directly.
    Submitted by: reffie@FreeBSD.org

commit aff0a2548561ecbe3411b57cd31f46cbb1b4f6b8
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Mon Dec 13 13:53:12 2004 +0000

    VIA drm updates:
    1. Improved security check of AGP texture adresses.
    2. Hopefully last fix of ring-buffer jump oddities.
    3. Added ioctl to check available space and command regulator lag in
        ring-buffer. This is needed for 3D application responsiveness.

commit b4782ba76b8ee48dca9948abe8ba5cd1f42617e7
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 10 11:53:24 2004 +0000

    Use wbinvd macro instead of assembly for it,
    From: Stefan Dirsch <sndirsch@suse.de> Signed-off-by: Dave Airlie
        <airlied@linux.ie>

commit c4a87c6883ede7bbf486743efe3e9325d96f8e54
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Dec 8 16:43:00 2004 +0000

    (Stephane Marchesin, me) add hyperz support to radeon drm. Only fast z
        clear and z buffer compression are working correctly, hierarchical-z is
        not.

commit 98d01f9542d7f70aa10d68c0e41e631b5f156770
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Dec 7 12:18:47 2004 +0000

    Patch from Jon Smirl from Nov. 2nd that makes older X servers behave well
        with linux-core. Without this, they will fail on their second
        invocation since the drm already has a busID assigned.
    Submitted by: Jon Smirl

commit bf6eb1c0d47e670658c42e439434c0c25caabcfb
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Dec 7 12:09:11 2004 +0000

    Fix up linux 2.4 series Makefiles for via_verifier.c

commit 1fbfd9eb32220a10d66373b77172965cfeccd4f7
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Mon Dec 6 11:19:23 2004 +0000

    Security and optimization fixes for the via drm:
    1. The command verifier was never initialized in the non-core source tree.
    2. Check added that the AGP ring buffer has been initialized before
        accepting command buffer.
    3. Free space check in the AGP buffer is moved to after command
        verification, which is more optimal in most cases.

commit 267e0645272720344eb7556a948e72112edbe2ec
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Dec 3 23:03:36 2004 +0000

    Added 3D functionality to the via command verifier. Modified the via
        ring-buffer code somewhat to workaround hardware problems. Bumped via
        minor version number.

commit f197110e07b0be03d5d79329779b665ac46433d5
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 3 10:22:15 2004 +0000

    Make 1-bit fields be unsigned (no sign bit :). sparse complains about them:
        drivers/char/drm/sis_ds.h:88:12: warning: dubious one-bit signed
        bitfield drivers/char/drm/sis_ds.h:89:16: warning: dubious one-bit
        signed bitfield
    Signed-off-by: Randy Dunlap <rddunlap@osdl.org> Signed-off-by: Dave Airlie
        <airlied@linux.ie>

commit 4f8fa6028631fa1d799e9a68ed710fbc98976656
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sat Nov 27 22:55:31 2004 +0000

    Reworked PCI MMIO command buffer parser, and imported code from the Mesa
        driver. It can now handle the 3D OpenGL commands from the Mesa
        unichrome driver.
    Added vsync frequency detection support. This will be used in the future
        for XvMC and better frame timing.
    Bumped minor version number and driver date.

commit f0a86288fa4d7b951f33f7b1a6ef36106c7df788
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Nov 11 11:09:11 2004 +0000

    patch from bug 1803 - will try and push to kernel soon

commit 4b4df875b26bd08ae62f26b8ced6a050425752ac
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Nov 9 16:58:02 2004 +0000

    Fix more build problems on linux-core

commit 76b1a7f2b423eef828e911f93f1ef38927a5507e
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Nov 9 03:36:06 2004 +0000

    make linux-core build again

commit 6483e7a1ac8395828eb3a13f763cf99d6ef89535
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue Nov 9 00:54:19 2004 +0000

    add missing CHIP_RV350 to radeon_enums

commit a1d9e5abafe60ca2b7f96cadd1013695ada4ac41
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Nov 7 04:11:15 2004 +0000

    Refine the locking of the DRM. Most significant is covering the driver
        ioctls with dev_lock, which is a major step toward being able to remove
        Giant. Covers some new pieces (dev->unique*) in the core, and avoids
        one call down into system internals with the drm lock held, which is
        usually bad (FreeBSD LOR #23, #27).

commit c5bededa5130a58273448188c04c15bc9c1097f3
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 7 02:19:58 2004 +0000

    add some more r300 pci ids

commit c21cdee38a6b9124d01662b36207450aa5fbb626
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 7 02:15:11 2004 +0000

    respect cc and cflags

commit 67f6c5e36a93a9cdb18df133f6c31bab521c152a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Nov 7 00:30:15 2004 +0000

    Don't link in files which no longer exist.

commit fa3fdbd99c6b6e5cec59f1044ce6ce1105b5e8dd
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Nov 7 00:25:49 2004 +0000

    Now that the memory debug code is gone, and all 3 BSDs have M_ZERO, stop
        using drm_alloc/drm_free in the core and instead use plain malloc/free.

commit d37457b5996c09d1965f8906501cd1fde6aa9499
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 23:05:46 2004 +0000

    Add the drm Makefile and update .cvsignores.

commit cb5aaa89871c051098ae8067d0e386840b7bdc59
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 23:02:07 2004 +0000

    Convert more drivers for bsd-core, moving the ioctl definitions to shared
        code. Remove the "drv" from sisdrv, as it's unnecessary. Use the
        drm_pci functions in i915 instead of per-os implementations of the
        same. Avoid whitespace within fields in drm_pciids.txt (one of the r300
        definitions), since it breaks the bsd pciids script. Tested on sis,
        mga, r128. i915 needs more work.

commit 7ddbd38dde5dc5566ba14f2b1c449611a6d0224f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 21:44:54 2004 +0000

    Remove some core stuff that ended up being unnecessary.

commit 7bdccfd0bb192200ba022c368f85f73e5a989e7a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 21:18:49 2004 +0000

    Get r128 basically working: Hook up the driver's dma ioctl, use the proper
        offset into the driver ioctl array, and don't make the ctx bitmap
        conditional.

commit ae7a1713139f1eacec9cc1629cacef0394e270cc
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 20:27:19 2004 +0000

    Move the lock/unlock ioctls to a more logical place, in drm_lock.c.

commit cca29ac9becffc7d5fc8204c706621b842c3557d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 20:21:55 2004 +0000

    Connect up r128_ioctls in driver config.

commit 069f53a93b2c47c55c54dc8092ef23a9e7461033
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Nov 6 16:55:41 2004 +0000

    Move radeon i2c include to top of file

commit 642a8106d270e74ec8ee1a809657d66f4fe6f542
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Nov 6 16:51:36 2004 +0000

    Export missing r128 ioctl symbol

commit 000c8eb18ef7ee9cecb34909be52281ec88a5486
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Nov 6 16:41:24 2004 +0000

    Fix Linux build. Why won't this complile? extern int const foo; static
        struct drm_driver driver = { .var = foo }; error says foo is not
        constant

commit b2f275b46e575766c7b5dab22ba30a367a182c9e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 11:50:08 2004 +0000

    Hook the debug output up to a sysctl, so you can choose to enable at
        runtime.

commit 7adee84064d55207dbf7893cc8cb579bfa1a7631
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 11:19:38 2004 +0000

    Add file missed in last commit: Commit first pieces of port to OpenBSD,
        done by Martin Lexa (martin at martinlexa dot cz). Now that we've got
        porting for all three major BSDs (and the fourth being very similar to
        FreeBSD), move the mostly-duplication drm_os_* files into drmP.h.
        Remove some cruft from linux heritage and from pieces of the DRM that
        have since been removed.
    Note that things are still not quite working for even FreeBSD, but these
        are first steps at cleanup, and just a WIP checkpoint.

commit d7510ea4136a031b16fb25a32bd77970d315707a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 11:16:26 2004 +0000

    Commit first pieces of port to OpenBSD, done by Martin Lexa (martin at
        martinlexa dot cz). Now that we've got porting for all three major BSDs
        (and the fourth being very similar to FreeBSD), move the
        mostly-duplication drm_os_* files into drmP.h. Remove some cruft from
        linux heritage and from pieces of the DRM that have since been removed.
    Note that things are still not quite working for even FreeBSD, but these
        are first steps at cleanup, and just a WIP checkpoint.

commit cf259f10aa8dbd83a4c086963fee7138280a9688
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 02:00:04 2004 +0000

    Remove the vestiges of the memory-debug code.

commit c9202c89653b8dac2ac322c3d3a7389945e1c94c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Nov 6 01:41:47 2004 +0000

    Commit WIP of BSD conversion to core model. Compiles for r128, radeon, but
        doesn't run yet. Moves the ioctl definitions for these two drivers back
        to the shared code -- they aren't OS-specific.

commit 39a23640b2de9e59e99d48e6de8c9edae0231856
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Nov 5 17:29:14 2004 +0000

    Move ati_pcigart shared routines into drm-core module

commit f08a01c0e21431e1b7990584ce2f61f0e711c093
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Nov 3 13:37:37 2004 +0000

    Fixed bug in via_dma.c. The code didn't check that the lock was held by the
        caller. Just that it was held.

commit 9409d8231c3be346ce7148275ce0ee86ec171716
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Mon Nov 1 20:48:49 2004 +0000

    Reworked the jump-code in via_dma.c. The command regulator now seems to
        pause correctly after a jump. Removed the debug message from within the
        interrupt handler of via_irq.c

commit 08758b2fb76bc4e862f25d0164ae9f523d2dec20
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Nov 1 10:52:18 2004 +0000

    correct historic mis-attribution of copyright

commit 5128542814215b26ed342e3a4ac2217606fe5e76
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sun Oct 31 15:16:44 2004 +0000

    Allow drivers to override reclaim_buffers in an OS-independent way by
        passing drm_device_t* as first parameter, like in the BSD version.

commit 8264e2c8aa6b2811bca0e45c50ac3328d14bfbf7
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Sat Oct 30 13:01:48 2004 +0000

    Some stabilizing work to the DMA ring-buffer code. Temporarily replaced the
        rewind jump with a reinitialization. This makes the code stable on
        CLE266 and KM400.

commit 816a2917099b3ff214dc357c5b41984f34902cf3
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Oct 29 17:09:54 2004 +0000

    Switch SPIN_LOCK_UNLOCKED to spin_lock_init()

commit c611cb9f171df3b9ad19e57e614f35c67e73ceb1
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Oct 29 14:38:07 2004 +0000

    Add include of moduleparam.h

commit b974e2cd683fa798970cd1bdc5e20acfb7a34a9c
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Oct 28 15:52:31 2004 +0000

    Break poll() to make it match the Xserver's broken expectations.

commit 486a84d70c31423a849cd88dbd91ced2dcf83742
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Oct 28 09:50:39 2004 +0000

    fix for 2.4 build

commit b37efdadca5da66cfd442a88353fa92c9e7aec24
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Oct 23 18:12:34 2004 +0000

    Round 2 of getting rid of inter_module_get()

commit 43cbf43a5f9e54decbfd837d0b5984454f2d61bf
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Oct 23 14:43:06 2004 +0000

    Revert symbol_get() changes from drm_drv

commit 4b29f857685e4fc6c8901a061c6de7b86ee3e993
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 23 14:00:53 2004 +0000

    fix inter module put/get

commit 1473556e065b1970196b8bb542574cd1e275bb00
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 23 07:02:29 2004 +0000

    actually 2.6.10 introduced pfn range so it should work now..

commit 182a0e5dac5e2ae3751abc2eaa0398aa0150a131
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 23 06:59:15 2004 +0000

    fix pfn vs page for older kernels (2.6.9-rc kernels many not work..)

commit 8d7e798d4c73650ed240a3ad194744b94043e31f
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 23 06:25:56 2004 +0000

    Apply radeon r300 microcode patch to non-core

commit 9ea6fe7aa6ba27cc7003c9cd141e9146a492416d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Oct 23 04:21:27 2004 +0000

    Prepare to eliminate inter_module_get("agp")

commit ad87dd8427b6142c42d7b97c7a4170c89b6728ec
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Oct 22 16:03:21 2004 +0000

    Bring in patch from kernel for remap_pfn_range

commit d76f734f68eeea32c94de6ad4979a94ca8e320db
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Oct 21 16:58:28 2004 +0000

    Fix up the radeon i2c error handing

commit 17ce33835a0b582d87343fab331d80342f268d4d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Oct 20 16:23:42 2004 +0000

    Don't release an i2c channel that has not initialized correctly

commit 7ebbebf3d3a3af3c363a1396d737d5a61634124b
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Oct 20 05:11:49 2004 +0000

    Switch linux-core from using dev->pdev->driver->name to
        dev->driver->pci_driver.name. This avoids the stealth mode case where
        pdev is pointing to the wrong driver or no driver.

commit 5ae6c5af751780fbf424b848aa2355bc303a5b73
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Oct 20 04:41:38 2004 +0000

    Fix dd vs di version typo in drm_setversion

commit 157a814be6f3065a2463141f1592fa8948765334
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Oct 19 18:18:02 2004 +0000

    Add a protective check against a possible buffer overflow

commit bcfbd73536e8e44b028953e4e04c83d143612a10
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Oct 19 16:30:02 2004 +0000

    Fix missing I2C busses to be non-fatal error.

commit ca1ec9268f9de783daf3f2db86a4fb47108d609a
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Oct 19 02:50:14 2004 +0000

    drm-core, Clean up bug error path on stealth mode exit

commit 0d89b19325d533a7c1817fcb568a1879fd28a865
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Mon Oct 18 14:16:41 2004 +0000

    Update Doxygen configuration & comments.

commit d403173005fd345ba8b83f19497a8aaf07e7eee6
Author: Ville Syrjala <syrjala@users.sourceforge.net>
Date:   Sat Oct 16 11:21:56 2004 +0000

    Fixed off by one errors in clipping.

commit 52fdf10fd79c2223c05e2146431343132b4db964
Author: Ville Syrjala <syrjala@users.sourceforge.net>
Date:   Sat Oct 16 10:54:58 2004 +0000

    Fixed bad formatting.

commit a8b2c94c181a8f398a824aa3267144a29ffaca33
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Oct 15 20:37:01 2004 +0000

    Remove drm_init.c

commit 91aa32742c49db0c553b5836afd28c8ea2436014
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Oct 15 20:36:15 2004 +0000

    Move drm_cpu_valid out of drm_init. drm_init is empty now.

commit fa50e2b5132b84353ae964a39c3b10ea270d15e8
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Oct 15 02:59:35 2004 +0000

    Switch linux-core over to 2.6 parameter model to enable debug use
        drm_debug=1

commit 5e8838fd115879174567c4c2db8ad25331619994
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Oct 13 16:40:53 2004 +0000

    Add a poll function that alternates between zero and normal poll return to
        bring DRM into conformance with normal poll().

commit bbfe18e3bf7b45543c9f59f7363c1ed5b6bca719
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Oct 12 18:46:26 2004 +0000

    Via updates. Fixed unlikely but possible uint32_t overflow in ring-buffer
        code. bumped patchlevel.

commit ad70dc676ebf8f2f86d171dccb873a04a3e5b87b
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Oct 12 03:59:17 2004 +0000

    Breakout heads into their own data structures.

commit ad549c5ae62fd75aa2bdb8bf5efc4913c476cb02
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Oct 10 22:54:55 2004 +0000

    Rename fn_tbl to driver. Core driver now uses pci_driver name which
        reflects the personality name.

commit 3f02a793514a866401119efc74c20512f4732703
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Oct 10 05:52:19 2004 +0000

    Vladimir requested support so we can at least load r300 microcode for
        helping
    2D operations.
    Ups radeon to version 1.12.0, Vladimir, you might want to add any extra
        pciids...
    Approved-by: Dave Airlie <airlied@linux.ie>

commit 5654a78547d0903c0ea2c290cbfac6ea9e777b9a
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Oct 10 02:49:06 2004 +0000

    Forgot to add the new Makefile

commit b5e02f8eb3b9c178014e510e5999fab671031a6c
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Oct 10 00:09:31 2004 +0000

    Make the test programs build

commit 8727326371621c8c2b9f794532ca543a708ed71f
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 9 12:42:52 2004 +0000

    cleanup VIA driver to look a bit like others before kernel merge

commit efcb9fb7ae3caad341bd8c82febf9d65b2a73933
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 9 11:16:20 2004 +0000

    fix up whitespacing in Kconfig

commit fec94a82748b3603da7239e39d247a9654765659
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 9 11:12:24 2004 +0000

    Lindent the via stuff so I can include it in kernel

commit e09229d6c85bcb8b899f09fd70f264b4e1d6d0bd
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 9 10:58:19 2004 +0000

    remove unused dma remnants that were gamma only - these could cause an oops
        on via

commit d24194e904cbfc85147efae6922e497e0102b2eb
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Oct 8 21:11:02 2004 +0000

    Changed unsigned to uint32_t in some ioctl parameters. Introduced first
        rudimentary command verifier for dma buffers. Changed the decoder futex
        ioctl parameters. Bumped the via major version number.

commit 3981f17227aa72b263d27e79aede307b1e2980a8
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Oct 8 14:31:25 2004 +0000

    Fix refcount bug in stealth mode

commit 6619c5d941b86452405222a5b44a546dd0aa45c7
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Oct 7 00:40:16 2004 +0000

    Fix drm_exit to allow for DRM(global) being deleted when framebuffer is
        loaded.

commit 61d36f6179f535de4a37c58cb7dade2b6035883d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Oct 6 16:27:55 2004 +0000

    Revert back to drm_order() instead of using kernel get_order(). The
        functions are not identical.

commit 4dbc1e87288987f0506087c7971639c33af8fe3e
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Oct 5 12:12:01 2004 +0000

    Patch for Kconfig for making i830/i915 not build together

commit 6dee8401a65c2b976dad8937985439fb8f0887be
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Oct 5 02:58:14 2004 +0000

    enable the device in the right order, remove __devinit from drm_int

commit aba12cfc0e80694457347dc9d0ed78cd78192ea3
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Oct 2 19:11:30 2004 +0000

    janitor-list_for_each-drivers-char-drm-radeon_memc.patch from mm kernel

commit e17abf5d5dc7c9895ed9aea0efb4ac501171fa54
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 30 23:47:45 2004 +0000

    Make the debug memory functions compile for the core model.

commit a36a6a291d3627bf1ad036fa4a7a33ea99e8ed5d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 30 21:27:59 2004 +0000

    Remove DRM() macros from core ffb driver. DaveA says he'll make it compile
        someday.

commit 9f9a8f1382711a05ec000b639d971b619d8bc305
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 30 21:12:10 2004 +0000

    Lindent of core build. Drivers checked for no binary diffs. A few files
        weren't Lindent's because their comments didn't convert very well. A
        bunch of other minor clean up with no code implact included.

commit 368493edc9e47ce63edf955e9fa9d096500c4e8e
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 30 21:06:53 2004 +0000

    savage.h not used in core builds

commit e1d74a98994963b0427486391fad4f6473d39c9f
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 30 20:46:59 2004 +0000

    core ffb.h is not used anymore

commit b3d70ad6a7b6f4bd1216929200ddfc8e348529cb
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 30 20:25:13 2004 +0000

    Remove unused drm_module.h

commit 1c0a437fa20e8c3fb971cd8947754a9b274bea76
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 30 19:26:35 2004 +0000

    Move things around to reduce public symbols and even out files. Switch to
        get_order from drm_order.

commit 3aef3841d0c8099a97a56a285f0a21d9147405bd
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 30 18:13:33 2004 +0000

    Make fops per driver instead of global, remove default flush, poll, read
        functions

commit 0bff0d9eb6317ccccafc79cac7b235b4cb4c9161
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Sep 28 22:25:06 2004 +0000

    Getting the AGP module is a global resource. Make sure a dual PCI/AGP
        driver doesn't release it on unload since an AGP driver may also be
        loaded.

commit 9e421181ddfc2d91859e9959487baf2df851e743
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Mon Sep 27 20:14:31 2004 +0000

    Fix the shared directory I accidentally stomped on

commit 6d6526fdf9a4390fab3edbca79d6a0b80b84ddd1
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Mon Sep 27 19:53:51 2004 +0000

    core needs three new files

commit fa6b1d129e7bf8acf41e66c9c665ae9f9c1d5b0d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Mon Sep 27 19:51:38 2004 +0000

    First check in for DRM that splits core from personality modules

commit 77fa7b9548bf7a5bf5e49515f1a478c27ede07a7
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Mon Sep 27 15:42:48 2004 +0000

    Flip the 2.4 check so that it looks for 2.6 instead. This will allow builds
        where we can't determine the version through.

commit edbfb46c0bfcc2a5a20d9f23d7088a4acce52b8d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Sep 24 04:31:25 2004 +0000

    README with hints on how to make a 2.6 specific version of a 2.4/2.6 shared
        file

commit 1d6392f1fdcd8ed7e2936af815387d12ee124cab
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Sep 24 04:21:21 2004 +0000

    Makefile reminder to build in 2.6 when on 2.6

commit 74f063fc9d445f263242063e7acab1864ff75205
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Sep 24 03:12:17 2004 +0000

    Create new linux-2.6 build. Move all gpl files into the 2.6 build. If you
        edit files for 2.6 be sure and break the link to the 2.4 directory and
        copy the cvs history.

commit 36a257cfe9e45e7a2022f19100a193eb73e30d4b
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 23 17:22:27 2004 +0000

    Remove 2.6 code that allow DRM major device number to be shared. We can add
        it back later if needed. Checked DRM on both 2.4 and
    2.6 to ensure that it builds and runs.

commit 55c5e240892bb9673cce602e7deb323f29aa8031
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 23 05:40:05 2004 +0000

    Add new sysfs support files

commit c158a36c4cfef024ba1be05a163cfd4b00ebea21
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 23 05:39:15 2004 +0000

    1) switches from class_sysfs to drm sysfs implementation to allow
        customization
    2) compiles again on 2.4, but doesn't work

commit af326f6f0c26191b4aef2183fb485e58495b29a5
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Wed Sep 22 22:51:18 2004 +0000

    Create permanent maps of framebuffer, aperture and MMIO registers. Added
        chipset-type information in driver data field of Savage PCI-IDs. Added
        missing PCI-ID 0x8d03 (ProSavageDDR on Pentium boards). Don't require
        AGP.

commit 27fc998f7d16e7197f38b2d7d1ce65938e06423d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Sep 22 19:13:02 2004 +0000

    Remove hotplug reset support from DRM driver. This will be handled by the
        VGA driver when it gets written.

commit 184a50368505bb74f3efac3cf48e72db41487342
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Sep 22 16:45:44 2004 +0000

    Add *.flags to cvsignore.

commit 2ad068005aa9785dd86e0023354f68e970f04e9f
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Sep 21 05:13:21 2004 +0000

    Make DRM permanent maps match broken X behavior. X is mapping regions that
        are both smaller and larger than what the hardware supports. If DRM
        tries to fix these requests X will fail.

commit 6f31c42fe923ff3f79a55d8c859e6ccfd3bd322d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Mon Sep 20 19:23:27 2004 +0000

    Remove size restriction on permanent addmap

commit 59cc1d8256fb3b6e2374e52eb24da12b046aea91
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Mon Sep 20 17:09:26 2004 +0000

    Felix's fix for map request smaller than permanent map size

commit 5654880eeed0646a53655b093f4d3bf5608ebcc7
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 20 11:29:16 2004 +0000

    remove HAVE_COUNTERS

commit fa75a81c9acbae7282e2ea5596f04a6b359c95e9
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 20 10:45:53 2004 +0000

    another fix after the macro stuff

commit c15b1d15ffbf41ed60cd807d13f031c8f270f887
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Sep 18 16:44:43 2004 +0000

    Fix from: Nishanth Aravamudan replace direct assignment with
        __set_current_state()

commit 993a75a5d148cb0a93bbed677b550bfb4d57fe4a
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Sep 17 20:01:59 2004 +0000

    Makefile and missing file to build libxf86drm.a

commit f10f8821014bc7a05e8bbc9f199e0f60b1541a0e
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Sep 17 04:25:19 2004 +0000

    Add the two GPL licensed I2C support files.

commit 0c6fb0fbe1fff43af60634b785cd5b7196c8dd03
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Sep 17 04:02:28 2004 +0000

    Add linux sysfs i2c support to radeon driver. This patch adds GPL licensed
        files to the linux build but not to the BSD directories.

commit c7c9d3ef7b82215696c007415a018c670d54041e
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 16 18:42:03 2004 +0000

    Let's try adding the dyn-minor patch again. This patch will reuse minor
        numbers if a card is hotplugged in/out instead of just having them
        increase.

commit 5dfd89ae0a4894a3b9de17c17bb75c47e6509b8e
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 16 14:32:17 2004 +0000

    Fix drm_scatter to properly report it's availability

commit eeb0ef1a7076e7744655954e95a65532eb4b7ebe
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Sep 15 17:44:30 2004 +0000

    Back dyn-minor patch out for now. fops handling is broken on some cards

commit 941d2cf431d0534ec53f90e627bb0445b6f0260e
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Sep 15 16:06:50 2004 +0000

    Don't use module_param if it isn't defined in older kernels.

commit 64ef12c55cfca7885108950eb975c4d6625a0570
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Sep 15 00:20:21 2004 +0000

    Dynamic device minor support. Minor device numbers will be reused if the
        device is hotplugged in/out of the system

commit 03c2e674e43db5fcf4cb4b641005c329c7b343a9
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Sep 14 03:59:25 2004 +0000

    Add chip family names to the radeon driver

commit 13cb3f1b006d24e4578aca25522fd224aed5cd9c
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Sep 12 19:24:08 2004 +0000

    Fix error path in probe() to release resources if there is an error.

commit 15407efd468b8745354a346544aba5f25448103a
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Sep 12 03:30:30 2004 +0000

    Make the comment match the code

commit 36050cc958596ca81d667d8a51e124e9ea9eb866
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Sep 12 03:23:50 2004 +0000

    Fix DRM to compile cleanly with recent kernel changes in PCI IO and
        DRM_COPY_FROM_USER. PCI IO changes in 2.6.9-rc1 bk currently.

commit e6d468ad7f398a72e8be227564f3a450de873cc6
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Sep 10 16:44:28 2004 +0000

    More general patch to mark resources in use by all DRM drivers. Makes the
        code Linux specific.

commit 1fb27632c3338ff974c27fd88e2098a5193bb145
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Wed Sep 8 20:57:39 2004 +0000

    Update doxygen configuration file. Minor documentation updates/fixes.

commit 3bf785c9126a0bbc38b794096dbbddab5682c251
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Sep 8 01:49:06 2004 +0000

    Adjust permanent mapping code to account for more than one framebuffer map

commit b0c73b7fcb3f2504f2ab747bae75a98112071491
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Sep 7 16:48:44 2004 +0000

    Added IOCTL for writing 2D DMA command buffers over PCI. Bumped minor
        version number.

commit c33f4449fc893d5478d9541bc6a80124c8f96ea5
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 5 23:33:57 2004 +0000

    missed fix as part of last checkin

commit eeae6a0a3885f9af9efba7c1e1bcb1e633635717
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 5 10:54:59 2004 +0000

    merge back bunch of whitespace and misc changes from kernel

commit f96e00595dff85e18697205686f568042e0b083b
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 5 10:10:34 2004 +0000

    bad code copy for alpha.. fix the member names

commit 3dcbc1f4a13e2f8d5ddb2a9ae8bc83c48a30a2b7
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 5 02:36:48 2004 +0000

    make the AMD64 check a compat thing

commit 4499ea42eae887c45403cd9ea364fccf311fee8e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 4 23:21:40 2004 +0000

    Fixup OS_HAS_AGP/OS_HAS_MTRR along lines of patches going to kernel, as
        suggested by Arjan..
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 3d9e16aa6e074fdaa7a74f2fb6b0c46f1dd04172
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 4 13:15:40 2004 +0000

    doh.. that makes no sense.. thinko in removal of OS_HAS_AGP

commit 8825579f1c23f5165270fa284e11efd62437e34a
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 3 14:54:53 2004 +0000

    file drm_core.h was initially added on branch drmlib-0-0-1-branch.

commit fba81d4482303ba0f88c07871635c8a6583257cb
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 3 14:54:53 2004 +0000

    file drm_agpsupport.c was initially added on branch drmlib-0-0-1-branch.

commit 0c955c00c7722bb611eac7876433f66e7d1d0e83
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 3 14:54:53 2004 +0000

    file drm_core_memory.h was initially added on branch drmlib-0-0-1-branch.

commit be11d2b18561fa4a3e55d178b925820c244a1b54
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 3 14:54:53 2004 +0000

    file drm_headers.h was initially added on branch drmlib-0-0-1-branch.

commit 91be7bd6de6a7958780bdb6886205ffe0287e7c3
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 3 14:54:53 2004 +0000

    file drm_memory.c was initially added on branch drmlib-0-0-1-branch.

commit b13574a0f38537958fb08006088ef3d9009a3ff7
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 3 14:54:53 2004 +0000

    file drm_memory_debug.c was initially added on branch drmlib-0-0-1-branch.

commit 02ab8dd7f7edaf6626ebb61320380fec3cb4da77
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 3 14:54:53 2004 +0000

    file drm_proc.c was initially added on branch drmlib-0-0-1-branch.

commit 9ed4e7854bb2e785412488a88a41df5659faad56
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 3 14:54:53 2004 +0000

    file drmcore_exports.c was initially added on branch drmlib-0-0-1-branch.

commit 838bb7af71b5730de55549a74c8198215c1f1475
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Sep 2 12:33:03 2004 +0000

    oops called ctor instead of dtor.. found this on the kernel merge

commit a070d15b530da87b835f4a439886eea3c606ac2f
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Sep 2 04:11:27 2004 +0000

    Fix ref count problem in stealth mode. pci_get_subsys() with last parameter
        set does the pci_dev_put for you.

commit 244b3e6c7cf61d3de56267e5813b0a1821ca0ac0
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 31 05:02:23 2004 +0000

    Apply patch from Bryan Stine bugzilla #1227

commit da6b44849763fac5ccb7d7511128454c6c2a92c7
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 30 11:34:51 2004 +0000

    implement drm_core_check_feature and use it .. looks lots nicer

commit 7809efc8c32520e6b25c143ee3276edbf534ed14
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 30 09:01:50 2004 +0000

    drm-memory patch, cleans up alloc/free and makes calloc look more libc like

commit 08de6e5b04c1950a5f396315e59d2476726e26d8
Author: Erdi Chen <erdi@freedesktop.org>
Date:   Mon Aug 30 04:58:24 2004 +0000

    Fix copy_from_user return value ignored warning at via_dma.c:168.

commit 0844f3e9f37bacf650fab4953482923e9480aae3
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 29 12:39:17 2004 +0000

    add context include so fn are defined

commit b9c82926bc5fe91cac9091a5af3f68b797bd95d1
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 29 12:37:11 2004 +0000

    fix up some small things ffb (no idea if it works or not ..)

commit 55c6e72306efd960eb28870c8f7520360275d444
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 29 12:17:26 2004 +0000

    remove hacky context thing that was gamma only

commit 1430163b4bbf7b00367ea1066c1c5fe85dbeefed
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 29 12:04:35 2004 +0000

    Drop GAMMA DRM from a great height ...

commit 6916572c1c32cd030258ab917f0a568517d5006b
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Aug 29 10:09:23 2004 +0000

    fixup issue caused by fntbl-2 merge

commit 4a89c75456b1d7d0dd20bae0e0f5dd47bdc5417e
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Aug 28 23:59:51 2004 +0000

    Initialize pdev to NULL correctly so that pci_get_subsys() will work.

commit 73e606753fcece20f905281d44067504d5f2fabc
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 27 09:14:30 2004 +0000

    run i915 through lindent

commit 019fd38a3c032774a1e80b3aed7de3710ba84e0a
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 27 09:11:07 2004 +0000

    __NO_VERSION__ hasn't been needed since 2.3 days ditch it...

commit 60f23ebc5cd5d78f594b20b2ddb330b5158c0902
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Aug 27 02:26:07 2004 +0000

    Make DRM detect vesafb and revert to stealth mode to avoid resource
        conflicts

commit e068fcbfddaf95e96be7999e1a66062fab6fcb46
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Aug 26 03:54:01 2004 +0000

    Rearrange things so that via_dma.c will compile with inline via_check_dma

commit d4dbf457813e97531ded3bf24f3b6ad421189c69
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 24 11:15:53 2004 +0000

    Merged drmfntbl-0-0-2

commit eac498baeaf9b57b448065b0fb9f4eeadbb9aa6b
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 24 10:43:45 2004 +0000

    addmap-base-2 patch from Jon Smirl:
    sets up the DRM to have the ability to have permanent maps while the driver
        is loaded...

commit 25e319c1ef5b6c002ddfe55338cd920240cc1dad
Author: Erdi Chen <erdi@freedesktop.org>
Date:   Tue Aug 24 01:44:37 2004 +0000

    This patch adds three new ioctl's to the VIA Unichrome/Pro DRM driver:
        DRM_IOCTL_VIA_DMA_INIT DRM_IOCTL_VIA_CMDBUFFER DRM_IOCTL_VIA_FLUSH
    The first ioctl sets up an area in AGP memory that will be used as the ring
        buffer. The second ioctl copies a command buffer from user space memory
        to the ring buffer. The third ioctl waits for engine idle until it
        returns.
    The motivation for this patch is to avoid the wait for engine idle call
        before each buffer flush in the current DRI driver. With this patch,
        the DRI driver can continue to flush its buffer as long as there is
        free space in the ring buffer.
    This patch adds an additional copy operation on the command buffer. This
        buffer copying is necessary to support multiple DRI clients rendering
        simultaneously. Otherwise, more CPU time will be spent in the busy loop
        waiting for engine idle between DRI context switch. Even in the single
        client case, the tradeoff is reasonable in comparision to the kernel
        call to check for free buffer space for the client to render directly
        to the ring buffer.

commit 7fe4f607681e9a5593e91915953a9b6c45e5f08c
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 23 10:05:01 2004 +0000

    set pointers to NULL after freeing, remove some extra debugging

commit 5c9ed8309493acb099463d25b32fabb5b7c004af
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 17 13:10:05 2004 +0000

    Merged drmfntbl-0-0-1

commit 93e8c201afac565942f9d3523ac808d3220d6d0e
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 17 11:24:50 2004 +0000

    preparation patch for radeon permanent mapping registers/framebuffer makes
        dev_priv live always, and add AGP detection in kernel patch:
        radeon-pre-2.patch From: Jon Smirl

commit 02ef96053ccbe4c20827ec8006455906e7fb2360
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 17 10:36:46 2004 +0000

    2.6.8.1 has changed the links in /lib/modules

commit c360d6f4f2075c90d42b109e3da932ac5d69699c
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Aug 15 15:46:28 2004 +0000

    Fix warning about unused ddev variable

commit 23bbff24aa427d6d0c16707dbe99c28ba2075894
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sun Aug 15 15:35:14 2004 +0000

    Add dev to DRIVER_CTX_DTOR( dev, pos->handle) so that sis driver will
        compile #if 0 get_pci_driver use in hotplug function until fbdev work
        around is written

commit 740ddb9c5d5506bc921d10742cf41b5aa143f84e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Aug 14 00:56:34 2004 +0000

    Remove unused pcigart/sg header stuff from i915 driver.

commit dd83f39f034756e7eb8e002dbfb0047f88aa79e4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Aug 14 00:46:15 2004 +0000

    Add a "dev" argument to DRIVER_CTX_[CD]TOR. This will be used in an
        upcoming commit for the SiS driver.

commit 2376ec4ef8d280cf6fba44ba0163989eff739187
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Aug 14 00:03:32 2004 +0000

    Hopefully proper fix for corrupted driver name in memcontrol list.
    Reported by: Jung-uk Kim <jkim@niksun.com>

commit 211c37e250af6f8645a247ef1cce4dee041f3fd1
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 13 23:32:39 2004 +0000

    Fix apparent copy'n'paste-o of the card attributes commit that broke the
        FreeBSD build.

commit d78db7c930c4652f45584098747efa8feb4cd280
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 13 23:17:17 2004 +0000

    Enable MTRR usage on AMD64, and use DELAY() instead of rolling our own
        udelay code.
    Submitted by: Jung-uk Kim <jkim@niksun.com>

commit fd62869a0f600f2fd477d5aa365f7732686f5542
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Aug 11 23:23:35 2004 +0000

    Bug #979: Don't include <sys/sysmacros.h> on linux, it occasionally emits
        makedev() as a function call that elfloader can't resolve. Originally
        Gentoo Bug #41962, reported by Ryan Breen, fix feedback from Ryan
        Lortie.

commit ecf1458b2ce431227807b07844b44e8c9171636d
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Aug 11 09:07:36 2004 +0000

    minor patch from Jon Smirl : sets up some things for later use

commit 9277f9eef388ffef26000ab455d30260bdf41c93
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 10 11:14:07 2004 +0000

    Patch from Jon Smirl to add attribute field to the pciids, and use this for
        certain radeon combinations - intel drivers can probably use this for
        dual head capable devices etc..

commit 42e91874608f28246367207815eb7334574d7aa7
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Aug 4 10:56:48 2004 +0000

    2.4 compat

commit be3e54bc15aadf26743a8d0150b8fa38952863b4
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Aug 4 10:53:21 2004 +0000

    2.4 hotplug compat

commit 6c9715eaf502587c58acfaea420a4fdf29bd7221
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 3 11:26:38 2004 +0000

    bring over fix from i865-agp branch, it now probes the driver, X hangs
        box..

commit 4f8f02a1922653b2ce5c115c4469e927b5d826fa
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 3 09:21:11 2004 +0000

    fix for drm in /proc - from Jon Smirl

commit 33b740ad9946ce6fdedeed45287e488f95fb7b42
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 2 11:45:23 2004 +0000

    forgot to check these in.. thanks to Jon for reminding me ..

commit 5e7e41819eb4d4b18201bbb46d0c6e359c4039cd
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Sat Jul 31 15:45:00 2004 +0000

    Add a hotplug event to DRM. Parameters match the ones from the general PCI
        hotplug event plus the addition of one requesting RESET. Put your
        scripts in /etc/hotplug.d/drm to run. kernel class_simple generates the
        ADD/REMOVE events. No cards currently request RESET, the flag is there
        to stop you from resetting your boot display.

commit bd71ba642890856aff339482a9422ecea1ef55d1
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 31 08:38:39 2004 +0000

    patch from RH xorg-x11 tree ported to drm.h

commit cc4d03930ce753302a88fc9722473a5d9fac7b44
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 31 08:12:39 2004 +0000

    Patch picked up from Redhat xorg release:
    Patch by John Dennis <jdennis@redhat.com> which fixes DRI locking bug on
        ia64 architecture.
        https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=104338
        http://bugs.xfree86.org/show_bug.cgi?id=778

commit eb3d0635d4830969d10d5fe8aef17cebb2f3fd15
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 31 07:26:52 2004 +0000

    fixes for using userspace pointers found by sparse utility
    From: Dave Airlie

commit dc4508c33845602e4c94c3e125536d01fe9110b1
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 31 07:25:58 2004 +0000

    athe patch below optimises the drm code to not do put_user() on memory the
        kernel allocated and then mmap-installed to userspace, but instead
        makes it use the kernel virtual address directly instead.
    From: Arjan van de Ven <arjanv@redhat.com>

commit 1cec18a5cd3bcd37aab71c255d63fd394143bc5e
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jul 29 13:00:48 2004 +0000

    add read/write 16

commit b1cf4ca7e540bcf28beaf3f5a70915a810a75b1b
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jul 29 12:49:54 2004 +0000

    change to agp not pci ... still not working

commit 0b02bf9d45b70af3b7e236526143c7b78a6fca8b
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jul 29 11:09:22 2004 +0000

    initial port of i915 to BSD, not finished doesn't work.. no idea why...

commit 862fcee057a4602a0a9fdc54266f63fe33b0fd8b
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jul 25 08:57:15 2004 +0000

    check for __user if not there define it

commit 02df04d71d373f1f779ebfd5d383a704ebb397ee
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jul 25 08:47:38 2004 +0000

    sync up with current 2.6 kernel bk tree - mostly __user annotations

commit 1f132b7849c453d3aebd227866f743cbcf7f3881
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jul 25 05:52:22 2004 +0000

    whitespace merge with kernel

commit c54ba5691a573ba273498217323f19c35b1637d8
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jul 25 05:41:44 2004 +0000

    if the driver has already register don't do another intermodule register

commit 6ba31fb4813116e94f8fc94574ffd81743cf8832
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jul 25 05:36:45 2004 +0000

    Patch from Tom Arbuckle for missing bus_address

commit 1e5354e867d1dde8c86273e7434f49b57779ef36
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Jul 23 16:12:27 2004 +0000

    Correct a couple of packet length calculations.

commit 6ed7e36f4c6933cc29b0f5c8cb810490dd93a8fc
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jul 22 12:07:13 2004 +0000

    another logic error returns 0 or greater for success

commit ea2155a2e1c31f634d80701a00fb19af6d3402c3
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jul 21 09:36:16 2004 +0000

    ATI Rage 128 and Radeon DRM unconditionally depend on PCI
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>

commit c9911beb0957c7ccf93c73f77f349f3f8788b526
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jul 21 09:30:43 2004 +0000

    add some more debugging fix ++ and --

commit a776c5ec0464e264bba3f3a4794a067d3c667097
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jul 20 12:43:12 2004 +0000

    first set of __user annotations from kernel (Al Viro)

commit b35cba47d5e927c3ff1944fadef1816b9b1e1dd7
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jul 20 11:48:25 2004 +0000

    Add NULLs instead of 0 for i915

commit 9266bf53019b29a92c7e6c65e7b89bdae365b70d
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jul 20 11:35:29 2004 +0000

    Kconfig update add i915 bring over some stuff from kernel

commit b20b00d4bc49534ba6e3695fb05cfc240bd3f0af
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jul 20 11:26:13 2004 +0000

    add x86_64 architecture defines from kernel (leave AMD64 defines in for
        backwards compat)

commit fdb6ae31cb721a928d058d7419444f55eb60a542
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jul 20 11:22:26 2004 +0000

    fix some more NULLs from kernel

commit 7ee263b94f77cadab659207344c82d5528d498cb
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jul 20 10:59:02 2004 +0000

    attempt to clean up stub_register, register_chrdev isn't good enough to
        make the decision for multiple cards with one drm ..

commit 8efddd01e8a2254b4ed00dff0d55827b6f2b35ce
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jul 15 13:03:55 2004 +0000

    sparse cleanups from kernel: Al Viro

commit bb5112b616080033ab9f09092098527f2aa09b70
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jul 14 12:34:55 2004 +0000

    Fix reference counting for stub for new Linux PCI probe

commit e86fc9f47f05f47375d5a306fe979012e3b7e8e4
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jul 14 12:14:37 2004 +0000

    allow O= usage for Linux 2.6 kernel building in another directory

commit 6c16cbd40469d2690b293ef854de7a1f7246b998
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jul 11 10:17:34 2004 +0000

    split out backwards compat into a separate file makes it easier for merging
        to 2.6

commit f9e2fe84700c155a744d7ae3db4ebe12d5db9b10
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jul 11 09:58:49 2004 +0000

    fix issue in 2.4 kernels with returning NULL from this function

commit 6e4bf5ead5a342426020a1d48d93b8deae2a9e73
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Thu Jul 8 20:18:10 2004 +0000

    Add two items to Makefile clean XFree86 bug: Reported by: Submitted by:
        Reviewed by: Obtained from:

commit 8696e71db2d79eb318c00abde625d7b61d6800a1
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Jul 7 04:36:36 2004 +0000

    Make drm/libdrm/xf86drm.c match
        xc/xc/programs/Xserver/hw/xfree86/os-support/linux/drm/xf86drm.c so
        that it matches the prototypes in xf86drm.h XFree86 bug: Reported by:
        Submitted by: Reviewed by: Obtained from:

commit deed1eca099eab19f48e40a5b0e7c15c2304b3d4
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Jul 7 04:22:17 2004 +0000

    Add xf86drm.h back to drm/libdrm until it's true home can be found.
        mesa-solo needs this file to build. XFree86 bug: Reported by: Submitted
        by: Reviewed by: Obtained from:

commit eaccc05b267670a0934675064e37bbd590e1028e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Jul 6 00:25:19 2004 +0000

    Fix module loading on alpha by not referencing MTRR symbols on
        !__REALLY_HAVE_MTRR.

commit 694291fbd39e0e6ad9a9698794485003648c7fd0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Jul 6 00:23:42 2004 +0000

    MFC as of 20040705: dev_t -> struct cdev * change.

commit f3527e9256ab6494e3bffebfa29d870891266c4c
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jul 5 12:10:25 2004 +0000

    align with kernel

commit 3c9fb37e655f5556c9c002535f1a85c4f248fb2c
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jul 5 11:56:51 2004 +0000

    fixes from kernel for 0 vs NULL - mika

commit 4cfd0d5ceed49f834a09b22756c100b77bcfa327
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jul 5 11:44:30 2004 +0000

    whitespace align with kernel

commit 87832bc81a56ad8abb135628ac906ba9aa4a155b
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jun 21 11:46:52 2004 +0000

    fix bug with pci_disable_device in the wrong place (Paul Mackerras) remove
        hack code from me..

commit 1ee210e3b5b2d0b9101e371ec1401cdc34b2f25d
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 12 02:30:52 2004 +0000

    dirty hack to make mach64 work, (don't worry I'll get around to fixing it
        asap..)

commit 373d67702c1fd6c6258ce03d3fb4fc167ff947cb
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jun 10 12:48:35 2004 +0000

    A few changes for recent redhat.

commit 0faa00ae648647b93202b1726864787e383a2ede
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jun 10 12:47:50 2004 +0000

    i915 drm module

commit 291ffeae9a2b95cf35835ddd0f25e434e4c26f44
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jun 10 12:45:38 2004 +0000

    i915.o drm driver

commit 78d0fd6526bb725151d8dce86006af7616ee4758
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 10 09:43:53 2004 +0000

    gamma_dma_priority and gamma_dma_send_buffers both deref d->send_indices
        and/or d->send_sizes. When these functions are called from gamma_dma,
        these pointers are user pointers and are thus not safe to deref. This
        patch copies over the pointers inside gamma_dma_priority and
        gamma_dma_send_buffers.
    Submitted-by: Robert T. Johnson <rtjohnso@eecs.berkeley.edu> Signed-off-by:
        Dave Airlie <airlied@linux.ie>

commit cfa5bf31290edad723e1ce388d3840f495f3ccff
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jun 7 01:42:35 2004 +0000

    The dev->devname being passed to request_irq in drm_irq.h is null. With the
        old DRM interface, the devname was set in DRM(setunique), but with the
        current DRM interface >=1.1 the devname is not being set in
        DRM(set_busid).
    From: Alan Swanson Approved-by: Dave Airlie <airlied@linux.ie>

commit 52e3a8a5d9ac8e91eb66872a008d1f7d5d67a326
Author: Ian Romanick <idr@us.ibm.com>
Date:   Wed Jun 2 17:41:52 2004 +0000

    Added some comments copied from xf86drm.h.

commit f994b1f31bb64f0fb56a778c350b6ff05c93501f
Author: Ian Romanick <idr@us.ibm.com>
Date:   Tue Jun 1 16:17:32 2004 +0000

    Replace size_t with an ugly, ugly hack. This was done so that code in the
        core X-server would compile. Hopefully, this will soon be replaced with
        explicitly sized types (i.e., uint32_t) and everyone will be happy.

commit 024fd4b15022236fe3f79eba23fec5d6177d0cb4
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun May 30 23:38:08 2004 +0000

    2.4 compat

commit 412f9909c6127db1ab03716f74cc51c4ac3a603e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun May 30 23:34:23 2004 +0000

    fixes from kernel: Make users of page->count use the provided macros

commit 43c244ebbad842d0ebf3756376bfc6ab1fd11b9f
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue May 18 23:30:46 2004 +0000

    fix whitespace issue in previous patch

commit aa142ff1b5ac1488221830bb9b512c2d22f6675f
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue May 18 23:03:22 2004 +0000

    add R200_EMIT_RB3D_BLENDCOLOR state packet to support GL_EXT_blend_color,
        GL_EXT_blend_func_separate and GL_EXT_blend_equation_separate on r200

commit 8350382cb1a5aba150c411be3b662dfe444cb84a
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue May 18 09:46:31 2004 +0000

    another 2.4 fix

commit df6c37fc88c659691230d1f589aff93e69e6c63e
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue May 18 09:42:22 2004 +0000

    2.4 compat fix

commit 13894755a74454187f2c84f553b5b9d4a83fb7e3
Author: Erdi Chen <erdi@freedesktop.org>
Date:   Fri May 14 23:54:31 2004 +0000

    Add PCI id entry for VIA CN400 (UnichromePro) chip. XFree86 bug: Reported
        by: Submitted by: Reviewed by: Obtained from:

commit 853adb8be338de113301d7db3c10058476f3bff7
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue May 11 04:43:43 2004 +0000

    Merge from FreeBSD-current. Mostly 64-bit cleanliness fixes, but a few
        driver interface changes from -current.

commit 485b259b4492ed6b7abdf063d1d5cefe01d3a3b0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue May 11 04:23:02 2004 +0000

    Add missing DRM_ERR()s.

commit a1160ba2793b6c17a8aeb31b0d4cc17f3439cf9a
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon May 10 11:16:26 2004 +0000

    do some real testing and fix the DRM initialising and unloading

commit c47b611b08327da4a5249d222079be07c26fb2ff
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun May 9 22:36:19 2004 +0000

    Add mach64 DRM module for BSD (untested, but compiles).

commit dfdf8e14d3f8e4ceb0cad396efc8b4ecb587d5f6
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun May 9 22:29:55 2004 +0000

    Add .cvsignore files.

commit 51ed2f593703164b7bb7f9d0522f273f3f628c03
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun May 9 22:16:11 2004 +0000

    Warning fixes.

commit d477cc007cacbf95d7db295f579e23fafb423f02
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun May 9 22:14:07 2004 +0000

    - Link in shared files as necessary and clean them up.
    - Generate drm_pciids.h automatically.

commit c093a03d47a50c5f178caff6dd20f7c03cddeb40
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun May 9 22:07:58 2004 +0000

    Catch up with sis's DRM tag change.

commit 7bfce0c357360ef3035b6782d48d93a2ad40bd22
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun May 9 21:59:36 2004 +0000

    Remove after repocopy to Makefile, now that we don't have to worry about
        conflicting with imake's output.

commit b9dcb5b18713e6fe12130f780535d1b56b8b89cf
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun May 9 21:57:58 2004 +0000

    No /bin/bash on BSD.

commit 29f2b1c1cfc13ffc3176d049eb7f235604c70cb1
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun May 9 21:56:19 2004 +0000

    drm_hw_lock_t is now defined in drm.h, remove from here.

commit a2f7a9fa5f7a5dacbc9e04d132f26dd70201fb45
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun May 9 06:45:17 2004 +0000

    Commit sysfs and drm PCI changes for 2.6 kernel

commit d7e777b696e55def668834d4fcfff94b1a89cc54
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun May 9 06:36:55 2004 +0000

    make drm pciids

commit 0b481856dd30fce905759e470b0abff4e186782e
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon May 3 00:06:04 2004 +0000

    use drm.. not dri for class...

commit a9d2438999b79419772a00d0deb1caab30334765
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun May 2 13:03:51 2004 +0000

    fix 2.4 build

commit a3612f450be04ca73e5acb3afc4eff65194612df
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun May 2 12:27:17 2004 +0000

    better device class support from Jon Smirls patches..

commit 06332524b5c023db2a6952c25c5bc8a905b093cb
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Apr 26 06:43:53 2004 +0000

    add another tdfx

commit d40443534c3cab2ea1435556c85ef38503eb63ac
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 22 12:41:43 2004 +0000

    Add __user annotations from kernel

commit 87812e82f45d5ca81fd0603d6bd54854831c9174
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 22 11:31:55 2004 +0000

    add sparc ffb files from kernel just to keep things in sync

commit 0edc2abf8414f6fa414aa4071f4fa9ccbee186a7
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Apr 21 23:45:18 2004 +0000

    add new files to generate pci ids

commit 2d9bbba0e10642a149297498c4e03fc43bac1280
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Apr 21 12:18:42 2004 +0000

    bug from Linux kernel list caught by checker

commit 93bd67ef62e95a32f8b7e2fd7d9dadee52664160
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Apr 21 12:13:31 2004 +0000

    centralise pci ids into one place and use scripts to generate files for
        kernel

commit 0f32a8852712e405f64c5917bcebefc441aa1ba3
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sun Apr 18 22:59:01 2004 +0000

    Move Makefile.linux to Makefile.
    Get rid of Makefile juggling hacks which are no longer necessary.

commit 6f6d2a553a776068a53332e409fa19e83f6be964
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Mon Apr 12 10:18:18 2004 +0000

    1. Added a PCI ID.
    2. Big change to the XvMC part of the SAREA. OpenGL clients will not suffer
        from this, and via XvMC is still alpha. Needed to make future additions
        to XvMC (More decoders and overlays) possible.
    3. Bumped version number to 1.3.0.

commit 6fa5c5d958688fba801bc08e75345edd51bf27c7
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Apr 12 05:44:16 2004 +0000

    more files for mach64

commit 873e1c4d38c78e8b4a5df42d983f285cfb3ae4cc
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Apr 12 05:27:40 2004 +0000

    Add mach64 to the trunk

commit 7e39628577d7478644c51bba2ef1d5e2e029bbbb
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Apr 10 16:20:00 2004 +0000

    Have CVS ignore some files produced by the build.

commit 3306abbde7565596528e863d2cf906a4a49f3271
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 10 13:52:43 2004 +0000

    white space changes to align with kernel

commit 7e0f883501ad11d16762763a555a9502f76ffba3
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 10 13:25:30 2004 +0000

    include highmem.h

commit 2b0292c73995a4892812fe632abdaf46c49279e0
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 10 12:58:18 2004 +0000

    update gamma_dma with patch from davej in 2.6

commit e375a3dc10eb8945e05577df8b40072dfffaba81
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 10 08:15:48 2004 +0000

    patch from Andrew Morton tree from Arjan van de Ven fixes some oopses seen
        with 4G/4G split

commit 23ec8875fce631e4554a72161937dca735c2d675
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 10 07:41:19 2004 +0000

    align code with Linux kernel.

commit 6aad146173e2442eb0dbb10d02ddcd8a62808937
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 10 07:39:00 2004 +0000

    remove unused code

commit fd473357980b9ba40bef089aadb78136faaa2008
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 10 07:36:30 2004 +0000

    update from linux kernel for ia64

commit f673c9280c2691063534062fb9fdea74ad85b18a
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Apr 9 00:21:43 2004 +0000

    remove Imakefile

commit 596cf634ae9be821c90688f982ae84b6145696c9
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Apr 8 23:22:05 2004 +0000

    fix build problem

commit ce601f364723ad361706be59fb7e09d9f6ca444a
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Apr 8 23:19:15 2004 +0000

    disable PCI DMA ioctls as they are not used currently until SAVAGE_CMD_DMA
        is made to work.

commit c47597b484866deb7698eb5575348ecd83088314
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 8 14:15:36 2004 +0000

    big whitespace .. this aligns all the whitespace in this file with the bk
        checkout linux tree

commit 13724f032e127fbaf6d47bb2b6ba8933df23ffe8
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 8 13:11:04 2004 +0000

    2.6 sysfs patches + stubs in drmP.h for 2.4 compatibility

commit c3e2685e822f70976fa57db2955cdd98dc5730f4
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 8 12:25:31 2004 +0000

    long dev_t patches from 2.6 tree

commit 9cff4b45e77c9259a4161ddb55564336f8b99361
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 8 12:22:22 2004 +0000

    2.6 patches for larger dev_t

commit 3e0f3c1fbb9b10bcc8e037f79f25d5e491dcfd91
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 8 12:20:39 2004 +0000

    more 2.4 compat fns

commit 1bc7576474a85b649e2f3291d72890363e6d1483
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 8 12:09:10 2004 +0000

    patch from Linux kernel 2.6.5

commit bc1428035ceb5300df429d09a64a20a2a7e903b2
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 8 12:05:25 2004 +0000

    fixes from Linux kernel

commit ee2889ec0d2f8b6138f916df3c3d8b7e208cc1f7
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Apr 8 11:26:52 2004 +0000

    patch from lk

commit 994fa063cd3ad2f55ea26beef7e31403c68ae78a
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Mar 31 22:05:57 2004 +0000

    VIA module fixes:
    1. Fixed up PCI-id's.
    2. Fixed 2.6 warning in kernel Makefile.

commit 20163c2b10f5a1d9c8647f5592ac11e4e9867dfc
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 26 15:52:11 2004 +0000

    copy correct Makefile

commit 9b7bf9127e94e0c57a760aacef15db0ae3d6f1b3
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Fri Mar 26 13:42:48 2004 +0000

    Added via driver to drm/linux/Config.in Reported by: Terry Barnaby

commit 1da595d797f797ff071d98ebf6a4eaad38bb1347
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Mar 24 23:22:22 2004 +0000

    Exported symbols cause compilation failure of via_mm.c on 2.4 kernels.
        Added via_mm.o to export-objs:
    Reported by: HMX, Via Arena Forum

commit b15deb239213d28f28a50abe44204836f64d7aed
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Wed Mar 24 10:07:37 2004 +0000

    Modified linux/Kconfig to include the via drm driver.

commit 89d67d90873d1baff48fbd671d5b3a4cb354ada5
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Mar 23 21:14:17 2004 +0000

    Merged via-1-2-0: Altered Makefiles in drm/linux

commit 6cd8831f7accbcc3efb019d7d288c5b6cc28a230
Author: Thomas Hellstrom <unichrome@shipmail.org>
Date:   Tue Mar 23 21:08:48 2004 +0000

    Merged via-1-2-0

commit 681da75af9837fd433d4773c86df52de1c8dba60
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Mar 23 11:17:03 2004 +0000

    make sure in DRM toplevel

commit dfc71cbd42fe4b4b445bd16087c05e525c38f509
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Mar 23 11:06:47 2004 +0000

    initial shell script to create linux kernel drm from the DRI one

commit ab66cbc1c5403129b2510208e02146bb062d7b76
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Wed Mar 17 01:03:26 2004 +0000

    Adjust shared path in makefile XFree86 bug: Reported by: Submitted by:
        Reviewed by: Obtained from:

commit 537ac1a39e16c2fe1d1ac513666a4f95798b3c08
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Mar 16 00:59:24 2004 +0000

    Makefile the makefile really clean everything XFree86 bug: Reported by:
        Submitted by: Reviewed by: Obtained from:

commit 0b6f155dbdfe661142307a72aa07a52bde6ec08f
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Tue Mar 16 00:52:24 2004 +0000

    Add a missing ifdef CTX to get rid of the waring in the gamma driver build.
        XFree86 bug: Reported by: Submitted by: Reviewed by: Obtained from:

commit 24115068e465cf0d788d870a3c1c24bb68a9cb14
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Mar 12 21:22:52 2004 +0000

    Fixes need to clean up the mess I made with the mesa merge. This code
        allows the mesa drivers to use a single definition of the DRM
        sarea/IOCTLS located in the drm driver directory. Adjustments were made
        to the 2D drivers to not include these changes. Changes to the mesa
        copy of DRM were copied to the DRI copy. XFree86 bug: Reported by:
        Submitted by: Reviewed by: Obtained from:

commit f47ed991432672b7353e73b9d3194f255b957bee
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Feb 28 14:29:44 2004 +0000

    Remove extraneous code accidentally added with revision 1.86

commit b61f07def349644ec8077cb12b303d444e223c1b
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Feb 28 11:52:19 2004 +0000

    More differentiated error codes for DRM(agp_acquire)
    Obtained from: Linux kernel

commit ce21dca4aaecac73490f26491b8f06a74d0ee0f5
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Tue Feb 24 14:24:07 2004 +0000

    Use DO_MUNMAP_4_ARGS macro defined in Makefile.linux (Steve Holland).
        Silence a warning about a format-argument mismatch in printk.

commit 3dea36d8437726fd57cc006e351ed8982b091d76
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sun Feb 22 16:20:16 2004 +0000

    Merged the Savage DRM driver from the savage-2-0-0-branch into the trunk.

commit d0031f22cfecc2cce512aae66bedc9fe337f5d97
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Sat Feb 21 19:54:51 2004 +0000

    Conditionally add definition of list_for_each_entry_safe for kernel
        versions that don't have it.

commit 82157579b586c8f1e147250e09f0837214019680
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Feb 20 22:55:12 2004 +0000

    drm_ctx_dtor.patch Submitted by: Erdi Chen

commit 213247a4416b959738a658f2217d4d01ae9c1e67
Author: Michel Daenzer <michel@daenzer.net>
Date:   Wed Feb 18 20:56:58 2004 +0000

    Fix sisfb header location for 2.6 kernels
    Submitted by: Andrew Morton

commit 2b9c12ef83b8de5acba782918212f7fa250c9e45
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sun Jan 11 00:14:28 2004 +0000

    Adapt to nopage() prototype change in Linux 2.6.1.
    Reviewed by: Arjan van de Ven <arjanv@redhat.com>, additional feedback from
        William Lee Irwin III and Linus Torvalds.

commit 0dea4de28873252221d40e3597997f6d0141171d
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Jan 10 20:59:16 2004 +0000

    Make sure that all state packets are handled in
        radeon_check_and_fixup_packets()
    Fix state packet IDs of R200 cubic offsets

commit 7b62ed9aed8794e9efe0059dbf37bc41dc691323
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Jan 10 12:28:06 2004 +0000

    R200_PP_CUBIC_OFFSET_F1_[0-6] state packets only contain 5 offsets, not 6
        (thanks to Andreas Stenglein for spotting this)

commit fb7b802ddaa1440fdba829eff5373c7d9425f582
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Jan 6 04:54:25 2004 +0000

    Fix some misuse of NULL where 0 is intended.
    Obtained from: FreeBSD CVS

commit 9fb6986e83a84f6b958e8aba2c20b5988676bd55
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Dec 16 08:57:08 2003 +0000

    Don't ioremap the framebuffer area. The ioremapped area wasn't used by
        anything, and took up valuable KVA. While I'm in the area, clean up BSD
        MTRR stuff some more.
    Suggested by: jonsmirl

commit 5285b029876a4d3122ae72cc3d81ca8d184ed9ca
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Dec 16 07:39:43 2003 +0000

    Add a collection of Radeon and R128 PCI IDs, including the IGP chipsets.
    Submitted by: Donnie Berkholz <spyderous@gentoo.org> (mostly)

commit 64006ef86b329183599b06da7705bb0b294a1c1a
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Dec 8 16:33:08 2003 +0000

    Add i865 pci id

commit 6e56c39371a551af1e05e53231162e0fc42c6ce0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Nov 12 20:30:51 2003 +0000

    Fix a locking nit, and add asserts in some things that should be called
        with locks held.

commit 1f7598245af7e73b34130a44fbaac230e29d7aad
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Nov 6 04:48:06 2003 +0000

    Return EBUSY when attempting to addmap a DRM_SHM area with a lock in it if
        dev->lock.hw_lock is already set. This fixes the case of two X Servers
        running on the same head on different VTs with interface 1.1, by making
        the 2nd head fail to inizialize like before.

commit 2c1172a31794e20f7ba1a2ab234d4dab2f84005b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Nov 6 04:35:08 2003 +0000

    Remove unused variable.

commit a41a479f74f3fadf1539d1adaefb933ba9a6112c
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Nov 5 20:47:28 2003 +0000

    Changes to DRM(irq_install)...... wrap dev->dma usage with __HAVE_DMA in
        irq handler, fixes kernel ooops. comment out some setting of flags that
        are done in DRM(setup) (not sure why both of the above is done in the
        irq handler)

commit 66c9e3053f857df340a982edaa8ea57b229efeed
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Nov 5 08:13:52 2003 +0000

    - Tie the DRM to a specific device: setunique no longer succeeds when given
        a busid that doesn't correspond to the device the DRM is attached to.
        This is a breaking of backwards-compatibility only for the
        multiple-DRI-head case with X Servers that don't use interface 1.1.
    - Move irq_busid to drm_irq.h and make it only return the IRQ for the
        current device. Retains compatibility with previous X Servers, cleans
        up unnecessary code. This means no irq_busid on !__HAVE_IRQ, but can be
        changed if necessary.
    - Bump interface version to 1.2. This version when set signifies that the
        control ioctl should ignore the irq number passed in and enable the
        interrupt handler for the attached device. Otherwise it errors out when
        the passed-in irq is not equal to the device's.
    - Store the highest version the interface has been set to in the device.
    - Fix a recursion on DRM_LOCK in irq_uninstall on FreeBSD. This leaves
        irq_uninstall being done without the lock in some cases, but it was
        racey anyways.

commit 19ee64add26773f4436440f8fa405a1011eea4c4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Nov 5 02:42:56 2003 +0000

    Use int64_t instead of s64 -- fixes FreeBSD compile, works on linux.

commit 8feb046d8c3c9d531e25c3f854b94593f0a1964b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Nov 5 02:41:50 2003 +0000

    Args for the BSD DRM_PUT_USER_UNCHECKED were swapped.

commit e8f5b01a4087fac1e44f9f34894dc20a1cbf1e49
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Nov 5 02:08:31 2003 +0000

    __linux__ is spelled with a lowercase 'l'

commit 5864101ab4400aad6ca936bc94000a4607851bb3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Nov 5 01:43:47 2003 +0000

    Repo-copy linux/drm/kernel/drm.h to shared/drm/kernel/drm.h and use it on
        both Linux and *BSD.

commit e5cad7fced023e9ad6395147d6fff7ba28f11d17
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Nov 5 00:49:35 2003 +0000

    Remove buf_alloc which is unused since the locking commit.

commit 27f9c5f01659bb643db00ffb17c140ae3bd99df8
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Nov 4 00:59:52 2003 +0000

    build fix

commit 2655ccddf4c026f37dcc76754cdfde6f0a4a4c86
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Nov 4 00:46:05 2003 +0000

    Memory layout transition:
    the 2D driver initializes MC_FB_LOCATION and related registers sanely
    the DRM deduces the layout from these registers
    clients use the new SETPARAM ioctl to tell the DRM where they think the
        framebuffer is located in the card's address space
    the DRM uses all this information to check client state and fix it up if
        necessary
    This is a prerequisite for things like direct rendering with IGP chips and
        video capturing.

commit 84dfe702e27e0ef22801f8fe366120bea90adf4f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Nov 3 05:11:04 2003 +0000

    Add i852/i855 PCI ID. Also fix whitespace in the other ID definitions.

commit 3f7279cb8ec1d4e65028df955ae17b8081940b4f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Oct 27 22:05:38 2003 +0000

    Add a DRM_PUT_USER_UNCHECKED, which will be used by an upcoming radeon
        change.

commit 2423fedcc8d57d02ccf7aa1209a4b31f248792a7
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Oct 24 21:49:28 2003 +0000

    Don't try to use dev->dma_lock unless dma is initialized (dev->dma != NULL)
        in bufs_info sysctl handler. dev->dma and dev->dma_lock existence are
        protected by DRM_LOCK(). Fixes panic on sysctl hw.dri when the device
        is uninitialied (when you aren't in X).

commit e4a2a9c04024972f21cdf0620f6faa6de157686d
Author: Jon Smirl <jonsmirl@yahoo.com>
Date:   Fri Oct 24 17:40:54 2003 +0000

    Switch pci enumeration call to work on both 2.4 and 2.6 pci_for_each_dev is
        not supported on 2.6

commit 451a1d3f69a8d19c24382ef2b483517e9ef2c9f6
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Oct 24 00:59:31 2003 +0000

    Move the REALLY_HAVE_AGP endif above the mtrr functions. Broke tdfx module.

commit b79d1b341f876c982c1cde02e8aff6c675688b49
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 23 05:56:13 2003 +0000

    Move to "old-style" probing as documented in linux/Documentation/pci.txt.
        This should resolve the probe problems with radeon framebuffer due to
        pci_driver attachment being exclusive.

commit 69d038eb4989772b9b21736c821dd5abe8232260
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 23 05:52:19 2003 +0000

    Missed the sis.h header in Makefile.linux in the move to shared/.

commit 92429f6ebea629e8884eb53cb0c64aad555a4d76
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 23 05:51:35 2003 +0000

    The SiS300 pci id also covers the 305, so make the name reflect that.

commit 06cb132e86dc4a04044c3c76725ba3037008ab34
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 23 02:23:31 2003 +0000

    - Introduce a new ioctl, DRM_IOCTL_SET_VERSION. This ioctl allows the
        server or client to notify the DRM that it expects a certain version of
        the device dependent or device independent interface. If the major
        doesn't match or minor is too large, EINVAL is returned. A major of -1
        means that the requestor doesn't care about that portion of the
        interface. The ioctl returns the actual versions in the same struct.
    - Introduce DRM DI interface version 1.1. If the server requests version
        1.1, then the DRM sets the unique itself according to the busid of the
        device it probed, which may then be accessed as normal using getunique.
    - Request version 1.1 in libdrm's drmOpenByBusID, allowing the X Server to
        request based on a BusID. Introduce a wrapper for DRM_IOCTL_SET_VERSION
        and bump libdrm minor version.
    - Pass the busid in DRIScreenInit if libdrm can handle both a busid and
        name. This allows drmOpenByBusID to be used to find the DRM instead of
        just the driver name, which allows us in the future to tie a DRM more
        strongly to the device it probed to. Introduce a function
        DRICreatePCIBusID which creates a busid in the form pci:oooo:bb:dd.f
        similar to linux's pci_name() function. This matches the format used by
        the DRM in version 1.1. libdrm knows how to match both this format and
        the old PCI:b:d:f format.
    - Use the new DRICreatePCIBusID function in the *_dri.c to request the new,
        more exact busid format.

commit 86e6325e5ab848c15c422f20133445fe6c1caa09
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Oct 22 22:08:53 2003 +0000

    - Add DRM_GET_PRIV_WITH_RETURN macro. This can be used in shared code to
        get the drm_file_t * based on the filp passed in ioctl handlers.
    - Use this macro on BSD for simplification and improve its error reporting.
        Make failure to find the drm_file_t * print as an error, not debug.
        This failure may be part of the problem with KDE.
    - Make debug and error print macros include the pid on BSD.

commit 4e6ddcbb698c029b407d5dc43348c6e422a36705
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Oct 22 21:50:09 2003 +0000

    Fix warning about static DRM(bufs_info) defined but not used in the
        !__HAVE_DMA case.

commit ea7b4fdc225ebbbfd77f875fd3bfcfbdcfa9a1f7
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Oct 20 05:09:21 2003 +0000

    Fix the possibility of sleeping with locks held in sysctls by copying the
        data into temporary variables with the lock held then outputting to
        sysctls with the lock released. Rearranged a little extra code to aid
        this. Note that drm_memory_debug.h hasn't had this fix applied, but I
        consider that code to be just about dead anyway.

commit 6b0424fdcdec9d12943718e4542659c8bca019da
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Oct 20 00:55:56 2003 +0000

    Clean up BSD MTRR handling. The NetBSD code is untested, but it's my best
        shot.

commit 0cf1887139eb1ce18d09f7be0567aa93d802040d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Oct 19 23:35:58 2003 +0000

    - SMPng lock the DRM. This is only partial -- there are a few code paths
        used by root (the X Server) which are not locked. However, it should
        deal with lost-IRQ issues on -current which I think people have been
        experiencing but I am unable to reproduce (though I understand why they
        would occur, because of a bug of mine). Note that most of the locking
        (DRM_LOCK()/UNLOCK()) is all covered by Giant still, so it doesn't
        matter yet.
    - Remove locking on FreeBSD-stable and NetBSD. These are covered by the
        fact that there is no reentrancy of the kernel except by interrupts,
        which are locked using spldrm()/splx() instead.

commit 59fbe01fea8f77fc3810643c14a1738d197d4291
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Oct 19 22:29:08 2003 +0000

    Clean up extra zeroing of dev->dma, and use calloc to take advantage of
        M_ZERO.

commit 63ce8af5550950b19db432230910e7a2424fa16f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Oct 19 20:06:03 2003 +0000

    Fix probing on 2.5+ kernels, which require that drivers have .id_table set.
        We use PCI_ANY_ID to ask that our probe is called for every available
        device.
    Submitted by: jonsmirl

commit 2950f9e6823d43abae151966ae808d1a63e6659c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Oct 17 05:13:48 2003 +0000

    - Move IRQ functions from drm_dma.h to new drm_irq.h and disentangle them
        from __HAVE_DMA. This will be useful for adding vblank sync support to
        sis and tdfx. Rename dma_service to irq_handler, which is more
        accurately what it is.
    - Fix the #if _HAVE_DMA_IRQ in radeon, r128, mga, i810, i830, gamma to have
        the right number of underscores. This may have been a problem in the
        case that the server died without doing its DRM_IOCTL_CONTROL to
        uninit.

commit ff58476011ba8fe72d65e884380d3d86710bfdd4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Oct 17 03:14:39 2003 +0000

    - Converted Linux drivers to initialize DRM instances based on PCI IDs, not
        just a single instance. Moved the PCI ID lists from <card>_drv.c in BSD
        to <card>.h. The PCI ID lists include a driver private field, which may
        be used by drivers for chip family or other information. Based on work
        by jonsmirl.
    - Make tdfx_drv.c and tdfx.h match other drivers.
    - Fixed up linking of sis shared files.
    Tested with Radeon and SiS on Linux and FreeBSD, including a Linux setup
        with
    2 SiS cards in a machine, but only one head being used (with DRI)

commit 355b204de0dbc01308bebc77c4c1c0a9a402cded
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Oct 16 14:18:52 2003 +0000

    Introduce COMMIT_RING() as in radeon DRM, stop using error prone writeback
        for ring read pointer (Paul Mackerras)
    Get rid of some superfluous stuff, minor fixes

commit a64dab132375b4bf5d4e8aeecc1bf341879482fa
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 16 03:20:03 2003 +0000

    Try that again. It's a long.

commit a9e1a57d6d03f9fc52357db8af7ac2e7b8a488e4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 16 03:19:06 2003 +0000

    Debug printf format fix.

commit 9fbfb7ca6a7da93fda0d086a712108e1b14c99d1
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Oct 3 08:08:10 2003 +0000

    Some code cleanups done while working on locking. Reduces always-true
        tests, excessive indenation, convoluted handling of errors, or code
        duplication.

commit 929536172cda4288857cdc29b272e61e02fd47bd
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Oct 3 07:02:51 2003 +0000

    Stylistic preparation for SMPng locking work: DRM_LOCK/DRM_UNLOCK have side
        effects, so make them look like functions (add parenthesis).

commit e187d665e4ffee4990d096d8d3722630b2ba2d46
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 2 20:52:44 2003 +0000

    Add an MIT-style copyright, assigned to myself, to these files. I think
        I've touched enough of the code here, and there was no previous
        copyright. Do some drive-by style fixes while I'm here.

commit 89dd7be3dd7f73d3bae54a01865e5605a707f823
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 2 07:02:34 2003 +0000

    Axe more old gamma DMA infrastructure.

commit a6b84f73e18d88524a906a319c6c8e3c44bd7dea
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 2 04:48:54 2003 +0000

    Mostly whitespace cleanups and style(9) fixes focused on "if(" -> "if ("
        Change some nearby memset()s to bzero()s or to calloc allocations to
        take advantage of M_ZERO). Reverse some error tests to reduce high
        levels of indentation. Move the sg_cleanup() call out of the maplist
        loop in DRM(takedown)-- I can't see any need for it to be inside.

commit 4dee75ff58a50559cb8a92c276c0b952c2776154
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 2 04:12:34 2003 +0000

    Wrap sys/endian.h usage with __FreeBSD_version >= 480000.
    Obtained from: i865-agp-0-1-branch

commit 4a55e75e97e39256d5cdb561cf01ff7df73fe664
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 2 04:07:03 2003 +0000

    Allow the DRM to attach to a "drmsub" device. This will be provided by the
        i810 AGP module, working around the limitation of one driver per
        device.
    Obtained from: i865-0-1-branch

commit 8fe6a0d6c9aae796cc1217794644b314a9960a43
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Oct 2 03:51:49 2003 +0000

    MTRR issue with SMP and -stable seems to be resolved. Re-enable MTRRs on
        4.x

commit e5546d2f26db3eb15b2be1f33a0b07c7ca497337
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via_drm.h was initially added on branch cle266-0-0-1-branch.

commit 87c04835df1ab427c003c5f3d716dbd12a5f4294
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via.h was initially added on branch cle266-0-0-1-branch.

commit 64828b7fe36f771e124d0a69e022c5d8177b4564
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via_drv.c was initially added on branch cle266-0-0-1-branch.

commit 215a05721bc08eea804c6790a43666ceb297e5d8
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via_drv.h was initially added on branch cle266-0-0-1-branch.

commit 37ff4d7ddeff8dfd303b6dedd591f21e4962745e
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via_ds.c was initially added on branch cle266-0-0-1-branch.

commit 53e11840a54b7b252d56cc8909846a24d53d2366
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via_ds.h was initially added on branch cle266-0-0-1-branch.

commit 097d0a51e2c6e8bc1d77b46afe15b1068d6c9a94
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via_map.c was initially added on branch cle266-0-0-1-branch.

commit 8d9d81680779ce40b96cdfbd83067b797876a981
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via_mm.c was initially added on branch cle266-0-0-1-branch.

commit d04d1cf313be536dc69d4b807a6503aef1204c6d
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Sep 30 22:43:23 2003 +0000

    file via_mm.h was initially added on branch cle266-0-0-1-branch.

commit 5d4b13707666701506dcb86e7fc2dfe79ee056ea
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Sun Sep 28 21:27:09 2003 +0000

    Fix typo in SiS help message (and testing cvs commit to
        dri.freedesktop.org)

commit 28aee7fb1c5b7a7e59aed8ed8e9dc1e3d4b88561
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Sep 25 23:04:10 2003 +0000

    Whitespace cleanup (spaces before tabs or instead of tabs).

commit b0fab09c4df5075ebfae3637f39ef595a8a37066
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Sep 25 19:08:46 2003 +0000

    Whitespace cleanup.
    Submitted by: Linus Torvalds <torvalds@osdl.org>

commit a0a38f8bd68792206491a51e708d2d1bd2db8b26
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Sep 25 19:08:11 2003 +0000

    Fix Kconfig for SiS DRM now that it doesn't require sisfb.
    Submitted by: Linus Torvalds <torvalds@osdl.org>

commit b0a928557c91fec527f41ae8b2441174889bf32c
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Sep 24 14:39:25 2003 +0000

    post merge fix

commit decf9e2297d87d646a4259f5d70290f105a487cd
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sat Sep 13 00:25:59 2003 +0000

    compatibility layer still uses agp (not gart)

commit dc17c4cdc358213340947ec0e7e7f4caf7664232
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Sep 12 20:03:17 2003 +0000

    bsd drm fixes

commit c5168016cc028f59b417df77f1f169bf06e40271
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Sep 12 20:00:59 2003 +0000

    linux drm fixes

commit 85c16d962d8f6011b670d74d0669402ec4708f6f
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Sep 12 14:24:17 2003 +0000

    resolve merge conflicts

commit 6fc41e25e5acbbfae4d2e93a0d9e6f980f8ae477
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Sep 9 07:45:12 2003 +0000

    Use spldrm/splx around tsleep() in DRM_WAIT_ON

commit 4d6d3572029414419289fd512416effb9a9ad832
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 7 23:56:20 2003 +0000

    Correct format in debug printfs (free is a pointer, not an int).

commit 6f563cd513bfcd35643ebc4f0d5c58f0193cc163
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 7 23:27:04 2003 +0000

    Fix for older -stable.
    Obtained from: FreeBSD CVS

commit ebca51d8da42e7e4882694bc3233bf0f8dbdf301
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 29 21:41:32 2003 +0000

    Update to reflect renaming of SIS ioctls.

commit f634f687592bca690a9bc045661005c77854647b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 29 20:54:26 2003 +0000

    These files were missed in the SiS DRM commit.

commit fabc64dd573f01a2160be474b4abc65a3a9aa5ea
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 29 19:24:36 2003 +0000

    Port the SiS DRM to FreeBSD. This includes the ability for the DRM to
        allocate framebuffer memory without sisfb, and a new ioctl to be used
        by the X Server which tells the DRM what region of framebuffer memory
        to allocate from. Also fixes a possibility to panic the kernel I
        believe. Tested on linux with sisfb and FreeBSD (without sisfb) with
        new DRI only.

commit a7aebb6dac3287374721dd2101a4584f12c63c82
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 29 19:16:13 2003 +0000

    Add DRM(calloc), which is convenient, used by the new sis code, and takes
        advantage of M_ZERO on BSDs.

commit db781291164dfa10538776748df7af901c6b20a2
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 29 19:08:06 2003 +0000

    Update radeon PCI IDs.

commit bd3bc9f23d7a1895b2bf87d39346c5d4c9615020
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 29 19:07:27 2003 +0000

    This PCI header has been living in dev/pci/ for a while now.

commit ba804e7864eef2fd1d92cfe75b0bc868302da084
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Aug 28 12:14:17 2003 +0000

    Remove superfluous TLB flush

commit b83d2f909e03c7c4a95f19a04d717f7ea8dc288e
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Aug 26 16:49:33 2003 +0000

    Rename agp to gart for radeon

commit 062751ac472b2721bed0cd1ee48a3ae7d327ff07
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Aug 26 15:44:01 2003 +0000

    Remove artificial PCI GART limitations, rename AGP to GART where
        appropriate

commit 963ad33cb6b85189f3385bcba46905b6d4d329db
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 19 02:22:57 2003 +0000

    Fix the debug build.

commit ad78a613a49daea936372c75423ac17f9f83b092
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 19 00:41:00 2003 +0000

    - Remove $FreeBSD$ tags as they weren't too useful and merges are now being
        done through perforce.
    - Add copyright headers to drm_os_*bsd.h, still need to research the other
        copyright-less files better.

commit 07a9b30082d6a64d39964f504e3afc4317e22ef7
Author: Michel Daenzer <michel@daenzer.net>
Date:   Mon Aug 18 23:46:19 2003 +0000

    Clean up Radeon DRI resume code

commit 0f094c33da5054e6be9ccf8bf0f6282c9aed5791
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Aug 18 23:42:16 2003 +0000

    Make r128_do_wait_for_idle static, as it's only used in this file.
    Noticed by: CScout

commit 6298d1a1e0deccf085970e12922430dbde09e5da
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Aug 18 23:41:05 2003 +0000

    Remove an unnecessary #define __NO_VERSION__
    Noticed by: CScout

commit 9d7b01ebbe71ff6ca3ea421d5bff64f403b592ba
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Aug 15 10:31:54 2003 +0000

    Merge from 2.6 kernel (Linus Torvalds)

commit a073ff7dc73dc98e81e2ae26e8c500ea7141084b
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 15 01:05:24 2003 +0000

    DA: loads of whitespace .. some from Linus, some from me

commit 428cbe0b91b1b446b0878544f30121df9b5bb2ac
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Aug 13 23:35:40 2003 +0000

    DA: patch from Matthew upgraded to latest DRI head to solve issue with i810
        compatibility

commit 03e6674c13f8e7033c891ae8979e7f996fe9a6c1
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 12 21:48:16 2003 +0000

    Whitespace cleanup from the pageflipping commit.

commit 4c9daf6847b4e263d006154ac1e523c091308a6b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 12 21:47:34 2003 +0000

    Document change in interface version 1.9.

commit fbdadde0079120d49ca719781817a342bb62801d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 12 21:34:03 2003 +0000

    Document the changes in interface version 2.5.

commit 02675a470e9fde770418748b14d0a69a7f562d3b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 12 21:18:05 2003 +0000

    Merge from FreeBSD r1.11: We have memset in the kernel, no need to define
        it to bzero (which it was always used for).

commit 447d8c56bb8db6c8139c4c4cb3e99f6674069e09
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 11 01:46:02 2003 +0000

    DA: code cleanups for i810_dma.c from 2.4 kernel

commit c99acb597fe430305b6bba62467cd3c85a36b8f5
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri Aug 8 21:06:44 2003 +0000

    Added some information as to when (which DRM version) various queries were
        added.

commit e7944efc4550416ee53e2f570f759d4e6078834b
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Aug 7 10:13:50 2003 +0000

    build fix for kernels >= 2.6

commit da16867c8433516c361944e6e4265bd511ac72c8
Author: Michel Daenzer <michel@daenzer.net>
Date:   Wed Aug 6 11:46:21 2003 +0000

    Fix maplist entries being used after they were freed; thanks to Benjamin
        Herrenschmidt for tracking this down

commit 4b60cae90e0f689f68167c2e3419df7574cae1ab
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Jul 29 10:11:48 2003 +0000

    IRQ code cleanup suggested by Linus Torvalds
    i830 build fix

commit c26ffeafca30332520660d2bef1106b56d0ef5e1
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Jul 26 15:59:09 2003 +0000

    Degrade uninformative error message to debug message, as in other drivers

commit aaf2105be967ad7f99c643b4be09cf6d3d063b65
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Jul 26 03:25:40 2003 +0000

    Add Rage 128 pageflipping support, defaults to off. DRM version bump to
        2.5.0. It still has some issues, including a flicker in the fps meter
        in tuxracer and I've seen garbage left behind after moving/closing
        windows. However, it's usable. Add the Option "EnablePageFlip" "YES" to
        use it.

commit 983db58a26c37237acf54af60f28a4243467079a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Jul 26 03:18:34 2003 +0000

    Fix FreeBSD build after IRQ changes.

commit bef7017749c9d3af733bdca4863a012f5d6506d3
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Jul 25 10:50:39 2003 +0000

    Compile fixes for recent 2.5/2.6 Linux kernels. I hope this doesn't break
        the i830 driver or the BSDs. :)

commit 32ef0f59a8d62460da338568af347286aa450146
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Jul 25 10:31:37 2003 +0000

    Fail in DRM(agp_acquire) if the AGP aperture can't be used, such that the X
        server falls back to PCI GART or disables the DRI gracefully

commit 3669639b2162d0ec0d3f9b47b2e443b6d89d1cee
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Jul 11 15:27:55 2003 +0000

    Restore __HAVE_KERNEL_CTX_SWITCH, required for the sparc drm module in the
        kernel tree. Added comments to that effect.

commit 1654bc5752740e54a5e6cfd18021a9f66d7b7df2
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jul 9 23:21:15 2003 +0000

    DA: fix for bug 484 in Bugzilla, originally from me, reworked by David
        Dawes to avoid backword incompatibilities...

commit f4188a751829926f5901d18a0d95774c8cdecbf8
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Wed Jul 9 09:28:42 2003 +0000

    file drm_mem.h was initially added on branch newdrm-0-0-1-branch.

commit 7dc959ed2114f4b92b7e0cb8b067f2a182e9a4d8
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Wed Jul 9 09:26:17 2003 +0000

    file drm_dma.c was initially added on branch newdrm-0-0-1-branch.

commit 49d152544e64b9d3802f5efd6e5f53cb93756a10
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Wed Jul 9 09:26:17 2003 +0000

    file drm_fops.c was initially added on branch newdrm-0-0-1-branch.

commit 6a0e4854574732ed301a1aa7fb8753b37666def1
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Wed Jul 9 09:26:17 2003 +0000

    file drm_lock.c was initially added on branch newdrm-0-0-1-branch.

commit c7f9545482223eb01d9b4c76212305615483150a
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Wed Jul 9 09:26:17 2003 +0000

    file drm_stub.c was initially added on branch newdrm-0-0-1-branch.

commit cf6e7980c913b0b78cbf020052d9135fc2da0417
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Wed Jul 9 09:26:17 2003 +0000

    file drm_vm.c was initially added on branch newdrm-0-0-1-branch.

commit 2daf14765214c50088c16e3538d24e157578d000
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Jul 8 17:10:13 2003 +0000

    Removed unused __HAVE_KERNEL_CTX_SWITCH, whatever that was.

commit 39e1c534c0730e451062a9dbcbdf5ab95d1c5c50
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Fri Jul 4 18:31:42 2003 +0000

    Don't need to include linux/wrapper.h - we only use Set/ClearPageReserved
        from linux/mm.h now and wrapper.h has been removed in 2.5.69 and later.

commit 01d6ae90d6a8b5ed32739b39334079d5f1c3d95e
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Jul 1 18:56:57 2003 +0000

    file drm_agp.c was initially added on branch newdrm-0-0-1-branch.

commit a145363ee175757ff0309a50157a9d75e97fda26
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Jul 1 18:56:57 2003 +0000

    file drm_bufs.c was initially added on branch newdrm-0-0-1-branch.

commit 7c565e4961c194d9b432d4a6790883ac5c061867
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Jul 1 18:56:57 2003 +0000

    file drm_mem.c was initially added on branch newdrm-0-0-1-branch.

commit 43d3934ac86bdd7319b140b7dae823579a3bc43c
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Jul 1 18:56:57 2003 +0000

    file drm_pci.c was initially added on branch newdrm-0-0-1-branch.

commit 8ec900afb4ea0d0ab3f7f1e7e71f41de210da3bf
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Jul 1 18:56:57 2003 +0000

    file drm_sg.c was initially added on branch newdrm-0-0-1-branch.

commit 66d39b549eef3bdaaa3b6a99992659e0b381b4aa
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jun 23 16:34:14 2003 +0000

    file savage_dma.c was initially added on branch savage-1_0_0-branch.

commit 5640adddc896c89ae25c7db38c796bde21a37bdc
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jun 23 16:34:14 2003 +0000

    file savage_state.c was initially added on branch savage-1_0_0-branch.

commit 1b0eb5e3561f3cdabae73c8152fe0b5b72863922
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 21 15:27:51 2003 +0000

    file drm_pci_tmp.h was initially added on branch newdrm-0-0-1-branch.

commit dab537cbb1817f6a229640cf2584e64495b7a186
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 21 14:01:43 2003 +0000

    file drm_stub_tmp.h was initially added on branch newdrm-0-0-1-branch.

commit b568f838490ef2558e7297a1950e6e9e26093d24
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 21 13:18:47 2003 +0000

    file drm_memory_tmp.h was initially added on branch newdrm-0-0-1-branch.

commit 7014016e08c3d98aa348e21f7ce1937535db2e13
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 21 13:09:08 2003 +0000

    file drm_vm_tmp.h was initially added on branch newdrm-0-0-1-branch.

commit b816fa625fc05afd0ffa62a2a5d0784c024c3319
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 21 12:49:34 2003 +0000

    file drm_dma_tmp.h was initially added on branch newdrm-0-0-1-branch.

commit d64200e830586990cb1ae5436bdfec9127f2a731
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 21 12:27:27 2003 +0000

    file drm_lock_tmp.h was initially added on branch newdrm-0-0-1-branch.

commit e7334f927f1f5fc6ed1df1abf2c345be1682c3f8
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Thu Jun 19 00:14:25 2003 +0000

    file drm_bufs_tmp.h was initially added on branch newdrm-0-0-1-branch.

commit 93522f6d3ad6924cbf413915491e4f8228502d98
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Thu Jun 19 00:09:52 2003 +0000

    Revert the janitorial - that works is now on the new branch
        newdrm-0-0-1-branch.

commit 0a995b624d325055abf5ba09d39ac8d85866d85a
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 18 15:07:31 2003 +0000

    file i830_compat.c was initially added on branch i865-agp-0-1-branch.

commit 22e5f8d765745ff3f41d1b8016e1c0b889bb52d1
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 18 15:07:31 2003 +0000

    file i830.h was initially added on branch i865-agp-0-1-branch.

commit 2efebc956c68e5b5ef28690ea1829d9d993dd33f
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 18 15:07:31 2003 +0000

    file i830_dma.c was initially added on branch i865-agp-0-1-branch.

commit a9611f09037e3966aace29fdfff296dae82e642f
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 18 15:07:31 2003 +0000

    file i830_drm.h was initially added on branch i865-agp-0-1-branch.

commit 900bd6e4377d70cb6a26905d5310304c6c1a4d71
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 18 15:07:31 2003 +0000

    file i830_drv.c was initially added on branch i865-agp-0-1-branch.

commit cf840e71f2e7d8b8814a605020ca3b0d03964295
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 18 15:07:31 2003 +0000

    file i830_drv.h was initially added on branch i865-agp-0-1-branch.

commit 4d0e244f8f6fbc710703413cf358942a06cbe843
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 18 15:07:31 2003 +0000

    file i830_irq.c was initially added on branch i865-agp-0-1-branch.

commit fbde3dc0e6649f83173a6f39a01338288e8e56f1
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 18 15:07:31 2003 +0000

    file i830_mem.c was initially added on branch i865-agp-0-1-branch.

commit 9e7d6177d1e57f8ab08da3232568597d5005709c
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Jun 16 10:40:52 2003 +0000

    Possibly fix stanford checker complaints about sarea

commit fdf320a1b8025dd4b33670fddae9df2890ee6c5b
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 14 15:18:49 2003 +0000

    Move the linux AGP includes into drm_agp.h and only define the AGP data
        structures if AGP support is enabled in the kernel (__REALLY_HAVE_AGP).
        This fixes the compile errors on kernels without AGP support.

commit 0b01c70d59f6e038b8f90f7be98fb77d771ecc1a
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Jun 10 18:54:17 2003 +0000

    Texture rectangle support for r100

commit 98840144b120691423038a29e1f0afdc8606cce7
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Jun 9 23:12:33 2003 +0000

    Revert bogus last commit

commit 1062b9930f2c0ddb9f5f0db29796aba0e247c80d
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Jun 9 23:11:23 2003 +0000

    Don't activate blend fallbacks unless blending is enabled

commit 1a2bb4332972c57c0d810e879e251d74a538f13b
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 7 12:45:55 2003 +0000

    Verify 'drm_agp' is not NULL for all its wrappers - this causes no overhead
        and must be done if in future a driver tries to talk to the AGP
        directly from kernelspace instead of userspace, and the AGP is not
        present.

commit e3a149f08095f1a7321fce890b1337098485f254
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sat Jun 7 12:30:22 2003 +0000

    Check that the AGPGART "drm_agp" symbol pointer is valid before
        initializing the DRM device - this was causing a kernel oops when the
        AGPGART module wasn't loaded.

commit f723f743c55156039525a5f49dfe6e0fd141c8df
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 7 01:44:15 2003 +0000

    fix pitch compile error

commit 8eaa2d245077d5e949679e48897b57f8dc505a25
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 5 23:31:40 2003 +0000

    add page flipping support to the DRM, up version number to 1.3.0...

commit 8e7cd92f35629a6f6d904346b09883173a7bda29
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Jun 3 23:50:23 2003 +0000

    Added the Doxygen configuration file. Minor documentation fixes.

commit 6611a5fb7f41f81e38391c77903d98a29937ceed
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue Jun 3 23:27:01 2003 +0000

    Split declarations/definitions in drm_scatter.h into drm_sg.h/drm_sg_tmp.h
        respectively. Splited the work out of the ioctls and renamed (with the
        _ioctl prefix). Added some more documentation. Did the same for
        drm_sgpsupport.h.

commit a709d4c97c2de9d75ba845da41d61f8734ee573b
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Jun 3 11:23:58 2003 +0000

    file i830_mem.c was initially added on branch i865-agp-0-1-branch.

commit 89463947581a5aad25abd22f36e95391c42972b6
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri May 30 12:07:45 2003 +0000

    file i830_compat.c was initially added on branch i865-agp-0-1-branch.

commit 518db771de1fd1ac26721197833d33147740edae
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Wed May 28 02:03:37 2003 +0000

    Restore change to _DRM_VBLANK_SIGNAL from rev. 1.41, which was reverted
        with the documentation merge.

commit ccf6d6a5136af3d59a9d93566f55058e9c8480b4
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Wed May 28 01:44:49 2003 +0000

    Restore DRM_*MEMORYBARRIER change reverted with documentation merge

commit d2443b2186712dd7c977b47e06444396e1e493ff
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Tue May 27 00:37:33 2003 +0000

    Merged DRM documentation.

commit aeb4bc3f5b991d7970dca9417e04df06c0bf008a
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Mon May 26 20:04:53 2003 +0000

    Add support to r128 for MESA_ycbcr_texture (Ian Romanick, Leif Delgass)

commit c0efa1a777baf90561a31957014d760f89146e4f
Author: David Dawes <dawes@xfree86.org>
Date:   Tue May 20 22:43:39 2003 +0000

    DRM part of Radeon DRI suspend/resume support (Charl Botha).

commit 2134577e314d1dac4b48b78e5b6d6e92f2c76ea8
Author: David Dawes <dawes@xfree86.org>
Date:   Tue May 20 22:42:24 2003 +0000

    Support for building DRM module on OpenBSD (Wilbern Cobb, Matthieu Herrb).
        (resync with XFree86 trunk)

commit b942999b5915cbad75f16f6c242bab03c33f0c8b
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat May 17 00:37:34 2003 +0000

    do allow reading from read only mappings...

commit e5d3c7f260d18168eec755c73f01ac617390d96c
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri May 16 23:41:27 2003 +0000

    Support AGP bridges where the AGP aperture can't be accessed directly by
        the CPU (David Mosberger, Benjamin Herrenschmidt, myself, Paul
        Mackerras, Jeff Wiedemeier)

commit 1d5bf7a7de35f87e68cce740151fd46cd8fa2ff3
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue May 6 21:10:33 2003 +0000

    fix warning on machines where sizeof(drm_addr_t) != 4 (Randy Dunlap)

commit 285b1cdc39d9cc47e3ff74b9f9b56c24317beec5
Author: Ian Romanick <idr@us.ibm.com>
Date:   Wed Apr 30 01:51:00 2003 +0000

    Merged texmem-0-0-1

commit 7e1a4bfab3648a83cf2f8eed01c6ac346829aa3c
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Tue Apr 29 16:59:00 2003 +0000

    remove unused variables

commit 87ed795ff354eb6e9431c87ab315349326c1af79
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Apr 28 23:18:43 2003 +0000

    Fix a typo: On takedown the mtrr operation is MEMRANGE_SET_REMOVE, not
        _UPDATE.

commit 5f1e2399eb5b76537c91fc9aba2569f2c289a284
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Mon Apr 28 17:49:26 2003 +0000

    Restore Eric Anholt's DRM_*MEMORYBARRIER changes from rev 1.11

commit a57d3204613922ee07e56209169e4b4ce1f17754
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Mon Apr 28 16:20:31 2003 +0000

    Only free original pagelist in addbufs_pci if one already exists (fixes
        oops).

commit 6eb5364eb81474a6ceac8b44c3283cb0327b2a82
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Apr 28 15:29:46 2003 +0000

    DRM_READ/WRITEMEMORYBARRIER was given an argument in the bsd tree, fix for
        linux

commit c584292e30f1f3fc22da32117dfbb72bb79cdbe2
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sun Apr 27 09:53:58 2003 +0000

    Put back __HAVE_KERNEL_CTX_SWITCH for David Miller's sparc drm driver
        (which doesn't live in our cvs).

commit 22b9b720d572ba6fec288e2a13537aec069cec7f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Apr 27 00:43:14 2003 +0000

    Use real endian conversion functions.

commit 9828bd24c8f7b9d115acf94e422fa34ec8627b92
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 23:55:30 2003 +0000

    Fix formatting of hw.dri sysctl.

commit 766a1da2e5841959246abab9cf27c79d75636129
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 23:32:00 2003 +0000

    Remove the map argument from DRM_*MEMORYBARRIER. Not all of the uses of
        DRM_*MEMORYBARRIER we had were related to an MMIO space. This means
        arch-specific code on the BSDs, unfortunately. Also add
        DRM_MEMORYBARRIER() and change the DRM_READMEMORYBARRIER()s that used
        to be read/write barriers to it.

commit a172ee2a18b715a6de9b8e914aecd8414a4f3b2d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 23:04:22 2003 +0000

    MFL: Don't install irq handler unless the driver has been initialized.

commit ce514e08aa8fdbdf52da2ac2cbdace68e0b25210
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 22:52:39 2003 +0000

    Add PCI DMA memory functions and make addbufs_pci and associated code use
        it. To do this we need to save the bus address along with the virtual
        address in the seglist. Also fix some error handling and a few bits of
        whitespace.

commit f2a0c5438dc83171de1007a68e4f98e35b5a8fbe
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Sat Apr 26 22:28:56 2003 +0000

    Ensure driver has been initialized (dev_private != NULL) before installing
        irq handler in DRM(irq_install). Modify all drivers to ensure irq
        handler is removed before cleanup and cleanup is called at takedown.
        Remove unused buffer private struct fields in i810, i830. Check for
        lock on init/cleanup in all drivers except i810/i830. The current DDX
        for i810 and i830 doesn't hold the lock on kernel init (FIXME?).

commit a79adaab72bde726ce4c08184997f34b31014d9e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 22:21:37 2003 +0000

    Missed files in the last commit: Remove memory debugging sysctl unless
        MEMORY_DEBUG is set.

commit 8621ae310b496a5d5db10236083f3f3d38362719
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 22:18:39 2003 +0000

    Move the memory functions with debugging info to drm_memory_debug.h, and
        remove a couple of dead functions.

commit 79a0c5757e400c236b4c365761a377d52393606a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 21:57:43 2003 +0000

    Remove #if 0'ed code.

commit f5844cea13ba330beaeebb171eca1580efba62c6
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sat Apr 26 21:33:44 2003 +0000

    2.5.x sync patch from Linus Torvalds

commit 2c40a56393102bb0fb21e183bf5a08b0eea35c57
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sat Apr 26 21:22:08 2003 +0000

    move prototypes for gamma functions to gamma_drv.h

commit 2142b7840a5e0c2b6342ef94f285ac9fcf4a87ce
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sat Apr 26 21:21:36 2003 +0000

    Remove #if 0'd code

commit e60eb69bc029c04b39ef0de620002d5ba2433d04
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 06:53:22 2003 +0000

    Replace the C atomic_cmpset_int compatibility function for -stable with the
        real i386 atomic_cmpset_int from -current. FreeBSD-stable won't ever
        have DRM support for non-i386.

commit acb5d6b2732cccfa3734b25dc808ecdc5a6c556c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Apr 26 06:39:55 2003 +0000

    Disable MTRRs on FreeBSD-stable. Without this, it hangs on boot in the MTRR
        setting for AGP cards on SMP machines.

commit cb32dde3be831096e98c66398159f7d7ddf3d672
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Fri Apr 25 19:42:47 2003 +0000

    Fix potential oops and memory leaks when allocations fail in
        addbufs_agp/pci. Add support for buffer private structs with PCI DMA
        buffers. Also some debug format string fixes.

commit 77ee73f8cd92aa136488e23424282afba9977160
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Apr 25 02:27:21 2003 +0000

    Merge from FreeBSD-current.

commit c3092ead6427d04b7067c1d7d95163c7aa7b75b1
Author: David Dawes <dawes@xfree86.org>
Date:   Fri Apr 25 00:57:42 2003 +0000

    Targets for building dristat and drmstat.

commit 58650c3a9d53044a0ab463df41864ddb39238bab
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Apr 25 00:02:14 2003 +0000

    Clean up the DRM_COPY_TO_USER()ing of DRM(infobufs), making it more
        legible.

commit 781828b26e35e8347e461d2097563823e8f76c88
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 23:57:29 2003 +0000

    Clean up the style of the linux-compat code and use ioctl() directly rather
        than reimplementing it.

commit 16fda821eb457818414faa57bf9ccfba93c3a350
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Thu Apr 24 23:18:33 2003 +0000

    Pass dma handle from pci_alloc_consistent to the card for status page,
        rather than using virt_to_bus() on the virtual address.

commit a147df879b3b850612222759c14f4142d2406e74
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 19:09:55 2003 +0000

    Remove more gamma DMA infrastructure. Most of this code was copied straight
        from linux, so it could be added back if some driver needed it in the
        future.

commit d6a82ff9c160acbb7db5bee2cde45818d1e8548e
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Thu Apr 24 16:55:22 2003 +0000

    Remove unused dev->map_count. We always iterate the maplist with
        list_for_each() and the count is not updated or used for stats.

commit 2dc672a7908817f43391703a8341cb873fbb1543
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Thu Apr 24 16:47:32 2003 +0000

    Minor cleanups for dri/drmstat test progs (Both still need targets for new
        Makefile)

commit cd3d6090b79ad5583494938a231cfc4da610ca9b
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Thu Apr 24 15:29:30 2003 +0000

    Remove unused variables

commit 57406077e554d29e56a8a82c54ec7d41cdc07b79
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Apr 24 10:02:18 2003 +0000

    Move the debug versions of the DRM memory functions to a new file and
        implement non-debug ones as standard.

commit a41594e8dfa029cfba9c518d6c21551f5e0857bc
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Apr 24 09:41:33 2003 +0000

    Remove #if 0'd code and some unused string functions

commit 01178567ebc428fcf8eb53a62b5ca9c449980491
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 06:19:54 2003 +0000

    Remove more gamma DMA code. This isn't all of it, but it's a major portion.

commit c6d2af70cb30a5cc65aebae2637313158a95346e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 05:56:44 2003 +0000

    Move some common code from addbufs_<type> to addbufs. Make buf_alloc be
        protected by the count_lock and make it non-atomic.

commit af3bfdef26b2d02ea4877e3d57601e57ffa4e95a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 05:14:05 2003 +0000

    Remove the ioctl_count variable from the device. A reference is held to the
        fp throughout the ioctl syscall, so the device can't be closed out from
        under us.

commit bcd527ee71043478d27ec3e5b611c9f34bf4f191
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 04:50:07 2003 +0000

    Remove a bunch of dead code and fix spelling of a couple of comments.

commit 00522cedd6ee3027d2858909d34e862fa21e6e28
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Apr 24 03:01:40 2003 +0000

    Single/dual rasterizer quiescence patch for the glint/gamma DRI driver
        (#5685, Sven Luther).

commit 9d603b0abe3d1ab2a383ee9f33f27900f9eb1d5e
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Apr 24 02:56:06 2003 +0000

    break long line

commit 9b2b2337b3caa006fa95eecb966b8a68eed83b90
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 00:46:03 2003 +0000

    Move one definition to drm_drv.h and remove the rest of drm_init.h which
        was all unused.

commit e21473c88853bb6f539ecca1c76e692d748bb722
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 00:37:35 2003 +0000

    Remove DRM_DMA_HISTOGRAM and associated code.

commit 1fc0a5e1e4c43a0e9fe8b0d9860f22ae8e820d46
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Apr 24 00:25:36 2003 +0000

    Make DRM(read) and DRM(poll) stubs and remove DRM(write) and
        DRM(write_string). This is the first part of removing much of the
        support code for gamma from the BSD DRM, since it appears that no new
        drivers are using it and nobody has ever shown interest in gamma on
        BSD.

commit e15b0b6a1b95e4145363b15e1a581ee230b2f9a2
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Apr 23 23:42:29 2003 +0000

    Install dummy/noop read & poll fops unless the driver has replacements.

commit 23a76c37594d3d423963c7b8610b64367e3ff9d8
Author: Michel Daenzer <michel@daenzer.net>
Date:   Wed Apr 23 14:21:17 2003 +0000

    deal correctly with read() from the DRM failing

commit d5db1144dd5cb96b7e25d0e08a209b38e0afdc9b
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Apr 22 21:45:06 2003 +0000

    get rid of superfluous fields in struct drm_radeon_ring_buffer
    use correct address for ring read pointer writeback (yes, we seem to have
        been running with bogus values for the ring read pointer, which
        'worked' because the return value of radeon_wait_ring() is never
        checked and the ring usually never fills up)

commit 5ee61c18f4866bd9257bdc5eddefe6e58e0a1849
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Tue Apr 22 21:30:24 2003 +0000

    Remove AGP dependency in kernel config for radeon, sis. Remove
        PCIGART_ENABLED define for radeon, pcigart support now included for any
        arch.

commit 22608a414d7b7ef32ca51b9123be8341ddd5e8ce
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Tue Apr 22 19:42:27 2003 +0000

    Only mga, i810, i830 require AGP (should mga define __MUST_HAVE_AGP?)

commit 879e3d335c09bfe069948754600543291e8f8475
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Apr 22 12:52:17 2003 +0000

    change PREINSTALL/POSTINSTALL/UNINSTALL irq code to real functions as per
        the other drivers

commit 9c5d16216d35d4b815471ff62de79f7fff2b2a2c
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Apr 22 12:42:22 2003 +0000

    remove unused variable

commit 0782f0df60b0544a8fb784aa253a4f57f9dfdeeb
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Apr 22 12:41:16 2003 +0000

    fix gamma headers

commit 73e20998b46bd8aa6ac903bc4701711d9a527f63
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 12:14:59 2003 +0000

    Rename drm_lists.h to gamma_lists.h

commit 700e880c3dbaf3532287ad423f3158adbac85fb7
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 12:07:43 2003 +0000

    new file

commit 928c25d14f76ff537bd56f135b91cf681dee326b
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 12:07:24 2003 +0000

    Move the excitingly named DRM(flush_block_and_flush) and friends to
        gamma-specific code.
    Fix templates so i8x0 drivers don't have to define __HAVE_DMA_WAITLIST.

commit aba6bf7eb3cd53137fab4424ff39e2d68b83dc2a
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 11:39:34 2003 +0000

    remove unused __HAVE_KERNEL_CTX_SWITCH code

commit a1780925fb461c736bae7e51de0d3a1e909548f2
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 11:31:55 2003 +0000

    Move a chunk of gamma-specific code out of drm_dma.h. Remove unused
        'DRM_FLAG_NOCTX' option.

commit 056762a9104997569b09416c35d9a0bfef175e1f
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 10:18:29 2003 +0000

    remove unused dma histogram code

commit 5141da97f680235d10d74737d5444963d2080072
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 10:13:14 2003 +0000

    Move a bunch of gamma-specific code into a gamma-specific file. Restore the
        kooky DRM(write_string) code for gamma.

commit 13211ad82c184e3daf68c06203412d3f1c949291
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 09:49:14 2003 +0000

    add more get_param queries for embedded project

commit fc4fb6b51b50e37ff697e872b297b6460c3617af
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Apr 22 08:06:14 2003 +0000

    remove DRM read, poll and write_string

commit 46e06192a88834a97257d2be5ab3aa7c325a1cfe
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Mon Apr 21 16:07:17 2003 +0000

    Check for NULL map before calling DRM(ioremapfree) on cleanup. Prevents an
        oops if a map wasn't found (e.g. XFree86 Bugzilla #108)

commit da35a90d99cf56a8ffc48f87754013d13e1cafcd
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Apr 17 18:52:05 2003 +0000

    Add a Kconfig file as used in recent 2.5.x kernels.

commit 21af3202874b5938e9c262a906f1eaba08e74b6e
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Apr 17 18:48:06 2003 +0000

    Make Config.in look more like a recent 2.4.x kernel version.

commit dbb7beb51d8adb4b5616fbcca7999b00d760b839
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Apr 17 18:44:38 2003 +0000

    Rework the Linux drm kernel module build to leverage off the standard
        kernel build system. This is based on suggestions and examples from
        David Woodhouse. This approach has the advantage that the build
        requirements of a wider range of standard kernels are now supported
        transparently, but the disadvantage of some extra complexity to handle
        building against clean vendor-distributed kernel source trees. This has
        been tested with some recent Red Hat and SuSE distributions.

commit c2d7ff1bf98f92add98fb76b63d2bdb190f3cf2c
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Apr 17 18:41:28 2003 +0000

    Bring some drm module changes over from the XFree86 trunk:
    - Reset 'bound' flag for an agp entry after undbind succeeded in
        drm_agpsupport.h (Egbert Eich).
    - Ignore hw_lock for drm device if lock was set by a different instance (ie
        Xserver) to prevent second server from spinning in driver release
        function (currently only relevant for i8xx drm drivers) (David Dawes).
    - Use the agpgart "key" for the unique handle for bindings rather than the
        memory address (the key is guaranteed to be unique) (David Dawes).

commit d1b7f551e6d582cd9c44d23883de1f6121907627
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Apr 17 15:27:34 2003 +0000

    Fix DRM module build on 2.5.41 and later kernels (tqueue -> workqueue).

commit 48e389f3a5109383ca71c6c7f743b5107965f1d9
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Thu Apr 10 14:58:53 2003 +0000

    file drm_pci.h was initially added on branch mach64-0-0-5-branch.

commit 244d4faa1d537a01292c4d2cf6c025b41710908d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 8 04:43:29 2003 +0000

    file mach64_drv.c was initially added on branch mach64-0-0-6-branch.

commit 353c84d2ddd2b4aff288a5ffd4a766e928322b28
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 8 04:23:49 2003 +0000

    file Makefile was initially added on branch mach64-0-0-6-branch.

commit 12a52fd8269a07103b6328483577f2487fd7cd01
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 8 04:09:47 2003 +0000

    file drm_linux_list.h was initially added on branch mach64-0-0-6-branch.

commit 10444e06d4f4edaf8e8cd9370f450ce7c047efac
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Tue Apr 8 01:30:43 2003 +0000

    Use list_entry() to get container struct from struct list_head pointers.
        Build fix for RedHat 9 kernel (5 args to remap_page_range()).

commit 3f7769921bd414f489d4487a5760a8d814efd51d
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Sat Apr 5 19:49:16 2003 +0000

    add 'SG' map type identifier string (pci scatter/gather) to /proc vm info

commit 6f88a5351c3f0b8e657708b64060adb833c8a919
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 1 18:53:24 2003 +0000

    Whitespace and remove a dead commented line.

commit 8e51112fe06cc92a7e4d415c897d53008a935554
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Mon Mar 31 04:14:35 2003 +0000

    Warning fix (use %p format for filp)

commit 8926acac37025cd89dae2308c566c778fa1cc406
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Mar 30 07:23:03 2003 +0000

    Spelling fixes in comments.
    Submitted by: Linus Torvalds <torvalds@transmeta.com>

commit aea0418d0db3338b81f83abf26df99dfd7ac85bc
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Mar 29 18:22:28 2003 +0000

    Remove dead vma code and remove the unused devstate struct definition.

commit 6ef79263b68402687ccc2b7447dd908c00e35057
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Mar 29 03:38:47 2003 +0000

    Add DRMFILE definitions and supply filp for BSD in the
        post-drm-filp-0-1-branch world. The filp is a void * cast from the
        current pid. This is a temporary solution which maintains the status
        quo until a proper solution is implemented.
    What is really needed is a unique pointer per open, hopefully with a device
        private area. This can be done in FreeBSD for all entry points except
        mmap, but is difficult (sys/dev/streams/streams.c is an example). I
        have partially completed code for this but have not had time to debug,
        so this is a temporary fix.

commit e27d2f8c7cacf1e9994e9030c7ebb15dc4f4efff
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Mar 29 03:30:21 2003 +0000

    buf->filp is a pointer, so make printf format args be %p not %d

commit 1728bc637df023cce7b5abfeab2796ea481ca7e9
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Mar 28 14:27:37 2003 +0000

    merged drm-filp-0-1-branch

commit 37cb114bd92a17112033f4838e86857bcd466024
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Mar 26 16:37:47 2003 +0000

    Add 2nd arg for DRM_FREE

commit b3eb34e0ea0ec7c550df5fd6b25efcf9e35c53cd
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Mar 25 11:36:43 2003 +0000

    linux merge for drm

commit c14006ba9f0522875327998215150067d8ca6ea7
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Mar 25 00:29:14 2003 +0000

    XFree86 4.3.0 merge

commit 0bd0dd2300e91707ae5a41a83eb37217fd8ad295
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Mar 11 20:51:28 2003 +0000

    Merge back from FreeBSD-current, adding FreeBSD ID tags to aid future
        merging. Also includes an update to radeon PCI IDs.

commit 638d45d2a0f5101e0b10a4f2761f9e25d2872055
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Mar 8 05:05:41 2003 +0000

    Make dma_addr_t an unsigned long not a uint32, don't try to use memrange
        functions on FreeBSD non-x86, and remove a dead define.

commit bf4b8ba753807eac22e7b14a5581c3c883d9473c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Mar 6 19:21:23 2003 +0000

    Remove the vbl signal code because it's untested (and has lock issues on
        -current).

commit a01d26f39d7e1fcf0ffafc04df832f72ae3d3896
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Mar 5 06:06:27 2003 +0000

    Put cdevsw initialization in line with FreeBSD-current. (From r1.10,r1.11
        of FreeBSD CVS)

commit 3f786dbd1827d4f399bdf71e57d970ea8124bb0c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Mar 5 06:04:50 2003 +0000

    Update mmap handling for FreeBSD-current (Based on r1.3 of FreeBSD CVS).

commit 1434bfe4a8e5fb7b6e8f52d3a732582e61216f68
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Mar 5 04:14:52 2003 +0000

    Remove a paste-o in DRM_SPINUNINIT and add a volatile to the compatibility
        atomic_cmpset_int.

commit 51e5f73d2a4020a1bae860057bae2b0eff8e9c70
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Mar 4 11:41:12 2003 +0000

    DRM_FREE/2 patch from Philip Brown

commit 708ecd0e4b4b1bc2f78dbb4e004bb4d5ec3effe8
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sun Mar 2 21:44:26 2003 +0000

    file savage_drv.h was initially added on branch savage-0-0-1-branch.

commit 2254ac21b8087c60fbf7d479ba3de2a1e7ac3d17
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sun Mar 2 21:44:26 2003 +0000

    file savage_drm.h was initially added on branch savage-0-0-1-branch.

commit ef6838e92e53530077f3fa946434306b8addde3e
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Sun Mar 2 21:44:26 2003 +0000

    file savage_bci.c was initially added on branch savage-0-0-1-branch.

commit eb0fd431c82b494cf62012b43306fa7a836f3865
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Fri Feb 28 19:39:46 2003 +0000

    Update object targets

commit 40de83c52cab6d343533ca0879a062b75ae7d096
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Thu Feb 27 12:52:42 2003 +0000

    file savage_drv.c was initially added on branch savage-0-0-1-branch.

commit 1c3f7049057fcbc05a1c64e92329daf754c64691
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Thu Feb 27 12:52:42 2003 +0000

    file savage.h was initially added on branch savage-0-0-1-branch.

commit 40bae8bec876086a61763012508298398b27b7c4
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Wed Feb 26 09:49:54 2003 +0000

    file mach64_irq.c was initially added on branch mach64-0-0-6-branch.

commit b487f30ea5c129eed1dd85f7ad79db3d2485b1f8
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Feb 22 18:40:12 2003 +0000

    Fix build on NetBSD.

commit cfa778af9c70faea8c13e5cb7f80029eee0d074e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Feb 21 23:23:09 2003 +0000

    Merge from bsd-4-0-0-branch.

commit a64472d18493de575a7636704b45babe7b4b4572
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Feb 16 19:03:04 2003 +0000

    file mach64_drm.h was initially added on branch mach64-0-0-6-branch.

commit 5bf6a26aeb2a89b4ed599361f60cb68bf45e3956
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Feb 16 19:03:04 2003 +0000

    file mach64_state.c was initially added on branch mach64-0-0-6-branch.

commit bd6120a28c30fa0b62c8c07a2fc7a6790834abf3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Feb 16 19:03:04 2003 +0000

    file mach64_drv.h was initially added on branch mach64-0-0-6-branch.

commit afcfefa6dc296b4863b1c83ebcf8143750af65ad
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Feb 16 19:03:04 2003 +0000

    file mach64_dma.c was initially added on branch mach64-0-0-6-branch.

commit 314d1d2cbee3fe0851d914c57cc09bf388e8ac37
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Feb 16 19:03:04 2003 +0000

    file mach64.h was initially added on branch mach64-0-0-6-branch.

commit 639c2d813f91c80aca66b13242b8d45a1ea986e8
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Feb 8 18:02:02 2003 +0000

    reclaim DMA buffers in DRIVER_RELEASE() (Felix Kühling)

commit fac2ed4d10e4d8283f818989df5d5722a447aac4
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Feb 6 18:20:00 2003 +0000

    fix EAGAIN handling in radeon_cp_dispatch_texture() (fixes corruption of
        large textures), and get rid of superfluous local y variable

commit b88cc5da26cf1478e425a6398456b52e27f53626
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Feb 4 19:28:52 2003 +0000

    disable strict aliasing for building the DRM

commit 73bf29a6c14d12f86fbce48f6f6bace0de6732a6
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Feb 4 19:20:18 2003 +0000

    fix PCI and AGP posting problems (based on testing by Chris Ison and
        suggestions by Benjamin Herrenschmidt and Arjan van de Ven)
    remove radeon_flush_write_combine() which has been unused for a while

commit f13af50838a2a207269ef46c3561ca1250dc6c12
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Feb 4 15:56:37 2003 +0000

    only acknowledge interrupts we handle - others could be used outside the
        DRM

commit f3751850c8b5b4216c460474147e0dcfc26a144e
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Feb 3 14:30:32 2003 +0000

    Fix size of VERTEX2 ioctl struct (Egbert Eich)

commit c7d471b6ae936127311a816a8d15b4565746af48
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sun Feb 2 03:06:47 2003 +0000

    don't inflate relative vblank sequence numbers on repeated calls (e.g. when
        interrupted by a signal)

commit 9b9b099471580616e1685bae725f2c297179ae99
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Sun Jan 26 22:25:35 2003 +0000

    Add cast to avoid void * arithmetic warning

commit 66f57c403c012f55126817bc21d40346d29d2d35
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jan 24 00:49:15 2003 +0000

    Fix build on -current: Provide M_WAITOK define.

commit 77ea378b09a86a9fe73d0ecef40f5570068c9af0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Jan 16 06:20:44 2003 +0000

    Fix radeon for BSD.

commit 826aad0aba648befe09592f154f75db5009a0cd9
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Jan 11 20:58:20 2003 +0000

    limit number of pending vblank signals to 100 to prevent DoS, and minor
        cleanups

commit 6f940bc3f8aeb09925354445e92e9c0e74515b13
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Jan 11 05:42:37 2003 +0000

    file agp_30_symbols.h was initially added on branch agpgart_2_0_branch.

commit a1fc6af2d8937fcc4eef25119d777e168e62b2ea
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Jan 10 17:04:21 2003 +0000

    Note that radeon_do_cp_idle() can fail, cope with it.

commit 4b3051d3f606faf1a78ac85236119a1d2e10fdc7
Author: Rik Faith <faith@alephnull.com>
Date:   Mon Jan 6 07:38:25 2003 +0000

    [TRIVIAL] [TRIVIAL PATCH 2.5.48] Remove unused function from radeon_mem.c
        Submitted by Rusty Trivial Russell

commit 320802ebc145c0b821979dc587cd7e90b10b2d55
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Jan 3 11:22:23 2003 +0000

    more cleanups, free mem heap data on last client exit

commit 7419aa6e3f639ee47879824f387117d28b4de013
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jan 2 18:59:43 2003 +0000

    Bump radeon drm version nr on recent interface relaxation

commit 14e831baf4ea2a412c9173cd9ec16b4928284232
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jan 2 18:41:02 2003 +0000

    Remove printk

commit 208c0779b65242159bbb87153269faef9370670c
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jan 2 18:38:07 2003 +0000

    Make the radeon drm module better at cleaning up after itself if all the
        clients (particularly the X server) exit without doing so for it.

commit ab9eb685c002bc875e9a7d81b7ac7bd5fd0be1d4
Author: David Dawes <dawes@xfree86.org>
Date:   Mon Dec 16 19:18:51 2002 +0000

    file i830_irq.c was initially added on branch mesa-4-0-4-branch.

commit 05f761fa4fe6d9b34b44e7cfe57a8e11263b0e3c
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Dec 12 22:20:30 2002 +0000

    enums should be ints

commit 786228bd26d56c13fc2655431ee5ca2d4d0c9863
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Dec 12 16:45:31 2002 +0000

    bring in jantorial changes from 2.5.51

commit fd621fd4a0c0033365353b6d33f132c7ef49b359
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Dec 11 13:40:27 2002 +0000

    remove agpgart informational

commit b03fa556b2c7e19d7021c017e35aaacaf24e5694
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Dec 6 12:22:43 2002 +0000

    Rewrite radeon_cp_dispatch_texture() to avoid pingponging back to userspace
        when issue large (multi-buffer) uploads.

commit a885d6786f40fd0c4dbcb09a17f6e103d0949ed7
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Dec 6 02:27:30 2002 +0000

    Add vblank signal code for BSD DRM. Untested so far, but working with a
        4.2.0 userland at least.

commit 85025d4f2ad25258fb7678395b8c7ce1be1f0063
Author: Michel Daenzer <michel@daenzer.net>
Date:   Wed Dec 4 15:39:53 2002 +0000

    further vertical blank interrupt cleanups: remove unused variable,
        non-ambiguous variable names, don't express subtraction in
        unnecessarily complicated ways

commit 4acba63bb7045e6bf665580cf6cea111f0786f77
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Dec 3 00:43:47 2002 +0000

    vertical blank interrupt cleanups: use spinlock instead of semaphore, send
        signal directly from interrupt handler instead of using a taskqueue
        (based on feedback by Linus Torvalds)

commit 40891ac190fb74f389ea1a9758249a2f642fd99b
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Nov 30 14:24:07 2002 +0000

    vertical blank ioctl can send signal instead of blocking

commit c869f4a1e59c4fa0bed5681cad5ad49e685603eb
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Mon Nov 25 16:03:20 2002 +0000

    added missing return fd (Alexander Stohr)

commit a654424ca16dca5d27e91592e2082d1381f6d5f5
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Nov 25 09:34:47 2002 +0000

    Silence the radeon_freelist_get 'returning NULL' message. It's not an error
        & just confuses people.

commit b96f48a89c8962343ee75b0961a06453d0f8b355
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Nov 23 11:58:33 2002 +0000

    allow unprivileged clients to use the GETPARAM ioctl (Wang WenRui)

commit e656655a361acf73c5652fcef8cf6ba61dfe7a50
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Oct 30 06:10:34 2002 +0000

    Kernel support for vblank syncing on Rage 128 and Matrox.

commit 344c7f6b412c19c963c33709f0d4a3a7205e1d79
Author: Jens Owen <jens@tungstengraphics.com>
Date:   Tue Oct 29 20:29:05 2002 +0000

    updated e-mail addresses for Keith, Alan and Jens

commit 5e1b8ed88ae8fb8b697515140f7a00d022ac2db0
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Oct 29 13:49:26 2002 +0000

    preserve CRTC{,2}_OFFSET_CNTL in 2D driver to avoid bad effects when
        pageflipping after a mode switch
    take current page into account in AdjustFrame(); writing the CRTC offset
        via the CP was probably a bad idea as this can happen asynchronously,
        reverted
    take frame offset into account when flipping pages
    handle CRTC2 as well for pageflipping (untested)
    preserve GEN_INT_CNTL on mode switches to prevent interrupts from getting
        disabled

commit 10900dab7caa593a54d76e5f6abdc3df9bdd0a04
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Oct 29 03:20:21 2002 +0000

    Use bus_alloc_resource/bus_release_resource more properly: save the rid
        returned by alloc.

commit ff25e7016c74ed0be5d47be5bf1937335da2bbf4
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Mon Oct 28 19:05:40 2002 +0000

    merge from mesa-4-1-branch to get cube-map registers. bumped version to 1.7

commit 516392beff156f87b466ff7931e5573a3a931ca0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Oct 27 05:25:50 2002 +0000

    s/udelay/DRM_UDELAY/

commit 9f21f02217dd8b81886f042ce1af99d61de9a218
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Oct 27 05:24:33 2002 +0000

    Catch up to -current.

commit b3a20ce219b353aa3e2b7f3b47ffd28b279557c7
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Oct 22 23:38:53 2002 +0000

    final part of XFree86 4.2.99.2 merge

commit ff4baa69da278b7f616063f37fbd27febf3eb211
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Oct 22 13:43:45 2002 +0000

    Import of XFree86 4.2.99.2

commit 5e9fad35880e89d428ba917d842d0e9ed9a1be6b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Oct 14 23:35:24 2002 +0000

    Fix reversed test that broke vblank waiting on FreeBSD.
    Pointy hat to: anholt

commit 3d69766ea6df4ab1837f5270beafb13c70ec61e6
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Oct 10 08:25:40 2002 +0000

    Jonny Strom's mga_dma.c patch

commit 2af90a581d20c983446d354051f0f098a5d4eacb
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed Oct 9 16:29:01 2002 +0000

    replaced max() macro with conditional expression

commit aa1ca406d637a1eabbff272c0508bed5eb1147a1
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Oct 8 08:32:06 2002 +0000

    Fix error condition...

commit a653224403a9c85b1406697e725226e0d477042a
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Oct 8 08:29:47 2002 +0000

    Call pci_enable_device() in DRM(irq_busid).

commit 381e0fe7f8ee5a9500fdb91d83ce45915b64db5f
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Oct 2 07:55:27 2002 +0000

    Free correct block in free_block (K. Rasche)

commit 8c14585fc33f2af781261303780c0df70fbe0db2
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Oct 1 17:31:20 2002 +0000

    fix wait condition for vertical blank IRQs

commit 537f2208f00069913c161750baef82964d0e870e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 29 23:56:17 2002 +0000

    Remove some noise being spit to the console.

commit 506c1c02a43970e8ae891c9015eba7ab581d08f3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 29 23:21:55 2002 +0000

    Make our set_bit and friends match linux better (cleans up some warnings)

commit efda4ce3539c9adf5fc798bb5e0ba5e8ce804afb
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 29 22:47:08 2002 +0000

    warnings cleanup

commit 33a51d8518c37833a83225b47ad0b435050edeae
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 29 22:39:34 2002 +0000

    Fix some of my silliness in DRM_WAIT_ON (not returning EINTR).

commit 899df4f53009d8484648ca12133a6ef8b1bd2d52
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sun Sep 29 21:22:01 2002 +0000

    Turn boxes off again

commit 9243e642dabc30ddf4b1743acb8cd4e9e905f351
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sun Sep 29 21:19:01 2002 +0000

    Move os-dependent stuff out of radeon_irq.c

commit e6901cad696cf58ee9f1a48bdc7e9fa047824f8a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 29 20:48:18 2002 +0000

    Fix up BSD irq handling.

commit ec48dfa83599fa6061bb9cc566f8d8dc1727aced
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sun Sep 29 00:12:28 2002 +0000

    add support for 16K and 64K page sizes (Bjorn Helgaas)

commit a33d42e2ba08a97a434c25980449f4e027d0072b
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Sep 27 21:47:52 2002 +0000

    make SW interrupts more robust: write sequence number to scratch register,
        acknowledge any lost interrupts before waiting

commit cc9a169d08c00975f623d717737b499defb4938e
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Sep 26 12:49:18 2002 +0000

    DRM(vblank_wait) is driver specific

commit 97961e2c65773328fe9c2e1d66e4a0b8a253d54d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Sep 26 07:45:07 2002 +0000

    BSD vblank framework.

commit 770d045d25728be51534b930afdfa36f3ffddbfc
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Sep 26 07:21:05 2002 +0000

    Fix one warning.

commit f40674ea9f3e3c17d632de90d7e35da5640a55b2
Author: Michel Daenzer <michel@daenzer.net>
Date:   Wed Sep 25 19:48:51 2002 +0000

    change RADEON_PARAM_IRQ_ACTIVE to RADEON_PARAM_IRQ_NR

commit 55acd0d5a64a2ee6b0cecc75872fbf8c4bb42a0c
Author: Michel Daenzer <michel@daenzer.net>
Date:   Wed Sep 25 17:18:19 2002 +0000

    common ioctl to wait for vertical blank IRQs

commit f1c8fe95578e15d5eece6ad52540ce2c7c671f70
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Sep 23 17:26:43 2002 +0000

    merged r200-0-2-branch to trunk

commit cfa1a918b6d6b2d0fd9ae0f58f5b86a15c443dcb
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Sep 21 23:18:54 2002 +0000

    make sure we never oops because the hardware lock pointer in the sigdata
        structure is out of date

commit c4318a5c642d15ad3847a0b7a3185abf0c1ca219
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Sep 11 00:57:49 2002 +0000

    - Fix various bugs in the DRI support for the i830 and i845G (Keith
        Whitwell).
    - Major rework of the 2D i830/i845G support, including:
    - Improve VESA mode selection, and fix refresh rate selection.
    - Don't duplicate functions provided in the vbe modules.
    - Don't duplicate functions provided in the vgahw module.
    - Rewrite memory allocation.
    - Rewrite initialisation and save/restore state handling.
    - Decouple the i810 support from i830 and later.
    - Remove various unnecessary hacks and workarounds.
    - Fix an 845G problem with the ring buffer not in pre-allocated memory.
    - Fix screen blanking.
    - Fix some HW cursor glitches, and turn HW cursor off at VT switch and
        exit.
    - Don't attempt to use the i830's function 1 entity.
    - Fix problems with option handling. (David Dawes).
    - Add mode VBE-aware mode handling functions to the vbe module (David
        Dawes).

commit 9797f0fd172c7d87e009dbfe7603c9df48509394
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 30 23:49:25 2002 +0000

    Remove some extra symlinking for kernel module building that hasn't been
        needed since 2000.

commit b248c02c4ffaaaef4c91d8024808c35bcbfa303b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 30 21:34:03 2002 +0000

    Remove this one too: it'll be used from the linux version (if ever)

commit d51ec6b9728e8da473fb06e23424a1f6c0ee8e9b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 30 21:06:21 2002 +0000

    Remove compat functions for FreeBSD for drivers which weren't available in
        X4.2

commit be88ab60dfbacddbc424c7e6bc558abf13eafa9d
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Aug 30 07:55:25 2002 +0000

    file radeon_irq.c was initially added on branch r200-0-2-branch.

commit 4fcde1efc16ef0849c7aa61d568ef5577e2f1920
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Aug 29 07:34:49 2002 +0000

    standardize use of __FUNCTION__ (Linus)

commit 22c1ca1fd5116d55c81bbfdeccd995dc19572a8f
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Aug 28 08:47:39 2002 +0000

    Turn boxes off.

commit 8a8cfd38df9a48069c4ca56006d219e0eb8ca59c
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Aug 28 04:33:02 2002 +0000

    Remove i8x0 files from the BSD side. These were not actually ported, and
        when they do get ported most of them won't live in these directories.

commit fa560b4847fc89aa68251236d3843b97518b1853
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Aug 27 12:16:32 2002 +0000

    file radeon_mem.c was initially added on branch r200-0-2-branch.

commit e4830ba553eda00783261073cf4082176b4c2fe2
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 27 03:56:10 2002 +0000

    Remove drm_linux.h, it's no longer used.

commit 5e81d590d557672376795011b9d78e93d10e2f7f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 27 01:22:55 2002 +0000

    Include non-radeon modules in the build.

commit 48cc350e21acd2b4b03c76937e2861af5271435a
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Aug 26 22:16:18 2002 +0000

    merged r200-0-1-branch

commit a697941d4c35e0287c51f1a5cad5c2aa32ae9159
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Thu Aug 22 19:35:31 2002 +0000

    Don't (re)define vmalloc_to_page for kernel >= 2.4.19, as it has been
        backported from 2.5.x. Also fix a couple of incorrect
        LINUX_VERSION_CODE tests and fix header dependency for r128, radeon
        when building without AGP.

commit 2febcafd66adfe0728f93e4b9b2954d793f71459
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Thu Aug 22 18:43:39 2002 +0000

    SetPageLocked only defined in 2.5.x (x=?), use LockPage for 2.4.x (x>=9).
        Also apply build fixes from i810_dma.c to i830_dma.c

commit 18d3fac990b9f3b5820306129feb5563b5d207f4
Author: Jose Fonseca <jrfonseca@users.sourceforge.net>
Date:   Wed Aug 21 14:09:28 2002 +0000

    Change the linux kernel version condition in the i810 driver (according to
        Alan Cox)

commit 77c35c043a8d50244d4fbaa4f2b5d0b7d4fd856f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Aug 21 07:14:21 2002 +0000

    Remove drm_linux.h, move the two useful defines into drm_drv.h (the only
        place they're used). Use fd locking on -current. Actually copy in data
        from userspace to kernel in the linux-compat ioctl path. Make sure
        ioctl sizes are as expected in the ioctl handler functions.

commit 8eedac58332094c72caf1fc6c41312e8ce1728b7
Author: Leif Delgass <ldelgass@users.sourceforge.net>
Date:   Wed Aug 21 01:14:43 2002 +0000

    add missing include (for udelay), remove unused counter.

commit 3165128fc461fdadf34b7f4bbd393fa076c1ae14
Author: Michel Daenzer <michel@daenzer.net>
Date:   Wed Aug 21 00:09:32 2002 +0000

    TRUE and FALSE don't seem to be defined everywhere...

commit 33d57137daece1bc5b1e8cc0a11e45a9d5974939
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Aug 12 07:26:00 2002 +0000

    zero-cliprect case patch from Jacek

commit d0ac4e5ad0481eb634b3b811a94f4a2b6587e479
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sun Aug 11 15:56:44 2002 +0000

    test scratch register writeback before using it

commit d2f2b42f1d206fd248ada48ce2c498e31351ab33
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Aug 8 21:23:46 2002 +0000

    Try to open the /dev/dri/cardX device once, then only if it fails check the
        device number and recreate it if necessary. Fixes xf86drm.c to allow
        linux binaries to be used for emulation on FreeBSD.

commit 977b420d5dc66db3d4335132861a1eff3747b49a
Author: Rik Faith <faith@alephnull.com>
Date:   Tue Aug 6 18:00:57 2002 +0000

    Updates from Rusty Russell to:
    1) Remove redundant header inclusion
    2) Silence bitop on non-long argument warnings (change int to long)
    3) Move to ISO C (gcc 2.6) initializers (accepted by older gccs also) All
        of these are syntax changes that should not impact functionality.

commit 881a9b214d033a1e153f61996645bdaa37eb87d8
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Jul 18 23:17:13 2002 +0000

    fix off-by-one error for right bottom corner in radeon_emit_clip_rect()
        (Jacek Rosik)

commit 8fa8db126a6aa180fd44ae0be0e720722af69e1d
Author: Tim Smith <electronghost@users.sourceforge.net>
Date:   Wed Jul 17 08:30:36 2002 +0000

    Workaround for Radeon lockups on fast machines

commit 9a3a3143ce41c72b4de2721cf16025f11ca334ca
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sun Jul 14 20:26:52 2002 +0000

    bump DRM minor and check it before using the GETPARAM ioctl to obtain
        scratch register values

commit fd86ac9561dc77ef23e19d28723b40c72bdf1e97
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Jul 11 20:31:12 2002 +0000

    Don't read scratch registers directly, obtain the values via the GET_PARAM
        ioctl. The DRM reads them from memory addresses the chip writes to on
        updates. Fall back to reading the registers directly with an old DRM.
    (Tim Smith, cleanups by myself)

commit 2ec9c15d8ce45d95ef395a4fff114109c908a572
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Jul 9 02:40:38 2002 +0000

    Increase the linux-compatibility max ioctl.

commit 9ceabc585a20a3f992f2b3852d476df81855967a
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sat Jul 6 09:43:12 2002 +0000

    remove obsolete files

commit 59c07e447b18708757375d969f8eef5abd3c9a93
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Jul 5 08:58:15 2002 +0000

    remove files missed by merge

commit 74ef13fd009b9e37956e4207d0a5ed92f4b5e39a
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Jul 5 08:31:11 2002 +0000

    merged bsd-3-0-0-branch

commit 24025ca5f78c15ced14490532b4410730353d2c1
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jul 4 12:03:15 2002 +0000

    Fix some more pageflipping issues -- existing code was doing MMIO writes
        while ring was active. There is still an MMIO read in there, but I
        haven't seen any lockups that could be attributed to it.

commit ca81e1334edebb90b0528baad089fbc6df937fb6
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jul 4 11:55:44 2002 +0000

    Revert SET_SCISSORS change.

commit cc45cc060963356edd832d1bbdf21da46e01c8fb
Author: Tim Smith <electronghost@users.sourceforge.net>
Date:   Tue Jul 2 21:34:25 2002 +0000

    Fix lockup on faster machines when drawing in multiple clip rectangles
        (e.g. when part of a 3D window is obscured by another window)

commit bb91bc0879ccc1981c49fa761e9bd58bceb1e5cd
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jun 27 17:56:39 2002 +0000

    Set pfCurrentPage on cleanup_pageflip

commit 8aecdbea7660ae184827a0812fc4bbd953279c5b
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Jun 25 12:13:20 2002 +0000

    gamma_alloc -> DRM(alloc)

commit f626cf76e61313152e57334c7f172de97235d169
Author: Max Lingua <sunmax@users.sourceforge.net>
Date:   Tue Jun 25 11:20:36 2002 +0000

    file s3v.h was initially added on branch s3virge-0-0-1-branch.

commit 4cdcbd6c2f8f7026fbf2435001fc1e90de01505c
Author: Max Lingua <sunmax@users.sourceforge.net>
Date:   Tue Jun 25 11:20:36 2002 +0000

    file s3v_dma.c was initially added on branch s3virge-0-0-1-branch.

commit 4073aa694c2de2f65f37afef93abeab139c1aa30
Author: Max Lingua <sunmax@users.sourceforge.net>
Date:   Tue Jun 25 11:20:36 2002 +0000

    file s3v_drm.h was initially added on branch s3virge-0-0-1-branch.

commit 5f8b0028a26cdbe0996abc243602010ae8af755e
Author: Max Lingua <sunmax@users.sourceforge.net>
Date:   Tue Jun 25 11:20:36 2002 +0000

    file s3v_drv.c was initially added on branch s3virge-0-0-1-branch.

commit 688082d6564644f2f64a44105c872cc57476a1f6
Author: Max Lingua <sunmax@users.sourceforge.net>
Date:   Tue Jun 25 11:20:36 2002 +0000

    file s3v_drv.h was initially added on branch s3virge-0-0-1-branch.

commit 978136f2f4dd12d1828ab41db5343ce5fccd52a9
Author: Max Lingua <sunmax@users.sourceforge.net>
Date:   Tue Jun 25 11:20:36 2002 +0000

    file s3v_regs.h was initially added on branch s3virge-0-0-1-branch.

commit 663c9a152a868ca9e1dbd6ab000f2da273d737ea
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file radeon_state.c was initially added on branch bsd-3-0-0-branch.

commit 3fe7fb316c6f160ec8b6ef2a8ebf159e71cd2283
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file radeon.h was initially added on branch bsd-3-0-0-branch.

commit f8794f23f6d9318a9797949f1761119706baae42
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file radeon_drm.h was initially added on branch bsd-3-0-0-branch.

commit 1942da19d46f67afbdf3da8103f3260377bbbe89
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file mga_dma.c was initially added on branch bsd-3-0-0-branch.

commit baf55c1b8b5560104e29e5f4089ccdde4bb111db
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file mga_drv.h was initially added on branch bsd-3-0-0-branch.

commit df6e570e4de5e57173d4b3b63ddaa0ba1a11e15e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file mga_ucode.h was initially added on branch bsd-3-0-0-branch.

commit 2a0545aa19db1d861290df07709cbd58a2a820f3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file mga_warp.c was initially added on branch bsd-3-0-0-branch.

commit 0ca7468d0602e46aead3e645de714345cb75c5f3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file mga.h was initially added on branch bsd-3-0-0-branch.

commit d29446a3002a8f60736ab3bcb7a1f22a8f2818f0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file mga_state.c was initially added on branch bsd-3-0-0-branch.

commit 1c9c08717a09cdb5fa9b40e7ed43efa7f76b82f3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file radeon_drv.h was initially added on branch bsd-3-0-0-branch.

commit 5dd77d6e49205ff5ac71d832de270681ba186558
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file mga_drm.h was initially added on branch bsd-3-0-0-branch.

commit a3ddb601df69116be8e40481471b523e163bf65b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jun 21 06:08:46 2002 +0000

    file radeon_cp.c was initially added on branch bsd-3-0-0-branch.

commit 9e3d3c9541bc167831841156b99f31cfa5cb39be
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 19 04:01:55 2002 +0000

    file r128_state.c was initially added on branch bsd-3-0-0-branch.

commit c4f11163699b1046ec51b27440154fd3ad4bb727
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 19 04:01:54 2002 +0000

    file r128_drv.h was initially added on branch bsd-3-0-0-branch.

commit 89181b9c599988e9b46f2a3d1de5ec47b8cc8c43
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 19 04:01:54 2002 +0000

    file r128_cce.c was initially added on branch bsd-3-0-0-branch.

commit 2015f551378e19bc3a1727de2c3f68cec4ac1a42
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 19 04:01:54 2002 +0000

    file r128.h was initially added on branch bsd-3-0-0-branch.

commit 5465239b0c422b4f8c1ef13e4353877fa9229993
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 19 04:01:54 2002 +0000

    file r128_drm.h was initially added on branch bsd-3-0-0-branch.

commit 063d0a30c2a9899ae52d50ad5d37d6171e37e3f8
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Jun 18 22:40:26 2002 +0000

    endianness fixes

commit 1cb07189420a529a43ad390731f8365a0805a9bd
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Jun 17 22:18:00 2002 +0000

    file drm_os_netbsd.h was initially added on branch bsd-3-0-0-branch.

commit 2dcada361db7db00bf0796e399b4188578e3efbe
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Jun 12 15:50:28 2002 +0000

    merged tcl-0-0-branch

commit 5676a2a6105afdfc343e7f36f3c87e528a9d14b3
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sun Jun 2 16:00:45 2002 +0000

    fixes for big endian in general and powerpc in particular

commit 6ac48cddd0a074c77de0ab3dfc1661352b6f0c26
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed May 29 21:21:50 2002 +0000

    Import Mesa 4.0 port of I830M/I845G 3D driver funded by 2d3d. Import
        Lastest i810 ddx driver changes from XFree86 CVS to support the I845G.
        Fixup warnings in I830M kernel driver.
    -Jeff

commit 96b22f57ea9fa0dca36062d56c8f205e5b08fd84
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file r128_drv.c was initially added on branch bsd-3-0-0-branch.

commit 8e2b1e79da105a406cc33d8bb3b8cab35337647e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file mga_drv.c was initially added on branch bsd-3-0-0-branch.

commit 468b72512aa0e70de60506e4f03ea6d365e56267
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file tdfx.h was initially added on branch bsd-3-0-0-branch.

commit ba9503de430f8e0a34bf9ed8c2dc9a635959eeb0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file i830_dma.c was initially added on branch bsd-3-0-0-branch.

commit d1c2922d76ab81bde00e504b179a7afb39b6fc78
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file i830.h was initially added on branch bsd-3-0-0-branch.

commit 8a0fe9be3463e9244055847e5cd4f8df485526e8
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file i830_drv.c was initially added on branch bsd-3-0-0-branch.

commit dbf4b0aecb2d6efd9f9fafd3fd7c7eae6c59f3ba
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file i830_drv.h was initially added on branch bsd-3-0-0-branch.

commit 205e33909d26b587e36527b3fae6c4ed9cddab34
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file i810_drv.h was initially added on branch bsd-3-0-0-branch.

commit e8ba43d3ac7982cc16b4cdc81671375f41e66a6f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file radeon_drv.c was initially added on branch bsd-3-0-0-branch.

commit f6126878dce5bc800252c9a8d095e9ac30f4d5ca
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file i810_dma.c was initially added on branch bsd-3-0-0-branch.

commit 8fc7367069eaf14e30010f5a56fc4cbac15e39da
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file i810_drv.c was initially added on branch bsd-3-0-0-branch.

commit 8afc2de290e1aed0377c097d05077d9aac2e4897
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file i810.h was initially added on branch bsd-3-0-0-branch.

commit 76c315e7e09e84b135033c7bad74b1297ee72fe6
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file gamma.h was initially added on branch bsd-3-0-0-branch.

commit 073cf3ae4818f8f1b720dbc58bdcf61ce62d11e0
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file mga.h was initially added on branch bsd-3-0-0-branch.

commit d10db84928384084d9ab17bcca3d2880ecd611de
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file mga_dma.c was initially added on branch bsd-3-0-0-branch.

commit c5b8f939db83d8de9c983b622c6003eca36ea4d2
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file mga_drv.h was initially added on branch bsd-3-0-0-branch.

commit abbe04f64fab2a9fa2099756b776ec634df9fd82
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file mga_state.c was initially added on branch bsd-3-0-0-branch.

commit 8797372f642018de3b5d7142e9c9f51d4eab999d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file mga_ucode.h was initially added on branch bsd-3-0-0-branch.

commit 49a57237e029892ee788f059c99bad5ccf9df1a1
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file mga_warp.c was initially added on branch bsd-3-0-0-branch.

commit 3ddd3c649de865d44ad737b8510d46ce273bd728
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file r128.h was initially added on branch bsd-3-0-0-branch.

commit c57397bf62734000673411231c8ac2b35f731e39
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file r128_cce.c was initially added on branch bsd-3-0-0-branch.

commit eea2997098406bfd5a9dd4f93034e5715d5a641e
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file r128_drv.h was initially added on branch bsd-3-0-0-branch.

commit 47d39609fe713e57ab9c1391f5ac2c2be71594df
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file r128_state.c was initially added on branch bsd-3-0-0-branch.

commit 3e15d0e63c67158742f2c5434333213923f7b0fe
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file radeon.h was initially added on branch bsd-3-0-0-branch.

commit 731dbf2dfccbf44f375f58d7dda91d9b2f1ab9ce
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file radeon_cp.c was initially added on branch bsd-3-0-0-branch.

commit c12d19453954dd2ade830fac50bd4669954c7aab
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file radeon_drv.h was initially added on branch bsd-3-0-0-branch.

commit 69e99d05a29d91e87f32affdc4776f76552b5783
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed May 29 08:44:52 2002 +0000

    file radeon_state.c was initially added on branch bsd-3-0-0-branch.

commit cd375832813a66491f43c3f5e56ed74670955e43
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri May 17 08:35:47 2002 +0000

    Remove some older Linux 2.3.99 code

commit 91d7b17e82e8d8659405832a3cd1e7a904ad283f
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri May 17 08:21:34 2002 +0000

    same udelay fixes

commit 9e67da5626b683df58f2041fdb0f743eb4da7036
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu May 16 23:47:15 2002 +0000

    Allow drm to build under 2.4 and 2.5(.14)

commit 3903e5ac94c07cf31f0bc24eff5011ef8cc7afba
Author: Jens Owen <jens@tungstengraphics.com>
Date:   Tue Apr 9 21:54:56 2002 +0000

    Merged drmcommand-0-0-1

commit a820c741374743065540546c92b1d5e1a2089225
Author: Jens Owen <jens@tungstengraphics.com>
Date:   Fri Mar 29 16:31:52 2002 +0000

    file xf86drmCompat.c was initially added on branch drmcommand-0-0-1-branch.

commit 31c885bafb47e24b8523dcc2850ce4acc8ef1004
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Mar 18 19:21:14 2002 +0000

    file trident_drv.c was initially added on branch trident-0-0-1-branch.

commit f0e215d3f946321fadad62cbc4e380b9f30ceb49
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Mar 18 19:21:14 2002 +0000

    file trident.h was initially added on branch trident-0-0-1-branch.

commit 2ab6ff71900ad068f6d5b8ee42743e13c928cedf
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Mar 11 11:26:13 2002 +0000

    fixups for *BSD

commit baef086c324769010f0d164c0fe03105d9e474e1
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Mar 8 16:03:37 2002 +0000

    Fix backwards compatibility bug, add tests for good numbers of
        vertices/prim.

commit 6a1941aa2431f3f4febb0f7aa3df127976eea33f
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Mar 8 09:00:12 2002 +0000

    missing file

commit 271830e9b6f32f66ffa62d55fafb21b5892ab122
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Mar 6 20:14:30 2002 +0000

    fixup the radeon driver (not tested)

commit 5e734a7ac85f7bd8b333a28cf26745d1960a3a43
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Mar 6 19:31:39 2002 +0000

    i830 & mga contain minor changes from 4.2.0 for mesa 4.0 bsd merge

commit 46cacdca855a99c1ffe0ccf7a7f88134bca9bade
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Mar 6 19:30:45 2002 +0000

    first pass at merging mesa 4.0 kernel drivers into new bsd-3-0-0 branch.

commit ab87c5d0d1b5c35006ce8b99a9260e3116c732dc
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Feb 14 02:00:26 2002 +0000

    First pass of mesa-4-0 branch merge into trunk.

commit 65d25572deec33b7da13c211bf0aa78c361f535a
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Feb 2 17:03:51 2002 +0000

    wrapper for ioremap_nocache() like for ioremap() (Paul Mundt)

commit 44aa4d6297874022a4f5a49ea24f2d052584d3dc
Author: David Dawes <dawes@xfree86.org>
Date:   Sun Jan 27 20:05:42 2002 +0000

    First pass merge of XFree86 4.2.0 import.

commit 14945ada16218e9f918c24e0d702979fae9b07f6
Author: David Dawes <dawes@xfree86.org>
Date:   Sun Jan 27 18:23:04 2002 +0000

    Import of XFree86 4.2.0

commit 16bd14926e02e4dbc6e74689bdb3eb90f30a0233
Author: David Dawes <dawes@xfree86.org>
Date:   Sun Jan 27 18:23:04 2002 +0000

    Initial revision

commit f18a6d836b5e0081dff9217b44e88e74c421c576
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Dec 10 23:29:37 2001 +0000

    merge with linux kernel 2.4.15

commit 727abee235478a66c90a8cd097f85307e232524a
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Tue Nov 27 11:43:12 2001 +0000

    Put back i810 major version number (same reasons as for r128)

commit 13e11e1f94ce2fcf2ce86be1400b644560cb066c
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Mon Nov 26 13:28:38 2001 +0000

    Put drm version back from 3.0 to 2.2; XFree86 4.1 is the baseline for
        versioning information.

commit 05fb3e93f2f99a1ace1444c8f0669067f553504b
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Nov 2 17:40:11 2001 +0000

    wrap the MODULE_LICENSE definition.

commit 92ad1b60e109170e1fa7d22a4627efa7fa77aa71
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Oct 22 19:15:04 2001 +0000

    merge kernel 2.4.13-pre6.

commit 87ec138e1421f408c0fa86fa3567544dd488711e
Author: Manuel Teira <mteira@users.sourceforge.net>
Date:   Sun Oct 21 21:08:15 2001 +0000

    file mach64.h was initially added on branch mach64-0-0-2-branch.

commit bdd84e895838328d5a7f20e7063c49cd6f300fd0
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Oct 8 12:58:20 2001 +0000

    commit Abraham vd Merwe fix.

commit ca820fca877faf4776be142417795a5945c606e6
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Sep 25 09:32:16 2001 +0000

    merge with 2.4.10 kernel

commit 390440c9399a3c01811f3b37c2628d6e905656e8
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Sep 18 11:00:23 2001 +0000

    remove Linux 2.3.x cruft.

commit b1c44c8ac1cfd7927d96fdd9dce15a9996c14073
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Sep 17 21:12:10 2001 +0000

    bumped the DRM versions (already done in ddx and client side drivers).

commit 2fabe808274e5769fbc2b871e36e06fab2364208
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Sep 17 10:30:17 2001 +0000

    Use CCE for 2D acceleration (Gerd Knorr)

commit 9e69d0dac61cc20ed20281bfa5b7e12124fa3989
Author: David Dawes <dawes@xfree86.org>
Date:   Sat Aug 25 03:13:04 2001 +0000

    - Remove the rest of the unneeded client-side libraries.
    - Use installed libraries that are not built here.
    - Don't build/install client-library related file and headers.

commit 27e24cbc0ad561b8dabad08dfd89ca0dfaa7449d
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Aug 24 11:09:50 2001 +0000

    file convert.c was initially added on branch bsd-2-0-0-branch.

commit c6bf9bae8ec49987c66dadd5f9313cc13eb5832e
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Aug 22 18:24:52 2001 +0000

    First part of XFree86 4.1.99.1 merge.

commit 2f060f44e0eb617059bf9301e62a0d2c202ddee1
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Aug 22 18:00:47 2001 +0000

    Import of XFree86 4.1.99.1

commit 063fe900aa895ff2b342843d68c003650b83c8c3
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Aug 21 21:54:04 2001 +0000

    file drm_ioctl_table.h was initially added on branch mesa-3-5-branch.

commit f4c2f1400203434d9a5392b990aaa4fa32dce9c5
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sun Aug 19 15:20:08 2001 +0000

    No one's maintaining 2.2.x support - so remove all the cruft.

commit 8aaf82d45c406220d5f18168e4350827a9e038e2
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Aug 14 00:35:07 2001 +0000

    A few warning fixes when actually building under 2.4.9-pre2 + some
        reformating

commit aa09e3611490d6a2f12f211c3c834f1237126313
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Mon Aug 13 23:23:47 2001 +0000

    Sync with Linus 2.4.9-pre2 + make all nopage routines more alike

commit 2d4b2cf6f69de2ceaf0c2b00ccbb24aad412b202
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sat Aug 11 15:48:00 2001 +0000

    new multihead code was missing Voodoo3 2000 and Voodoo4 support.

commit 97b8aa52bba602d5babe225983f7e4c7cb4d7492
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Fri Aug 10 16:29:21 2001 +0000

    Commit Keith Owens kernel Makefile changes, merge and commit alpha patch
        set from Jay Estabrook (sans some mga modifications which broke other
        arch's.)

commit b6923b39539c34c2a589197def5eee72a9d719bf
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Aug 8 16:10:47 2001 +0000

    Update to the code I sent Linus and Alan this morning. Added some missing
        agp chipsets to drm_agpsupport.h, redid the card detection common code
        to use a structure (avoids endian porting issues), changed the tdfx
        driver to use the kernel pci id '#defines'

commit 938a637d1fc33bc8ef14210d655c27d646ddc2d2
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Aug 7 18:22:41 2001 +0000

    Avoid compiler warning about r_list being used uninitialized.

commit 51e38d96ead5700c25c4fddd8017dc7992e96f5a
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Aug 7 18:15:10 2001 +0000

    Lots of DRM fixes: added new pieces of template code so the ffb driver can
        be ported, rolled back r128 and i810 version bumps so 4.1.0 works with
        cvs kernel modules, added Config.in and updated Makefile.kernel,
        incorporated lots of drm fixes inspired by patches sent by Redhat, made
        DRM(realloc) usage check for NULL allocations, restructure driver init
        routines to export dev_priv only when initialized and to check for all
        error conditions.

commit 56bd9c207770d41a497f3e8237a1099dd9d4cd91
Author: David Dawes <dawes@xfree86.org>
Date:   Mon Jul 30 19:59:39 2001 +0000

    Merge the multihead-1-0-0 branch into the trunk, with the exception of the
        glide header files.
    The changes include:
    - Brian Paul's changes to the tdfx client-side 3D driver to make it
        dlopen() the correct glide library (Voodoo3 or Voodoo5). This allows
        both types of the glide library to co-exist, and allows Voodoo3/Voodoo5
        cards to be mixed in multi-head configs.
    - DRM kernel driver changes to allow a driver to set up multiple instances
        (minor numbers), one for each card present that the driver supports.
        This is currently implemented and tested only for the tdfx DRM driver.
    - Add some missing missing <stdarg.h> includes.
    - Some log message cleanups.
    - Change the 2D tdfx driver to access VGA legacy registers via their PCI
        I/O space access points rather than their legacy addresses, and fix
        some problems with the way the VGA-related bits are initialised.
    Status:
    - With these changes, multi-head direct rendering works with multiple
        Voodoo3 and/or Voodoo5 cards. This has been tested with two PCI Voodoo3
        cards and an AGP Voodoo5 card, and all permutations of those.
    Caveats:
    - Xinerama is not supported. If Xinerama is enabled, then direct rendering
        gets disabled.
    - The text mode on secondary screens will show junk after the X server
        exits.
    - On some hardware, starting the X server on multiple 3dfx cards will
        result in a hard lockup. One workaround is to enable APIC support in a
        uni-processor kernel, or use an SMP kernel.

commit 84a5e7108773d5a5ff7242e1460c98e3acb178a8
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Mon Jul 23 20:25:38 2001 +0000

    Fixes that allow the modules to be built into the kernel

commit 5e8ba79eb6aabd85f52de43fcf30722268857f60
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Fri Jul 20 22:16:04 2001 +0000

    Merge checker fixes from Alan Cox made to the drm in the ac kernel tree.
        These aren't really security problems, but Alan has made some arguments
        that have convinced me that the code should be fixed anyway.

commit ae5b4effc05cd5ac44ab44c5c733c6599652f1eb
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Fri Jul 20 20:31:30 2001 +0000

    Remove module name hacks because we aren't going to implement this anymore
        because of Linus' comments

commit 4eafeec960c29369982a9b15c24681a3072f491d
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Jul 18 21:02:58 2001 +0000

    Add module version name at a lower layer of the code, allows things to be
        more flexible and allow older module versions to still work. Might not
        be final code if we move over to DRI kernel module version, but will be
        if we use XFree86 version. + Only build tdfx.o instead of tdfx-4_1_0.o
        since tdfx.o has never changed its API.

commit c6454e6a93544fd20f4b5d9cb2ee08725e9b6740
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Jul 17 22:31:26 2001 +0000

    Someone forgot to bump the r128 and i810 drivers properly before the 4.1.0
        release. Better late than never.

commit d5749d7603d397be7639266e6c740941af2004fb
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Mon Jul 16 22:42:36 2001 +0000

    Added version string to the end of the kernel module name. This allows
        multiple versions of the kernel module to co-exist on one machine.

commit b816802daf6818306473c35d8776202c69fd0083
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Mon Jul 16 16:57:12 2001 +0000

    i810 drm security fix

commit 7ccc528911137156f216a13c95ce946c5f65af15
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Fri Jul 13 01:42:48 2001 +0000

    Fix typo in XFREE86_VERSION().

commit 12e9c636dfb4fbaf229e884afa8febaecd79b475
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Mon Jun 18 19:25:15 2001 +0000

    Fix 5 security bugs found by the Stanford tools

commit b1a588f0cc9cd7b4f5b2150f03722ac09b7e8989
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Jun 18 13:45:23 2001 +0000

    Forgot to bump date stamp.

commit 3a410059b43027c08bcb0fef307dd4ee7734197e
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Jun 18 12:59:42 2001 +0000

    Enable shared IRQs in DMA template, use in i810 driver.

commit d87c873df05eb3a110316c7af2358553fa7f988e
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Jun 14 22:23:44 2001 +0000

    First pass of 4.1.0 merge.

commit 334e134918ee2ece3e845cd55c49c9709b67ee6c
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Jun 14 21:53:06 2001 +0000

    Import of XFree86 4.1.0

commit dca245e37c875660fa766a264377628dd3a311e5
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed May 23 17:41:31 2001 +0000

    Only authenticated clients can mmap() (Jeff Hartmann).

commit 18ce40c9d31c166b49e6689c260eb1ddb3cc08c9
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu May 17 15:20:40 2001 +0000

    Make the SiS module work again. At least glxinfo reports it's working, yet
        trying to run the simple apps return 'out of video memory'

commit 9c775d0b2f303389c24aea5e8abc1473f0cf93e8
Author: David Dawes <dawes@xfree86.org>
Date:   Mon May 14 14:49:58 2001 +0000

    finish struct stat type cleanup Fix a build dependencies for the tdfx drm
        module

commit 0813760110535d8989af187d23b4eedc4c6b225f
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri May 4 14:05:13 2001 +0000

    add some commented enclosures around the BUS_BASE calls for Alpha
        platforms.

commit 5f5d850013d6c846946f77b57e88a507232c0aca
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri May 4 09:31:35 2001 +0000

    file drm_linux.h was initially added on branch bsd-2-0-0-branch.

commit 726096309b86184b83cd5cb08c95fe7e870f443c
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri May 4 08:28:30 2001 +0000

    file drm_agpsupport.h was initially added on branch bsd-2-0-0-branch.

commit ebf0d7addfd51d1fafca354ebdcdb4fd17593616
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu May 3 14:52:29 2001 +0000

    add new file

commit 94c6d951a21f2d3b42cda0acb1b5dfc954c1c66b
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu May 3 14:51:01 2001 +0000

    Make SiS driver compile with the new templated format. Not tested. minor
        cleanups

commit d3645e7a4e0885aba8063c6cc41d7d9fded99982
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu May 3 14:32:59 2001 +0000

    remove deprecated file

commit 2ea12226a675cc8d4b95799129f143fa61d97296
Author: David Dawes <dawes@xfree86.org>
Date:   Tue May 1 21:39:35 2001 +0000

    Initial merge for XFree86 4.0.99.3 import

commit a576d41498b742502d4f7dbfeed44737ff79db8f
Author: David Dawes <dawes@xfree86.org>
Date:   Tue May 1 17:07:59 2001 +0000

    Import of XFree86 4.0.99.3

commit b804c09d0699131a8333c19a4d58cb14125d413e
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Apr 30 16:18:22 2001 +0000

    fix build of i810 kernel driver for 2.4.3 or greater kernels

commit df76f812924e4db284fd38b3c5db6b87ec0d82fc
Author: Kevin E Martin <kem@kem.org>
Date:   Mon Apr 30 15:07:18 2001 +0000

    - PCIGART patches for Alpha from Compaq

commit d1ef7f9d2c9f8f191ab79b1a43eb96a787df5f64
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Apr 30 13:24:28 2001 +0000

    file drm_vm.h was initially added on branch bsd-2-0-0-branch.

commit 2c0811d628249f81f29b85392d5eaae3c12f882e
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Apr 30 11:11:00 2001 +0000

    file drm_sysctl.h was initially added on branch bsd-2-0-0-branch.

commit ae1cc904624245d738bfdf8afb74776c4e9b1215
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Apr 25 14:20:17 2001 +0000

    file drm_os_freebsd.h was initially added on branch bsd-2-0-0-branch.

commit 376189905b8391295f18a5fac922d1d9546c7b43
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Apr 25 14:20:17 2001 +0000

    file drm_os_linux.h was initially added on branch bsd-2-0-0-branch.

commit 97e48b4cd1747e427e70af6e530ec57676f6189d
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Apr 25 12:59:04 2001 +0000

    file Makefile was initially added on branch bsd-2-0-0-branch.

commit b1488c2f87ab3b4d377b32a0c0ed0ba05e996f25
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Sat Apr 21 19:06:46 2001 +0000

    include linux/sisfb.h, per David Gaarenstroom

commit 49781fcf37e30ed17513bd13a90ded39ab1b0b9d
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Apr 18 18:45:20 2001 +0000

    put back BUS_BASE

commit 6f5e397f2549e7d5f806d2c44053d3d306a36f3a
Author: Kevin E Martin <kem@kem.org>
Date:   Mon Apr 16 21:43:28 2001 +0000

    - Fix typo and remove magic numbers

commit cc7afb2b16b84293258be0cc8bcffd32308cd3b9
Author: David Dawes <dawes@xfree86.org>
Date:   Tue Apr 10 18:45:17 2001 +0000

    Use the linux version of xf86drm.c.

commit 18fc5ee92394b31c00df8e72b1f29bada79292f5
Author: David Dawes <dawes@xfree86.org>
Date:   Mon Apr 9 21:56:31 2001 +0000

    First pass of XFree86 4.0.99.2 merge.

commit 1759c16ab9b64598968a0058039e8a66bf5f9773
Author: David Dawes <dawes@xfree86.org>
Date:   Mon Apr 9 16:27:54 2001 +0000

    Import -f XFree86 4.0.99.2

commit 0e7f6c0726e5ff08eeab8e17a5aa63fbe44b3410
Author: Kevin E Martin <kem@kem.org>
Date:   Fri Apr 6 17:53:32 2001 +0000

    - Fix typo
    - Clean up some macros

commit 908d32f84c33a4192b8381d74fc6bccc73e309f9
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Apr 6 15:49:42 2001 +0000

    search /lib/modules/<version>/build/include first, then the others....

commit 2bd9bf98c7bc0c23870f86f97341197114c3e70a
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Apr 6 08:39:02 2001 +0000

    Handle drivers that don't have __HAVE_SG defined.

commit 5d6ddbca26d695561fb1d08d798a0cc254b805e7
Author: Kevin E Martin <kem@kem.org>
Date:   Thu Apr 5 22:16:12 2001 +0000

    Merged ati-pcigart-1-0-0

commit a15b9dec3cfed3ce36826faf8c7d76284b0527a8
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Apr 3 08:01:00 2001 +0000

    include 2.4.2

commit 4259e5e61716d321aa3c1ac6d7ad4bf0e3c39a38
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Apr 3 07:50:30 2001 +0000

    make 2.4.2 -> 2.4.3 change conditional. works with older than 2.4.3 kernels
        again.

commit 62d49315299f4483b2e7fb44f21d6b09cef01afd
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Apr 2 01:17:18 2001 +0000

    Update radeon DRM to v1.1.0 (texture upload changes).

commit fcc21069b7019a4a93e1ceacc175ccd682353861
Author: David Dawes <dawes@xfree86.org>
Date:   Fri Mar 30 17:16:20 2001 +0000

    - Move xf86ConfigDRI declaration from xf86Priv.h to xf86.h.
    - Don't include xf86Priv.h in the drm module.
    - Fix 'struct stat' in loader libc wrapping to avoid unnecessary
        XFree86LOADER #ifdefs in code that uses it.
    - Make drmOpenMinor() static.

commit e407c2f5a611e30b05ea095f8b17d39fb5a7ebfa
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Mar 30 13:32:39 2001 +0000

    merge in 2.4.3 kernel change.

commit 301a1ad315bd7881adcf0df33c589e0a74c059f4
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Mar 21 20:22:16 2001 +0000

    Move #include <linux/config.h> inside the __linux__ #ifdef, so that it
        doesn't break non-Linux builds.

commit 92b0aaa6fe787c2e17bba1973d19d6fd5a61d03a
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Mar 21 13:10:27 2001 +0000

    - Fix MGA header info.
    - Update date strings.
    - Fix MGA hangs (undocumented side effects of DWGSYNC).
    - Remove idle before ILOAD??? Seems fine with the above fix.

commit b90028231c5c73783ee45124903794970f244978
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Mar 21 03:29:23 2001 +0000

    Remove compiler warnings, minor cleanups.

commit 86c41620a5f0a3b3af143bebdda0cca2114ade88
Author: David Dawes <dawes@xfree86.org>
Date:   Mon Mar 19 23:48:35 2001 +0000

    merge/build fix

commit 404a409ab302c99d8aceb85ede301b04780480d0
Author: David Dawes <dawes@xfree86.org>
Date:   Mon Mar 19 21:39:36 2001 +0000

    Initial XFree86 4.0.99.1 merge.

commit 0e5b8d77cfe0f86698041aebe31c54f59c877825
Author: David Dawes <dawes@xfree86.org>
Date:   Mon Mar 19 17:45:52 2001 +0000

    Import of XFree86 4.0.99.1

commit b42ff4f6600b97e9b7482152d5ea8713e800dc00
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Mar 19 12:16:24 2001 +0000

    Update version, date stamp.

commit 9914f4cf6057957bd77f1c1b0b9957537eafdfb9
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Mar 19 12:04:12 2001 +0000

    Remove PRIMPTR completely.

commit d15f98443295feeb4e3bd65b26f43c73d655e26e
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Mar 19 11:49:25 2001 +0000

    Try this...

commit f2ad4d9bebd052e5b7c9a90c4a813830bd1b72f8
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Sun Mar 18 23:54:41 2001 +0000

    __REALLY_HAVE_MTRR, vmalloc_32 fixes from Jeff Wiedemeier.

commit 1d32e305efdcb4668a91d94e2149c9c7a243b6dc
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Mar 15 21:48:51 2001 +0000

    file agpgart.diff was initially added on branch gamma-2-0-0-branch.

commit 74e19a40187ac3b5907922e5dc01418135a5794b
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Mar 14 22:22:50 2001 +0000

    Merged sarea-1-0-0

commit e2b2bffc6b25361b2f09afc5a28030645440cd03
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Tue Mar 13 00:22:05 2001 +0000

    Rest of MGA dualhead patch.

commit 0b60aad8a5f1e6d38bf2d254fa5209492157e344
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Mar 12 18:18:06 2001 +0000

    Try that again...

commit 134aecdeed19a339a147d7e88fc9b722b9794245
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Thu Mar 8 00:21:33 2001 +0000

    Fix ring space calculations, tests. Based on patch by Bruce Stockwell.

commit 8c511c60ec1ecbe3f0832a8e5a07bc43239eae5f
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Mar 7 15:06:57 2001 +0000

    Change error message to debug message when client dies while holding the
        lock. Should prevent bug reports about this, but you never know...

commit 07f761bfae8f220c819b67f9f614984f930ff427
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Mar 7 08:53:15 2001 +0000

    surround agp calls in drm_memory with __REALLY_HAVE_AGP instead of
        CONFIG_... remove include for agpsupport in tdfx_drv.c - not needed.

commit 3a74d3a371acc7b8632885c15ce2f7c05aae94bd
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Tue Mar 6 04:37:37 2001 +0000

    Merge tdfx-3-1-0 branch.

commit 971c2f8ad582bd0d6b97ed503c9e5abaa9feee02
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Mar 5 16:02:40 2001 +0000

    allow dristat to find out whether AGP is write-combined or not.

commit d1774bb44cdc1b5ce606c299b8eea1793f4352e3
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Mar 5 15:52:11 2001 +0000

    fix that last patch to initialize the MTRR when AGP available.

commit 8d3f3f4f9b8a5611888c35b7683661bcf52ef9cc
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sun Mar 4 19:19:20 2001 +0000

    Don't try and setup the MTRR for AGP when AGP not available. Check
        dev->agp, when agp_acquire called, and..... Uncomment MUST_HAVE_AGP
        around agp_* calls, so that support for both agp/pci can happen in a
        single kernel driver.

commit db03d12a8fe6c11029127831f1a9bf22056a250b
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Feb 28 18:47:39 2001 +0000

    file drm_scatter.h was initially added on branch ati-pcigart-0-0-1-branch.

commit 9a4033a02ac74e384596190adfcc0e938c19865b
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Feb 28 14:11:05 2001 +0000

    Make the hardware bug workaround configurable. That way, people with newer
        revs of the chipset can avoid the copy when it's not needed.

commit 7b5e87d91d062cceb1e4e54b2e144c3c87375234
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Feb 28 11:22:52 2001 +0000

    Please try this if you experience lockups...

commit 88dbee54ed400a3fd5594fab506518c171167805
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Feb 28 09:27:44 2001 +0000

    Implement drmOpen* without /proc dependence (Fallback to /proc is included
        for backward compatibility.) Move statistic-gathering drm* calls from
        dristat.c to xf86drm.c

commit c4a247d26228b2506fcb1c5cac2302a22e91219e
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Feb 21 16:06:10 2001 +0000

    Add Linux 2.2.x support for stubs

commit 48768df6c3197dea8f68fc69795c5aa820ce5678
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Feb 21 15:48:40 2001 +0000

    file gamma_drm.h was initially added on branch sarea-1-0-0-branch.

commit 43f1a52a564812d814c8a5f92b95fc6d3b589200
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Feb 20 20:16:56 2001 +0000

    Fix some warnings and flush pixel cache in idle routine so readpixels works
        correctly

commit 62aa46ccec223aa3660c71ff0981ea035fc2cff9
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Tue Feb 20 13:44:45 2001 +0000

    Disable DRIVER_DMA_QUIESCENT() in r128, radeon drivers. Prevents deadlock
        in the locking process when the engine isn't idle.

commit 01a14789edce0ce1cae0f3fd4328833399fae56d
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Fri Feb 16 05:24:06 2001 +0000

    - Clean up the way customization of the templates is done.
    - Fix old-style DMA for gamma driver (please test).
    - Pull out IRQ handling into drm_dma.h (please test on i810, gamma).
    - Lots of general cleanups, remove compiler warnings etc.

commit 1d30ac11404c588e4a158d72f987c1fb3e478bea
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Feb 15 16:31:11 2001 +0000

    Added missing include "drm_lists.h".
    i810 now working fine with new kernel module.

commit f2f5bf6f5f577d5cc43af99dbad16710225bfa2f
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Thu Feb 15 10:26:03 2001 +0000

    - Fix up merge.
    - Update date stamps.

commit 360475376c5a597caf4a981c934a6b0d783fa94d
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Thu Feb 15 08:12:14 2001 +0000

    Merge mga-1-0-0-branch into trunk.

commit 38c22bc4883ac201bde7f5f130a72acd1be68ec5
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Feb 14 14:34:01 2001 +0000

    file i810.h was initially added on branch mga-1-0-0-branch.

commit 75720460ce234fcf0317b78869a669afd1274ae1
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Feb 14 06:31:26 2001 +0000

    file radeon.h was initially added on branch mga-1-0-0-branch.

commit de554cb64045516ede340549441f109fd06495cd
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Feb 14 05:30:38 2001 +0000

    file r128.h was initially added on branch mga-1-0-0-branch.

commit 32c4aa1eb3ffd59312c64a7f46b933371c31761f
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Feb 14 05:30:38 2001 +0000

    file r128_drm.c was initially added on branch mga-1-0-0-branch.

commit 0fa26e550d56e068737d40f741e1f567c3f79cc5
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Feb 14 01:37:05 2001 +0000

    file tdfx.h was initially added on branch mga-1-0-0-branch.

commit 0e928b4733388477409b827185c714fd87702f0b
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Feb 14 01:37:05 2001 +0000

    file tdfx_drm.c was initially added on branch mga-1-0-0-branch.

commit 3b17f9165b4c73665515c2e435a8221805e514d9
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Feb 13 17:53:02 2001 +0000

    file gamma_context.c was initially added on branch mga-1-0-0-branch.

commit 41b80a0ab0fedb60385afc374a590d0ab58ef6c3
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Feb 9 16:44:16 2001 +0000

    file gamma_drm.c was initially added on branch mga-1-0-0-branch.

commit 89486dffa8b91bb95f80420252675f095082b046
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Feb 9 16:44:16 2001 +0000

    file gamma.h was initially added on branch mga-1-0-0-branch.

commit 04c29ef2e484c09d29c17cc667433bd3b6d36b11
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Feb 2 11:44:22 2001 +0000

    file dristat.c was initially added on branch mga-1-0-0-branch.

commit 7d68e5ffe29cabf5ed802964d9501411ccae9b28
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Feb 1 20:54:01 2001 +0000

    file drm_stub.h was initially added on branch mga-1-0-0-branch.

commit 82b645dc74218fd8d1ed10d045128002f0c1f705
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Jan 29 17:46:23 2001 +0000

    Corresponding sync with PCI GART updates.

commit 5f67507e65a38cf6d33290299937c6bad98fcc6e
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Sun Jan 28 07:18:08 2001 +0000

    Fix depth clears properly this time. Update all instances of
        drmRadeonClear() to the new interface.

commit a68dddf19caf0106479b71aab5a8de552a5ed596
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Fri Jan 26 07:52:36 2001 +0000

    Client-side updates for drmRadeonClear(...), fixes color/depth buffer
        clears.

commit 4ebcb86ace31f127281644ed9aaadb0a3303d29d
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:02 2001 +0000

    file mga_warp.c was initially added on branch mga-1-0-0-branch.

commit b68ca866244e96c37c4a25c85bfeaef0405bbad2
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:02 2001 +0000

    file mga_ucode.h was initially added on branch mga-1-0-0-branch.

commit 321bc52606a3f674e8fc33cb990c7b04f4b050c9
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:01 2001 +0000

    file mga_drm.c was initially added on branch mga-1-0-0-branch.

commit 2adf5999619935da80e0f5b682a2c1ec7fdce0b3
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file mga.h was initially added on branch mga-1-0-0-branch.

commit f14506198e6684429c400d7d4852bacc9a07bddb
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_vm.h was initially added on branch mga-1-0-0-branch.

commit bb1a10743f52e7bf9f73b3be9bad198f00efa925
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_lock.h was initially added on branch mga-1-0-0-branch.

commit 2f23eca6298e5f60bf40ec2ed5188f52d450ec22
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_memory.h was initially added on branch mga-1-0-0-branch.

commit 105bece739c52a7d1416728e950ec8a249f4ae9f
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_bufs.h was initially added on branch mga-1-0-0-branch.

commit b46a78c06061e4501bc2fa5657d6285cdce46769
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_proc.h was initially added on branch mga-1-0-0-branch.

commit 91844ee03910cce947801dc967606bd6260a91ef
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_fops.h was initially added on branch mga-1-0-0-branch.

commit fd82ce8f3fcf6c7368df6710f1943ee89a474620
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_init.h was initially added on branch mga-1-0-0-branch.

commit d2110a1dbefabcce14a4c492db4bfee038a99faf
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_ioctl.h was initially added on branch mga-1-0-0-branch.

commit 18ea3b5e6f6803ac2c50f12f1b107b1838f7520e
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_drv.h was initially added on branch mga-1-0-0-branch.

commit 03593b1629591a9fc80ff3a951d102668a1147f2
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_context.h was initially added on branch mga-1-0-0-branch.

commit 94dd569fc0f4d4d48e9de42670a126c04c259117
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_drawable.h was initially added on branch mga-1-0-0-branch.

commit b25e0fee34a39a6b07c22b48b05dd02c56a0ffa7
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_agpsupport.h was initially added on branch mga-1-0-0-branch.

commit a596a6f4e850556bac1259a6616395dc11e0866e
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_auth.h was initially added on branch mga-1-0-0-branch.

commit ae28c6aab6789c5eba42ef05e04827b150402370
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_dma.h was initially added on branch mga-1-0-0-branch.

commit 249dfc1c29d9f539c59bc014eae72baa5b35d88e
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 16:09:00 2001 +0000

    file drm_lists.h was initially added on branch mga-1-0-0-branch.

commit 4d2a4455b4e7bc65952aa6167c34b488c4ca3b8d
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Jan 24 15:34:46 2001 +0000

    - Misc cleanups.
    - Fix drmR128Clear parameters (Radeon to follow).
    - Add some helper macros to r128/radeon kernel modules.

commit 642bb6fbb0bfbc6e549e61bd0ece72abcbd399b7
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Jan 23 17:53:57 2001 +0000

    file ati_pcigart.h was initially added on branch ati-pcigart-0-0-1-branch.

commit 97379b82c812b5eed0a4a52106afc895469e13fa
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Jan 23 17:53:57 2001 +0000

    file ati_pcigart.c was initially added on branch ati-pcigart-0-0-1-branch.

commit 9116644366c427b39945bca71969a5b561181046
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Jan 18 18:21:05 2001 +0000

    Fixed problem preventing compile on system w/o agpgart.

commit 417bfc8a9d42cf2b9238ee394514fa3db512c49d
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Jan 17 18:43:04 2001 +0000

    file r128_pcigart.c was initially added on branch ati-pcigart-0-0-1-branch.

commit 5708131c9ab5ee3b51a6ef937925f36e083147b1
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Jan 17 18:43:04 2001 +0000

    file scatter.c was initially added on branch ati-pcigart-0-0-1-branch.

commit 4c3f3de819981959f764c5d2a69417c52d122d61
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Sat Jan 13 01:33:00 2001 +0000

    Remove debug messages.

commit 33e8dcf7e97e6bec69fc05137e1eede1a0f9b443
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Jan 11 20:05:39 2001 +0000

    Makefile.linux was checking $(MACHINE) for 'i386' before building the
        i810.o module. However on my i810's, $(MACHINE) is 'i686'.

commit 61c15f4a2d053c9e609360a5e600f56b0887c3aa
Author: Nathan Hand <nathanh@manu.com.au>
Date:   Mon Jan 8 16:21:42 2001 +0000

    Merged tdfx-3-0-0

commit 0994e635b2f002c8e9f177037a46c26ccd98c59d
Author: Kevin E Martin <kem@kem.org>
Date:   Fri Jan 5 22:57:55 2001 +0000

    Merged ati-5-0-0

commit 833af23c5d21b1ab139327861d25d96dcd91af6f
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jan 4 18:41:41 2001 +0000

    Sync with Linux 2.4.0-prerelease

commit c7c6156aecdee2838dd0e193a3d529ecbb797ae7
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sat Dec 30 23:28:53 2000 +0000

    add blit ioctl, fix plnwt handling

commit b19c44e4fe01db3efe72e6a130bbd49af151ee95
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Fri Dec 15 01:15:57 2000 +0000

    Update date information.

commit 013d6f0806de66edcca4193cd4a0b175bb3c2b32
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Dec 13 10:30:26 2000 +0000

    file bufs_tmp.h was initially added on branch mach64-0-0-1-branch.

commit 8725828cf0ebb55f813e19f87f7d279c62b68293
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Tue Dec 12 14:50:50 2000 +0000

    - Fix nasty depth span bug. Drawable offset was not being added to pixel
        coords.
    - Remove unneeded mask parameters from clear ioctl.
    - Use correct subpixel offsets, fixes most glean bugs.
    - Remove 32-bit depth buffer support. Only use 16 or 24-bit depth buffers.

commit 14a73775360585b9a09bfdf932881fbb06b34037
Author: David Dawes <dawes@xfree86.org>
Date:   Tue Dec 5 16:39:28 2000 +0000

    Import of XFree86 4.0.1g

commit 41fa18dda5e49caed68ce853791a21dd6d92376b
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Dec 4 06:26:37 2000 +0000

    file mach64_dma.c was initially added on branch mach64-0-0-1-branch.

commit 51b68cb483aa93c8eb19e9915f08978324b1b3ac
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Dec 4 06:26:37 2000 +0000

    file mach64_state.c was initially added on branch mach64-0-0-1-branch.

commit 8e02d8dcc4f52549f97c83f2b3c0aaa249f66977
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Sat Dec 2 13:10:03 2000 +0000

    file mach64_drm.h was initially added on branch mach64-0-0-1-branch.

commit e15a24e154d6749ba0be3155ed802005c5e1ebf0
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Sat Dec 2 06:14:18 2000 +0000

    Merged ati-4-1-1-branch into trunk.

commit 33fd00485f350f7ecceb1fabfa81ce4137c894c2
Author: David Dawes <dawes@xfree86.org>
Date:   Thu Nov 30 17:32:23 2000 +0000

    Import of XFree86 4.0.1f

commit 84699b456d2453b3c3c99eb75ebfc0dfe30eb64f
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Nov 27 15:30:26 2000 +0000

    file context_tmp.h was initially added on branch mach64-0-0-1-branch.

commit 2da85fdba0331e2ae5d7ea245ef865aa9eee3687
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Nov 27 15:30:26 2000 +0000

    file driver_tmp.h was initially added on branch mach64-0-0-1-branch.

commit 3e9ebfb4cf89b60871a226dbf1d4ec5129d6c070
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Nov 27 15:30:26 2000 +0000

    file mach64_drv.h was initially added on branch mach64-0-0-1-branch.

commit 960f13cdf4cc4201fabe4c48e40395d3a755be58
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Nov 21 16:18:47 2000 +0000

    Integrated bug fix from David S. Miller (a wait queue removal bug)

commit 679531e1669085115bac5f6fc982d54a4a9608e8
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Nov 15 15:47:51 2000 +0000

    Sync with Linux 2.4.0-test11-pre5 Provide backward compatibility tested
        against 2.2.18pre21
    As usual, since all 2.4.0-test* kernels set LINUX_VERSION_CODE to the same
        value, if you are running a 2.4.0-test kernel, you MUST be running
        2.4.0-test11-pre4 or later (although anything after 2.4.0-test11-pre1
        should work fine -- I tested with pre4/pre5). I expect 2.2.x support to
        continue to work for all recent kernels, but I tested with 2.2.18pre21
        -- we use the old intermodule symbol communication for 2.2.x kernels,
        so they should all continue to work.

commit 0636342ef84da23f30b838b4f933e3aa15d5c2ce
Author: Rik Faith <faith@alephnull.com>
Date:   Tue Nov 14 21:35:00 2000 +0000

    Move .c to .h file

commit 633e9c8f8b2366a93951f11830954fb895917252
Author: Kevin E Martin <kem@kem.org>
Date:   Mon Nov 13 23:35:02 2000 +0000

    file radeon_state.c was initially added on branch ati-5-0-0-branch.

commit 58d90faf9a3d3ef2a66d2cc3632958ab73e19250
Author: Kevin E Martin <kem@kem.org>
Date:   Mon Nov 13 23:35:02 2000 +0000

    file radeon_cp.c was initially added on branch ati-5-0-0-branch.

commit 006458f227b9e97252406df52963d98b41bb3a1b
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Nov 10 18:27:33 2000 +0000

    Split agpsupport.c into pre-2.4.0 version and current version.

commit 94071289a4c61a1083a3d6b3546b06cafeaeac44
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Nov 8 00:07:17 2000 +0000

    merge with 4.0.1d

commit 5745cb7fa70cf312d371aac44de3beae2a8d6e47
Author: David Dawes <dawes@xfree86.org>
Date:   Tue Nov 7 22:10:46 2000 +0000

    Import of XFree86 4.0.1d

commit 37d6828fef51b3a113a11b54e7dbd9c92cd4a548
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Nov 1 19:00:45 2000 +0000

    Added multitexture fix to the mga drm driver

commit 52f0bc3c9ec722c0c8a40bb7959e7ec2eb9d8180
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Sep 29 02:05:41 2000 +0000

    More changes for sync with Linux 2.4.0-test9-pre7

commit 39a659e87718d8b6bbf138510e83de7a1e95d855
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Sep 29 01:47:11 2000 +0000

    Audit calls to schedule() Remove tags from files shared with Linux kernel
        tree Remove debugging statements to make debugging more useful Other
        minor cleanups in preparation for sync with Linux 2.4.0-test9-pre7

commit b0a7efb5a959a6105486d303d25d06d69d5d569e
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Sep 28 23:04:57 2000 +0000

    Use PG_reserved for things we remap non-cached

commit ed2d0b4bb0bb90af87c7c89a2e0a6297455d3bbe
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Sep 28 15:09:39 2000 +0000

    Fixed two things Rik pointed out in the last commit

commit 550dff98b0cf08687cdde697fc6909aeb9cef30f
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Sep 27 21:32:19 2000 +0000

    Merged the mga-lock-debug-0-2-0-branch with the trunk. This includes
        several fixes including: (Jeff) Really disable multitexture (Broken
        since Mesa 3.4 integration.)
    (Jeff) Various changes in mga_state.c in the kernel module, which includes
        a fix to the bug where the first OGL application hangs the machine
        w/out rendering anything. This also includes defines for the warp
        registers so they are easily human readable.
    (Rik and Jeff) Fixed all the schedule loops in the kernel to look like they
        are supposed too.
    (Jeff) Configurable agp modes: Add the option "AGPMode2x" or "AGPMode4x" to
        your XF86Config file.
    (Rik) Various cleanups to the mga kernel driver to make it easier to read
        and debug.
    (Rik) Removed alot of DRM_DEBUG statements from the kernel driver.

commit dbe7d55cb08487f688dfbdd29835500b3b087721
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Sep 27 03:34:14 2000 +0000

    file radeon_drv.c was initially added on branch radeon-1-0-0-branch.

commit 0688c5939796e09e2cea759e64774c6db478f513
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Sep 27 03:34:14 2000 +0000

    file radeon_drv.h was initially added on branch radeon-1-0-0-branch.

commit 9c250f5c18795cbf919d0ce947a269876e945cac
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Sep 27 03:34:14 2000 +0000

    file radeon_context.c was initially added on branch radeon-1-0-0-branch.

commit 54e6f2f846ee46dc464033aa6a0c021ab7ccefd2
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Sep 27 03:34:14 2000 +0000

    file radeon_drm.h was initially added on branch radeon-1-0-0-branch.

commit ca013c632ca00931d404392be4e625f325fc959c
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Sep 27 03:34:14 2000 +0000

    file radeon_bufs.c was initially added on branch radeon-1-0-0-branch.

commit cba6c830e07f4906a2b9de4de51ec3f2f1f9d7f6
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Sep 27 03:34:14 2000 +0000

    file radeon_dma.c was initially added on branch radeon-1-0-0-branch.

commit c7558d8fa4df805b7f7ff3d631432eadac9b8a1c
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sun Sep 24 09:34:10 2000 +0000

    commit xfree86 4.0.1d-pre update

commit b1aa228f7d7390f8b9a361f862d724b908d5a71f
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Sat Sep 23 21:25:26 2000 +0000

    Import of XFree86 4.0.1d-pre (2)

commit 881683873e6aeab6529b8e6db8ed0678c87e86d7
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Sep 22 18:14:54 2000 +0000

    Import of XFree86 4.0.1d-pre

commit e06e4a73ac182bbd15ad7e6c10d259b12f39a383
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Sep 20 05:25:18 2000 +0000

    file mach64_drv.c was initially added on branch mach64-0-0-0-branch.

commit 7ed69fd309850cee0c14775b92322e4f91955405
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Sep 20 05:25:18 2000 +0000

    file mach64_bufs.c was initially added on branch mach64-0-0-0-branch.

commit d75fe0d7bfd1d5c3893464b2d184543932ffe347
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Sep 20 05:25:18 2000 +0000

    file mach64_context.c was initially added on branch mach64-0-0-0-branch.

commit de842ea5dbfd78d2e749d552f06410dbc2072087
Author: Rik Faith <faith@alephnull.com>
Date:   Tue Sep 19 19:41:07 2000 +0000

    Make management of current->state more correct.

commit 01346c98b1d919374dc1f2ee70d4b401d2eaad67
Author: Rik Faith <faith@alephnull.com>
Date:   Tue Sep 19 19:24:28 2000 +0000

    Make management of current->state correct (accidentally made incorrect when
        fixing the trispd bug).

commit e2a16e1906592636e5e0e5ed82db776466b7e494
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Tue Sep 19 18:24:09 2000 +0000

    Correct sync with 2.4.0-test9-pre4 kernel.

commit 9c8e1adfac249ee2a4d10e7ae32fc439c22fb8f6
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Tue Sep 19 18:14:16 2000 +0000

    Sync with 2.4.0-test9-pre4 kernel.

commit ce199c73e555546aa4c6654695ab90ea42b1970d
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Tue Sep 19 16:40:02 2000 +0000

    file r128_state.c was initially added on branch ati-4-1-1-branch.

commit 4ec540945deb46008a7d6ff54d78c02582de5629
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Tue Sep 19 16:38:55 2000 +0000

    file r128_cce.c was initially added on branch ati-4-1-1-branch.

commit dc6b57bf22ecbac04a5a1fee72fd0a43646b9c8c
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Sep 14 14:48:44 2000 +0000

    axp cast fix.

commit f850c1bd06d8ccb576e8836ed8f0c16db6eec343
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Sep 13 15:02:35 2000 +0000

    Remove debugging statement from production code.

commit 1f8651163acb06b0691322ec9ab96bc606ba8777
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Sep 13 15:00:09 2000 +0000

    Fix for [Bug #112247] Hard MGA lock with trispd -size 50000

commit bda40b41465ab67f8eef0b89cd26f9bbe8cf4a85
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Sun Sep 10 04:59:05 2000 +0000

    Sync with 2.4.0-test8 kernel.

commit 3adced5b29924079da9b600265687863e6f92d99
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Sep 7 22:33:36 2000 +0000

    file drm_heavy_kern_lock.c was initially added on branch
        mga-lock-debug-0-0-1-branch.

commit 5f2cfc5bd8132d1bd4dabd78848acd0ee038ea92
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Thu Sep 7 20:42:32 2000 +0000

    Merge of tdfx branch undid the changes from the 2.4.0-test8-pre5 kernel
        sync, so apply them again.

commit f1bb3c5f5ff40e89004064d8ac8e13a3798b9afb
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Thu Sep 7 12:40:41 2000 +0000

    Merged tdfx-2-1-branch

commit 7db6449142ca24183f50e6f9dcf396b899b4113b
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Wed Sep 6 20:56:34 2000 +0000

    Sync with 2.4.0-test8-pre5 kernel.

commit e3e2d66131a3615379fe81ea106d7133da084683
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu Aug 31 15:32:10 2000 +0000

    Bump version number after kernel interface change.

commit 433408db2e334f25df700b701fb3e159abd471b9
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Aug 31 10:10:03 2000 +0000

    Pre Linux 2.4.0 compatibility header file

commit 0bdde422b7db154935295938a937dab0c3212edf
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Aug 30 22:36:27 2000 +0000

    Added planemask args for color and depthbuffer clears.

commit 926349534d4a20b8dc4f795e41055540ad48d112
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Wed Aug 30 22:34:28 2000 +0000

    Initialize vertsize correctly. Add planemask arguments for color and depth
        stencil clearing.

commit 32cebaf750b82639822f5f50d0aa8a4417595ada
Author: Rik Faith <faith@alephnull.com>
Date:   Mon Aug 28 19:50:52 2000 +0000

    Add compatibility header file to make Linux 2.4.0 kernel patches cleaner.

commit 6f07e1ff6bec8f306e8aa1d59b8bcaa93ffa776e
Author: Rik Faith <faith@alephnull.com>
Date:   Sat Aug 26 10:36:44 2000 +0000

    Sync with Linux 2.4.0-test7 Add signal blocking support to all drivers
        (using control-z on a running direct-rendering client should work now)

commit 37643234affb329775d3330eed650dee59d39bad
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Aug 25 12:49:18 2000 +0000

    Apply patch from Alan Hourihane to temporarily allow compilation on Alpha
        (the driver has not been tested on Alpha -- this just makes it compile)

commit ac3c3571a714a38f7572f94c40fe143b43beb3b9
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Aug 25 12:45:53 2000 +0000

    Remove misleading authorship information from sis driver (author has been
        contacted and will provide improved information later) Rename
        sis_drm_public.h to sis_drm.h to be consistent with the other drivers.

commit 68f6795ef45739816fe9d5f1f5b3ef4900bf3187
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Aug 25 12:44:44 2000 +0000

    Improve detection of kill_fasync parameter count Make compilation of sis.o
        depend on CONFIG_FB_SIS

commit fb3939c1a5cee3fedc02e0ca710870548481f99e
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sun Aug 20 18:16:49 2000 +0000

    Bug fixes for 32bpp rendering (still disabled)

commit e30361416b31f6661d36f9d331f48217d66c9ee8
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Fri Aug 18 19:03:19 2000 +0000

    Possible fix for trispd bug

commit 364d44a24cb7a32ab7ac860e9dde0cd5d082fcd7
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Aug 18 18:57:56 2000 +0000

    Fix ABA problem in drm_freelist_{put,try}

commit f0f6509a72abf3a3a0a8f26a35b7a8f3d96cbb9b
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Aug 18 13:55:23 2000 +0000

    Sync with Linux 2.4.0-test7/pre4

commit f75ec3010ad8d15d316f6e6d580c85f9e6b8466e
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Aug 17 20:26:11 2000 +0000

    Bug #112196: auth.c uses semaphores while holding spinlocks Make spinlocked
        region smaller to avoid semaphore.

commit 761ffd63f3b8c9789afe026e75d384a6d450165a
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Aug 17 20:20:33 2000 +0000

    Bug #112197 Made sis driver compile under 2.4.0-test7/pre4

commit 3e42514360d15f63c250875e3aa4eb6ddd748763
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Aug 16 21:13:24 2000 +0000

    Fix for bug #111744 which caused any application to never render and dma to
        stall on certain mga cards

commit cba4d3504c843f6f66ffc0b477f86b4ee0048065
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Aug 16 18:29:06 2000 +0000

    first part of 4.0.1b merge

commit 0cbca9cca2a9680bcced7d2ffe47599a37c7fea9
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Aug 16 17:23:02 2000 +0000

    Import of XFree86 4.0.1b

commit 1df8afa8fff0750775ebcd8770d3b887053a65a7
Author: David Dawes <dawes@xfree86.org>
Date:   Wed Aug 16 17:23:02 2000 +0000

    Initial revision

commit 8b9363d1b1f7bc40fb68261f7659dea5124f2821
Author: Rik Faith <faith@alephnull.com>
Date:   Tue Aug 8 16:04:21 2000 +0000

    Sync with Linux 2.4.0-test6-pre8

commit 9199075a6a975ebcc44aff53fe0f77080c01a30b
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Mon Aug 7 16:55:10 2000 +0000

    Fix for multiple sarea bug + agp built into kernel segfault

commit f3ae6786f89a4f63dbba93c5519d3792a1744dd7
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Aug 4 10:04:55 2000 +0000

    Sync with Linux 2.4.0-test6-pre2

commit bcad11818296fa58a356175bc7e13060579012d0
Author: Rik Faith <faith@alephnull.com>
Date:   Sat Jul 22 01:08:00 2000 +0000

    Fix typo

commit 1e54e554312d0970427e81c0a2bc8a16d1325c07
Author: Rik Faith <faith@alephnull.com>
Date:   Sat Jul 22 01:04:22 2000 +0000

    Move to new, denser, easier-to-read Linux kernel Makefile format

commit 3bcc55a74d5fba18e53c4a6441dffb50badbbec0
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Jul 21 18:28:01 2000 +0000

    Revert some changes and try alternative way to clean up AGP handling.

commit 6dd96a15ed329f26565bb971877f03e15801f3f5
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Jul 21 16:57:00 2000 +0000

    Revert some changes and try alternative way to clean up AGP handling.

commit e38b34e54a79919588f23294ddb326309c9cb005
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Jul 21 15:48:24 2000 +0000

    Fixes for building in the kernel tree

commit 81da79d1ed038ff8968abcf1cde3362035603861
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Jul 21 14:20:57 2000 +0000

    Changes to make AGP optional for in-kernel builds

commit 6d1ce8fe7727ee0a704a8a7464b22559ce9831fd
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jul 20 20:21:10 2000 +0000

    kfree_s was deprecated in 2.4.0-test?

commit b4722ec943b3c51e103aaf7c6c77fe7b9c2c716d
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jul 20 05:17:49 2000 +0000

    More fixups for kernel build: EXPORT_SYMTAB warning removal
        put_module_symbol clean up of tdfx tdfx_cleanup routine Makefile.kernel
        fix

commit 0bd1fa795a06f592c1115b251685b36fec63fed3
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jul 20 01:52:00 2000 +0000

    Fixes for building in the kernel tree

commit e8c9ed03f8d950ef82c09e387001b2fd43b81182
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jul 20 01:14:58 2000 +0000

    Fixed for monolithic kernel build

commit 742c33bf6197e6ed18c7de89c7d895fecafaa838
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jul 20 00:59:40 2000 +0000

    Fix signature for *_options function

commit c459c9ead3476a8edc1cd453fafa2b1c83c20e60
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jul 20 00:48:12 2000 +0000

    Added support for building as modules or as part of monolithic kernel

commit 1d3c4d2ed2d7dd9e91037cff9ef0044a8fc2a6bb
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Jul 19 20:59:35 2000 +0000

    Bump driver dates and add descriptions

commit ee9514b63b4309defc21a929deba1651a5dd8306
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Jul 19 20:41:51 2000 +0000

    Allow SAREA > 1 page in size

commit aed8549e91ade1582505ebce50e4a79d99b4436f
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Jul 19 18:38:41 2000 +0000

    Sync with Linux 2.4.0-test4 kernel

commit 7b888f87fa5ec559df97a7e911dd5a3328895f6f
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Thu Jul 13 18:47:48 2000 +0000

    applied Jeff's xf86cvs-I810copy.patch

commit 4509385d37d0738f14d48bd91d9378e72dacc063
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Wed Jul 12 21:37:17 2000 +0000

    Final misc changes to bring upto 4.0.1

commit 8751b6774da527fdc3773d86da53ad5948b733dc
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Tue Jul 11 11:41:07 2000 +0000

    Merge XFree86 4.0.1

commit 8bc39d01cae622db6097b967c132f9b0e04fb785
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jul 10 21:32:06 2000 +0000

    Import of XFree86 4.0.1

commit 62838b948cdddc0f007c200fbec195c1a008c731
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Sat Jul 1 01:50:00 2000 +0000

    Fix for agpgart module detection. If the kernel module has been configured
        to use AGP, and the module is not present, fail gracefully instead of
        doing evil things.

commit dc2701a9f6034a04319f71e43e7f928f818be6db
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Fri Jun 23 17:14:20 2000 +0000

    Update register definitions to match r128_reg.h

commit d399dbcd569a66f5bf4863ffa2aab95fa8ebd5fc
Author: Doug Rabson <dfr@freebsd.org>
Date:   Tue Jun 13 17:38:09 2000 +0000

    Merged bsd-1-0-1

commit 2fbd4bf0189cf6d421000c7eea85fee3b9c79ed0
Author: Rik Faith <faith@alephnull.com>
Date:   Tue Jun 13 14:34:13 2000 +0000

    Unify code with kernel: Change some spacing in comments Add #include
        <linux/config.h> to all *_drv.c files

commit 1c8b2b5e06f7967babfa49b9dc8bf24316bfe201
Author: Rik Faith <faith@alephnull.com>
Date:   Tue Jun 13 14:22:03 2000 +0000

    Update email addresses and copyright notices to reflect VA Linux Systems

commit d5348efe258d5399dd161bb488d22c981177bf78
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Mon Jun 12 15:47:31 2000 +0000

    Merging the ati-4-1-0 branch onto the trunk.

commit ea425f532fb9c5b8f4d942e45751b7f715464b34
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Mon Jun 12 02:33:12 2000 +0000

    Merged the tdfx-2-0 branch onto the trunk

commit b084e752920a3cc8ef904e67280fd903d050c301
Author: Doug Rabson <dfr@freebsd.org>
Date:   Fri Jun 9 17:16:10 2000 +0000

    file mga_state.c was initially added on branch bsd-1-0-1-branch.

commit 776faf51f00a856349c46bcc87e888207ec68558
Author: Doug Rabson <dfr@freebsd.org>
Date:   Fri Jun 9 17:16:10 2000 +0000

    file mga_drv.h was initially added on branch bsd-1-0-1-branch.

commit 8444cd6f11ecd8dca28f0a54c769bd908c4dd1df
Author: Doug Rabson <dfr@freebsd.org>
Date:   Fri Jun 9 17:16:10 2000 +0000

    file Makefile was initially added on branch bsd-1-0-1-branch.

commit 2add3b9dc882b20e977ec16343ef13fabd4392a6
Author: Doug Rabson <dfr@freebsd.org>
Date:   Fri Jun 9 17:16:10 2000 +0000

    file mga_dma.c was initially added on branch bsd-1-0-1-branch.

commit 0eed55ba456d3541c11b6bb5e6739747ce177b84
Author: Doug Rabson <dfr@freebsd.org>
Date:   Fri Jun 9 17:16:10 2000 +0000

    file mga_drv.c was initially added on branch bsd-1-0-1-branch.

commit 736ca698c8f0fd42654b396caaa8f1e5b3f0f6a0
Author: Doug Rabson <dfr@freebsd.org>
Date:   Fri Jun 9 17:16:10 2000 +0000

    file mga_bufs.c was initially added on branch bsd-1-0-1-branch.

commit 018c96b3e6fa2119ca63e107c29ae5ce54ced11c
Author: Doug Rabson <dfr@freebsd.org>
Date:   Fri Jun 9 17:16:10 2000 +0000

    file mga_context.c was initially added on branch bsd-1-0-1-branch.

commit 877873ad33536765af1f51d485a2f8f28feff2e4
Author: Doug Rabson <dfr@freebsd.org>
Date:   Fri Jun 9 17:16:10 2000 +0000

    file mga_drm.h was initially added on branch bsd-1-0-1-branch.

commit 7d88040f523a1e82435a4bfae71d3b370d7a6a05
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Fri Jun 9 15:14:51 2000 +0000

    Fix define of PCI_DEVICE_ID_3DLABS_GAMMA when not available in the kernel
        includes.

commit 0dc99dc4b941ca5b47ebbf7c7f03cb16b296f87c
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Thu Jun 8 17:13:48 2000 +0000

    don't draw if window is unmapped, other updates (Jeff Hartmann)

commit 569da5a42ebf10c86d6c6ba81866a888e1c708dc
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Thu Jun 8 14:38:22 2000 +0000

    Merged glxmisc-3-0-0

commit 5ce0f2afec70a1d062b749e1bf7150c21d35281d
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Tue Jun 6 22:51:29 2000 +0000

    define VM_DONTCOPY to zero if undefined

commit 909085a0083fccae1c74d2c78dc8a34efc55a5cf
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Jun 5 00:42:21 2000 +0000

    Include new updated gamma support.

commit f0cf8d5edd466b3e224bad08223ba2b31fb3f046
Author: Doug Rabson <dfr@freebsd.org>
Date:   Wed May 31 14:32:36 2000 +0000

    file ctxbitmap.c was initially added on branch bsd-1-0-1-branch.

commit fa0a35a25fd008617ef6c7444cb92b138dd01859
Author: Doug Rabson <dfr@freebsd.org>
Date:   Tue May 30 17:13:31 2000 +0000

    Merged bsd-1-0-0

commit a72f370f4d8a65db5c4ff28dc49b0a1d7acc146c
Author: Doug Rabson <dfr@freebsd.org>
Date:   Tue May 30 14:47:51 2000 +0000

    file r128_drm.h was initially added on branch bsd-1-0-0-branch.

commit 50996ec9ba504e125d76a3713dfe96d5b8e99ac3
Author: Gareth Hughes <gareth@users.sourceforge.net>
Date:   Fri May 26 23:24:54 2000 +0000

    Fixed WARP pipe hangs in Quake 3. Fullscreen or window at (0,0) seems to
        work fine now, but an offset window still hangs in the same places as
        before.

commit ddcb28259f70d6808caf57e8eb9f74ca95b5f069
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Thu May 25 21:06:02 2000 +0000

    Merged mga-0-0-3-branch
    - New security model for i810
    - Enable i810 dri by default
    - New indexed vertex path for mga
    - Mga kernel driver rework
    - Removed dead files in i810 driver

commit 2bb4f7ef4252007c356c0fbb8597925d395cb6b1
Author: Doug Rabson <dfr@freebsd.org>
Date:   Mon May 22 10:28:44 2000 +0000

    file agpsupport.c was initially added on branch bsd-1-0-0-branch.

commit 99efe3c247f726909f0a9a43e59835ebfc2d121f
Author: Kevin E Martin <kem@kem.org>
Date:   Thu May 18 06:14:27 2000 +0000

    Merged ati-4-0-1

commit e79f86b2540527fd5261aae9e251d582282914dc
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:47 2000 +0000

    file tdfx_drv.c was initially added on branch bsd-1-0-0-branch.

commit daa2b5316de12dd0bc231764312981567bb9db92
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:47 2000 +0000

    file tdfx_context.c was initially added on branch bsd-1-0-0-branch.

commit bbdf6517b972b40a2a9502b3a715a7fa4f04c623
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:47 2000 +0000

    file Makefile was initially added on branch bsd-1-0-0-branch.

commit 946502a97c93bc5266740e5e1d744f209aa3db46
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:47 2000 +0000

    file tdfx_drv.h was initially added on branch bsd-1-0-0-branch.

commit b8a8b6a0072cb5b5fbe57bce2ef4baf7dd2e8d7d
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:47 2000 +0000

    file gamma_drv.h was initially added on branch bsd-1-0-0-branch.

commit 0ce3eb0c37f36f857738c8c5ab869b015019a8a3
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:47 2000 +0000

    file gamma_dma.c was initially added on branch bsd-1-0-0-branch.

commit fc3e594efe21c7ee7f93840947c59b87a7da3713
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:47 2000 +0000

    file gamma_drv.c was initially added on branch bsd-1-0-0-branch.

commit ec9c8cf8c3ba4aef093e8a0fa754d40d0f56738a
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file lock.c was initially added on branch bsd-1-0-0-branch.

commit dc461915572f293d4fb4ea9ff8c1806cdd850216
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file memory.c was initially added on branch bsd-1-0-0-branch.

commit 3b55ffde2f887945b4c0bc8cd15730678e6a6333
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file vm.c was initially added on branch bsd-1-0-0-branch.

commit 874b13095bc3571eefaf8098a1b08a6906bc8adb
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file drmstat.c was initially added on branch bsd-1-0-0-branch.

commit 7428ee6555af8dc0e7a1b77f096bb683ebb8deb2
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file fops.c was initially added on branch bsd-1-0-0-branch.

commit 2c88ecd2e6d7af28d69b634dc6e34b12bd02fb12
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file init.c was initially added on branch bsd-1-0-0-branch.

commit 54d4e7afff4a5f8bc0932f1a048f52cbbbcbb06b
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file proc.c was initially added on branch bsd-1-0-0-branch.

commit 291816bd9c718ce25fe9c9b54f68ce83d75ba9ed
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file lists.c was initially added on branch bsd-1-0-0-branch.

commit badaa2f2eb79a244feb412b49c19cdc1372f69ff
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file sysctl.c was initially added on branch bsd-1-0-0-branch.

commit 1d6bc9c448915a91b1ecf7ed7ac9b698b24d2ec7
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file context.c was initially added on branch bsd-1-0-0-branch.

commit bbb0c2352b93f7b71900f66ddcfb6621a79c66e6
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file ioctl.c was initially added on branch bsd-1-0-0-branch.

commit 573dcc12080f12f3afda076497185e0cf317ced3
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file dma.c was initially added on branch bsd-1-0-0-branch.

commit a1a5b192d4ba3bc1a57e7f7fa708139d256689b8
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file bufs.c was initially added on branch bsd-1-0-0-branch.

commit 111738fade531ad02729b8b2d18a077afe74459d
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file auth.c was initially added on branch bsd-1-0-0-branch.

commit 93dcf91a0f03db4a07b4b2d86c0398c144883ff5
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file drawable.c was initially added on branch bsd-1-0-0-branch.

commit c14788bf2982357e529114e4b4cf70e7b730a8ff
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file mga_drm.h was initially added on branch bsd-1-0-0-branch.

commit 356bfda022741de65c7629c5c282690c0939cde2
Author: Doug Rabson <dfr@freebsd.org>
Date:   Sun May 7 14:14:46 2000 +0000

    file i810_drm.h was initially added on branch bsd-1-0-0-branch.

commit fc671ac20f84b2a8bac34472aa2c3033dee3acab
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file drmP.h was initially added on branch bsd-1-0-0-branch.

commit 6b760708bdf876bf4cfd567743e45905d6c50653
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file Makefile.bsd was initially added on branch bsd-1-0-0-branch.

commit 188d7591db6cddad414d971ac4db1c67855945d8
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file Imakefile was initially added on branch bsd-1-0-0-branch.

commit a8af9a06524345dfd14ab42fb21484f0a8b22117
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file drm.h was initially added on branch bsd-1-0-0-branch.

commit 9ca9e835279b66b14ad74158044aa6f08986d25b
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file tdfx_drv.c was initially added on branch bsd-1-0-0-branch.

commit 268b2d0fa4c97c75b4cb2ce0d005b115da123b88
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file gamma_drv.h was initially added on branch bsd-1-0-0-branch.

commit 2b4191b5b2331bc3146a546cd6737ba4cc8ea812
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file gamma_drv.c was initially added on branch bsd-1-0-0-branch.

commit f352d4892ece370627de380da362cd55cf3ef2e6
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file gamma_dma.c was initially added on branch bsd-1-0-0-branch.

commit a8ea56741b040e85221c7a4c5bfe9ff3d8817336
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file auth.c was initially added on branch bsd-1-0-0-branch.

commit ba453d71d3cca772c6682772e96eb606d208cbee
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file bufs.c was initially added on branch bsd-1-0-0-branch.

commit 244e9c02acf60bd5e1aba9082f889509bb0f4bb6
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file context.c was initially added on branch bsd-1-0-0-branch.

commit 8f45e86a7681f73238c065d59be4b31ee058ba1d
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file dma.c was initially added on branch bsd-1-0-0-branch.

commit 94e0ea68ae33160e62fcc9ffd38d919b8bab06f1
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file drawable.c was initially added on branch bsd-1-0-0-branch.

commit 47c42ab42a8248794d07cea0e8fac233023c0754
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file drmstat.c was initially added on branch bsd-1-0-0-branch.

commit e801cc05e755c0ecd6bb420482ebab110443ee17
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file fops.c was initially added on branch bsd-1-0-0-branch.

commit 20afae284903d86b6168ebe26802935a9a761102
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file init.c was initially added on branch bsd-1-0-0-branch.

commit 145d5c0006c7c0ad51075424df16c961bff461dd
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file ioctl.c was initially added on branch bsd-1-0-0-branch.

commit 39d7d7228d997c9839898becee8fce7e9baacf68
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file lists.c was initially added on branch bsd-1-0-0-branch.

commit 1140d8b0343e273c71a01d0a82fe3325e2072fe8
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file lock.c was initially added on branch bsd-1-0-0-branch.

commit 3df97c45106cd08ab393935494b2ec42bebdb567
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file memory.c was initially added on branch bsd-1-0-0-branch.

commit 7304e831cc1e429a07f27d8fc916f72cbde508cf
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file proc.c was initially added on branch bsd-1-0-0-branch.

commit fe7968a7c507f9b330cc17e1f21b846ebcba561a
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file sysctl.c was initially added on branch bsd-1-0-0-branch.

commit 4735070bd77fe68542e116effbaaff61ae640ba2
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file tdfx_context.c was initially added on branch bsd-1-0-0-branch.

commit 2efb5abb9bd233ebe57393c697d04b3e412cae27
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file tdfx_drv.h was initially added on branch bsd-1-0-0-branch.

commit 813dc2fd4717e8fe21333e4c22d2380e0126bb0a
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Wed May 3 23:13:52 2000 +0000

    file vm.c was initially added on branch bsd-1-0-0-branch.

commit 01836824d5b3dd4833573ebf3f98ed4cfb9cd5b3
Author: Brian Paul <brian.paul@tungstengraphics.com>
Date:   Thu Apr 20 16:36:40 2000 +0000

    Merged glxmisc-1-0-0

commit da74fc3f29f3cc093929fe6c54140522ff489e2a
Author: Kevin E Martin <kem@kem.org>
Date:   Sat Apr 15 08:06:36 2000 +0000

    file r128_bufs.c was initially added on branch ati-4-0-1-branch.

commit 4a106124909259a08e65cc087dd6212629fa85a3
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Apr 12 06:22:02 2000 +0000

    file r128_dma.c was initially added on branch ati-4-0-1-branch.

commit d476a211bcf712506ac11f79a9f6c56a49ab4907
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Apr 12 06:22:02 2000 +0000

    file r128_drm.h was initially added on branch ati-4-0-1-branch.

commit 42f526b5ca90317dd751a772105f30e8151b8613
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Sun Apr 9 17:29:28 2000 +0000

    Only enable DRI for 16bpp mode. Allow GL_BLEND if color is 0,0,0,1 Wrap
        grTexLodBiasValue call Link math library into libGL Recognize Napalm
        boards Allow CLUT/gamma changes Make driver compile on 2.2.14 kernel

commit 1dcfddf9154bcce3d6e004acee7dd503c27d0f0b
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Apr 5 18:48:23 2000 +0000

    Fixed reclaim Oops

commit ba1b1ae3806490cce16a9c8957b52cd74967f463
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Tue Apr 4 22:08:14 2000 +0000

    Merged mga branch with trunk

commit 7d715d1800031ccbd37db7f88896464c0e838f10
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Fri Mar 31 00:08:00 2000 +0000

    file mga_drm.h was initially added on branch mga-0-0-2-branch.

commit 45b6bd6f19d04e375dede6cd0374031a49e31efd
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Fri Mar 31 00:08:00 2000 +0000

    file i810_drm.h was initially added on branch mga-0-0-2-branch.

commit 5bd8014f276d447178a1193d9dea1b976647d6ce
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Mar 16 03:37:30 2000 +0000

    Merge with 4.0

commit adc03d3661117a687b5e1686f11b4b1314922203
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Mar 15 21:40:23 2000 +0000

    Import of XFree86 4.0

commit d9ff0e3884abd19cdf99426d4d4b1e8f17b4ffd1
Author: Kevin E Martin <kem@kem.org>
Date:   Tue Feb 22 22:10:28 2000 +0000

    3.9.18 merge

commit 7a9b291ab55dd9dcfeb35217f6105ad57c94f433
Author: Kevin E Martin <kem@kem.org>
Date:   Tue Feb 22 15:43:59 2000 +0000

    Import of XFree86 3.9.18

commit 9a1197da5cd84624f5b0741e0a20fee60eb8b4f1
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sun Feb 13 01:29:40 2000 +0000

    file i810_clear.c was initially added on branch mga-0-0-1-branch.

commit 37fa5fd54ae4cedbd5db22a646b37dbef8998656
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sun Feb 13 01:29:40 2000 +0000

    file i810_dma.h was initially added on branch mga-0-0-1-branch.

commit c6e856749badbdeeaa7647f93760f612f370a4ef
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Feb 12 21:48:57 2000 +0000

    file Makefile.linuxpoll was initially added on branch mga-0-0-1-branch.

commit baacc589f1add9ca5ff8a471c2c2bcb1b93f227f
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Feb 12 21:48:57 2000 +0000

    file mga_dmapoll.c was initially added on branch mga-0-0-1-branch.

commit 5a3acfc628f42ee244468f84e8e811c79f7bf938
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Feb 12 02:08:58 2000 +0000

    file i810_drm_public.h was initially added on branch mga-0-0-1-branch.

commit 9fc0e46b67bd9ffa2b91644680fe21d0d9451314
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Sun Feb 6 18:50:35 2000 +0000

    file mga_state.h was initially added on branch mga-0-0-1-branch.

commit d222453c4af94838fc1a669c3222dc0fdd9ee896
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Feb 4 07:32:24 2000 +0000

    file mga_dma.h was initially added on branch mga-0-0-1-branch.

commit a0ae1680027e9fc460a82ef70ee83c738d9d1846
Author: Keith Whitwell <keith@tungstengraphics.com>
Date:   Fri Feb 4 07:32:24 2000 +0000

    file mga_clear.c was initially added on branch mga-0-0-1-branch.

commit 9fcbf05c442d0b45d0fa7d7aca28e1f3c67de65a
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Fri Jan 28 02:11:01 2000 +0000

    Fixed freelist_put bug

commit 84ad2d4aaea46ca2be005a37bd99dc5be1b2a891
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Jan 27 23:48:40 2000 +0000

    file mga_state.c was initially added on branch mga-0-0-1-branch.

commit d93a3667b2bcab7ed08de79e9eafd7c162d8e674
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Jan 27 23:48:40 2000 +0000

    file mga_drm_public.h was initially added on branch mga-0-0-1-branch.

commit 0d9121a5ec6a5bdd881fbc48f97805b5aed2d0b5
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Jan 19 13:05:51 2000 +0000

    file mgareg_flags.h was initially added on branch mga-0-0-1-branch.

commit d545384a2b719f84a9a27ca7502f05325a49e646
Author: Rik Faith <faith@alephnull.com>
Date:   Mon Jan 17 10:27:29 2000 +0000

    Try a more complex (and more correct?) method for finding kernel inlcude
        files

commit fb0ace84a9e1afb0ec49b11d0a10898dbbb61502
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Sat Jan 15 18:25:07 2000 +0000

    Remove -g from build Fix lost code from tdfx-1-1 merge in tdfx_priv.c Lower
        the minimum required fifo size Fix the kernel tree detection in the
        Makefile

commit 9a838857e1a271bd13881c2cd2d058072654dd12
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jan 13 15:03:41 2000 +0000

    Add new code to do SMP/MODVERSIONS detection for more distributions

commit aa724a52b9e3b5fa6a768629e2d403288432b7a8
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Wed Jan 12 21:47:44 2000 +0000

    Add a drm_poll function to the tdfx driver. This fixes the problem with
    3.9.17 where the server hangs when the mouse is first moved.

commit e83ae7576bca0dc248a03c8031b0cce37956aac4
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Jan 8 00:17:21 2000 +0000

    file i810_dma.c was initially added on branch mga-0-0-1-branch.

commit ca64f467f296b26826c4e00e1f310a4301ac1e65
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Jan 8 00:17:21 2000 +0000

    file i810_drv.h was initially added on branch mga-0-0-1-branch.

commit 19f6b7f5ff0e836262bb1478d9aae9a65f733f5d
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Jan 8 00:17:21 2000 +0000

    file i810_drv.c was initially added on branch mga-0-0-1-branch.

commit c3622292efbf605b09ce63c5bed27d02c4f6cafe
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Jan 8 00:17:21 2000 +0000

    file i810_bufs.c was initially added on branch mga-0-0-1-branch.

commit 138484c670aa570d7ad2e0308ace13ec0bfe9ee0
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Sat Jan 8 00:17:21 2000 +0000

    file i810_context.c was initially added on branch mga-0-0-1-branch.

commit 9243a76e0384f66c6c6799917affffbd9ca38ec6
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Jan 7 06:54:54 2000 +0000

    Merge between X_3_9_16 and X_3_9_17 Compiles but may not run.

commit bf0e55959f6c73731500ed9a0d4decc17c9523cd
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Jan 6 23:44:30 2000 +0000

    file mga_bufs.c was initially added on branch mga-0-0-1-branch.

commit cbb5afb3386a074f1b05983ed3880b3b33cb0d26
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Jan 6 23:44:30 2000 +0000

    file mga_context.c was initially added on branch mga-0-0-1-branch.

commit 19da57df105a2a71842cf3a6a18ebb07c86c95fc
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Thu Jan 6 23:44:30 2000 +0000

    file ctxbitmap.c was initially added on branch mga-0-0-1-branch.

commit 1c33c6909546e3b51f36c04bba12cc2275149902
Author: Rik Faith <faith@alephnull.com>
Date:   Thu Jan 6 12:55:00 2000 +0000

    Import of XFree86 3.9.17

commit 0371c290a12f75d36c9c1e7c947bf98fe210908b
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Sat Dec 18 18:34:59 1999 +0000

    Rename the device to be /dev/dri instead of /dev/dri to avoid a conflict.
        Rename proc entry from /proc/graphics to /proc/dri to be consistent.

commit 46e1467a83415f3859ac15b8aa8dfb829c85d1d4
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Dec 17 17:17:53 1999 +0000

    file agpsupport.c was initially added on branch ati-4-0-0-branch.

commit 87fd9a07fc0bd8d052843817703e0032cbe365f6
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Dec 17 17:15:18 1999 +0000

    file r128_drv.c was initially added on branch ati-4-0-0-branch.

commit bf24c3d8819be07d29ee6fdd9bf95b5127c2b018
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Dec 17 17:15:18 1999 +0000

    file r128_context.c was initially added on branch ati-4-0-0-branch.

commit 1606f5b249386c27a0d70a1e7693d1246ada3de5
Author: Rik Faith <faith@alephnull.com>
Date:   Fri Dec 17 17:15:18 1999 +0000

    file r128_drv.h was initially added on branch ati-4-0-0-branch.

commit 32338d3ebb7153b6c9c41bbc1b1f2a627178cb93
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Dec 15 06:49:15 1999 +0000

    file mga_drv.c was initially added on branch mga-0-0-1-branch.

commit 8de9114ea6be1790a8d36cd260e0944f2991d8b8
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Dec 15 06:49:15 1999 +0000

    file mga_dma.c was initially added on branch mga-0-0-1-branch.

commit 1c6999d90c77ae43616f180345dc2257ae65fe3a
Author: Jeff Hartmann <jhartmann@valinux.com>
Date:   Wed Dec 15 06:49:15 1999 +0000

    file mga_drv.h was initially added on branch mga-0-0-1-branch.

commit b03b238dfc4d1992e27878ea6f3cac334f1fd56d
Author: Rik Faith <faith@alephnull.com>
Date:   Wed Dec 8 19:20:20 1999 +0000

    Sync with Linux 2.3.30

commit e1dba5c3a73078dec24f07a6d685435677db94a4
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Tue Dec 7 03:37:16 1999 +0000

    Move Mesa to xc/extras Update to the latest Mesa 3.2 code Fix the Q3Demo
        bugs (white railgun and texture mapping) Simplify driver texture
        mapping routines Fix device driver for 2.3 kernels Improve performance

commit b6a28bfe98f2c89cfb91079bd3c7b63fb0144eb1
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Sun Dec 5 23:10:37 1999 +0000

    First DRI release of 3dfx driver.

commit a8ab34ed47c1880b1206812c9b1b8312cd7a3357
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Sun Dec 5 01:19:48 1999 +0000

    Import XFree 3.9.16

commit b3a5766992019fc5f44cc9afd01b2617b76f47a7
Author: Daryll Strauss <daryll@users.sourceforge.net>
Date:   Sun Dec 5 01:19:48 1999 +0000

    Initial revision
